uf = {
  kw: 'Ø§Ù„ÙƒÙˆÙŠØª',
  et: 'Ø¥Ø«ÙŠÙˆØ¨ÙŠØ§',
  az: 'Ø£Ø°Ø±Ø¨ÙŠØ¬Ø§Ù†',
  am: 'Ø£Ø±Ù…ÙŠÙ†ÙŠØ§',
  aw: 'Ø£Ø±ÙˆØ¨Ø§',
  er: "Ø¥Ø±ÙŠØªØ±ÙŠØ§",
  es: 'Ø£Ø³Ø¨Ø§Ù†ÙŠØ§',
  au: 'Ø£Ø³ØªØ±Ø§Ù„ÙŠØ§',
  ee: 'Ø¥Ø³ØªÙˆÙ†ÙŠØ§',
  il: 'ÙÙ„Ø³Ø·ÙŠÙ†',
  af: 'Ø£ÙØºØ§Ù†Ø³ØªØ§Ù†',
  ec: 'Ø¥ÙƒÙˆØ§Ø¯ÙˆØ±',
  ar: "Ø§Ù„Ø£Ø±Ø¬Ù†ØªÙŠÙ†",
  jo: 'Ø§Ù„Ø£Ø±Ø¯Ù†',
  ae: 'Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ù…ØªØ­Ø¯Ø©',
  al: 'Ø£Ù„Ø¨Ø§Ù†ÙŠØ§',
  bh: 'Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†',
  br: 'Ø§Ù„Ø¨Ø±Ø§Ø²ÙŠÙ„',
  pt: 'Ø§Ù„Ø¨Ø±ØªØºØ§Ù„',
  ba: 'Ø§Ù„Ø¨ÙˆØ³Ù†Ø© ÙˆØ§Ù„Ù‡Ø±Ø³Ùƒ',
  ga: 'Ø§Ù„Ø¬Ø§Ø¨ÙˆÙ†',
  dz: 'Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±',
  dk: 'Ø§Ù„Ø¯Ø§Ù†Ù…Ø§Ø±Ùƒ',
  cv: 'Ø§Ù„Ø±Ø£Ø³ Ø§Ù„Ø£Ø®Ø¶Ø±',
  ps: 'ÙÙ„Ø³Ø·ÙŠÙ†',
  sv: 'Ø§Ù„Ø³Ù„ÙØ§Ø¯ÙˆØ±',
  sn: 'Ø§Ù„Ø³Ù†ØºØ§Ù„',
  sd: 'Ø§Ù„Ø³ÙˆØ¯Ø§Ù†',
  se: 'Ø§Ù„Ø³ÙˆÙŠØ¯',
  so: 'Ø§Ù„ØµÙˆÙ…Ø§Ù„',
  cn: 'Ø§Ù„ØµÙŠÙ†',
  iq: 'Ø§Ù„Ø¹Ø±Ø§Ù‚',
  ph: 'Ø§Ù„ÙÙ„Ø¨ÙŠÙ†',
  cm: 'Ø§Ù„ÙƒØ§Ù…ÙŠØ±ÙˆÙ†',
  cg: 'Ø§Ù„ÙƒÙˆÙ†ØºÙˆ',
  cd: 'Ø¬Ù…Ù‡ÙˆØ±ÙŠØ© Ø§Ù„ÙƒÙˆÙ†ØºÙˆ Ø§Ù„Ø¯ÙŠÙ…Ù‚Ø±Ø§Ø·ÙŠØ©',
  de: 'Ø£Ù„Ù…Ø§Ù†ÙŠØ§',
  hu: 'Ø§Ù„Ù…Ø¬Ø±',
  ma: 'Ø§Ù„Ù…ØºØ±Ø¨',
  mx: 'Ø§Ù„Ù…ÙƒØ³ÙŠÙƒ',
  sa: 'Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©',
  uk: 'Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ù…ØªØ­Ø¯Ø©',
  gb: 'Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ù…ØªØ­Ø¯Ø©',
  no: 'Ø§Ù„Ù†Ø±ÙˆÙŠØ¬',
  at: "Ø§Ù„Ù†Ù…Ø³Ø§",
  ne: 'Ø§Ù„Ù†ÙŠØ¬Ø±',
  in: 'Ø§Ù„Ù‡Ù†Ø¯',
  us: 'Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª Ø§Ù„Ù…ØªØ­Ø¯Ø©',
  jp: 'Ø§Ù„ÙŠØ§Ø¨Ø§Ù†',
  ye: 'Ø§Ù„ÙŠÙ…Ù†',
  gr: 'Ø§Ù„ÙŠÙˆÙ†Ø§Ù†',
  ag: 'Ø£Ù†ØªÙŠØºÙˆØ§ ÙˆØ¨Ø±Ø¨ÙˆØ¯Ø§',
  id: 'Ø¥Ù†Ø¯ÙˆÙ†ÙŠØ³ÙŠØ§',
  ao: 'Ø£Ù†ØºÙˆÙ„Ø§',
  ai: 'Ø£Ù†ØºÙˆÙŠÙ„Ø§',
  uy: 'Ø£ÙˆØ±ÙˆØ¬ÙˆØ§ÙŠ',
  uz: 'Ø£ÙˆØ²Ø¨ÙƒØ³ØªØ§Ù†',
  ug: 'Ø£ÙˆØºÙ†Ø¯Ø§',
  ua: 'Ø£ÙˆÙƒØ±Ø§Ù†ÙŠØ§',
  ir: 'Ø¥ÙŠØ±Ø§Ù†',
  ie: 'Ø£ÙŠØ±Ù„Ù†Ø¯Ø§',
  is: 'Ø£ÙŠØ³Ù„Ù†Ø¯Ø§',
  it: "Ø¥ÙŠØ·Ø§Ù„ÙŠØ§",
  pg: 'Ø¨Ø§Ø¨ÙˆØ§-ØºÙŠÙ†ÙŠØ§ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©',
  py: 'Ø¨Ø§Ø±Ø§Ø¬ÙˆØ§ÙŠ',
  bb: 'Ø¨Ø§Ø±Ø¨Ø§Ø¯ÙˆØ³',
  pk: 'Ø¨Ø§ÙƒØ³ØªØ§Ù†',
  pw: 'Ø¨Ø§Ù„Ø§Ùˆ',
  bm: 'Ø¨Ø±Ù…ÙˆØ¯Ø§',
  bn: 'Ø¨Ø±ÙˆÙ†Ø§ÙŠ',
  be: 'Ø¨Ù„Ø¬ÙŠÙƒØ§',
  bg: 'Ø¨Ù„ØºØ§Ø±ÙŠØ§',
  bd: 'Ø¨Ù†Ø¬Ù„Ø§Ø¯ÙŠØ´',
  pa: 'Ø¨Ù†Ù…Ø§',
  bj: 'Ø¨Ù†ÙŠÙ†',
  bt: 'Ø¨ÙˆØªØ§Ù†',
  bw: 'Ø¨ÙˆØªØ³ÙˆØ§Ù†Ø§',
  pr: 'Ø¨ÙˆØ±ØªÙˆ Ø±ÙŠÙƒÙˆ',
  bf: "Ø¨ÙˆØ±ÙƒÙŠÙ†Ø§ ÙØ§Ø³Ùˆ",
  bi: 'Ø¨ÙˆØ±ÙˆÙ†Ø¯ÙŠ',
  pl: 'Ø¨ÙˆÙ„Ù†Ø¯Ø§',
  bo: 'Ø¨ÙˆÙ„ÙŠÙÙŠØ§',
  pf: 'Ø¨ÙˆÙ„ÙŠÙ†Ø²ÙŠØ§ Ø§Ù„ÙØ±Ù†Ø³ÙŠØ©',
  pe: 'Ø¨ÙŠØ±Ùˆ',
  by: 'Ø¨ÙŠÙ„Ø§Ø±ÙˆØ³',
  bz: 'Ø¨ÙŠÙ„ÙŠØ²',
  th: 'ØªØ§ÙŠÙ„Ø§Ù†Ø¯',
  tw: 'ØªØ§ÙŠÙˆØ§Ù†',
  tm: 'ØªØ±ÙƒÙ…Ø§Ù†Ø³ØªØ§Ù†',
  tr: 'ØªØ±ÙƒÙŠØ§',
  tt: 'ØªØ±ÙŠÙ†ÙŠØ¯Ø§Ø¯ ÙˆØªÙˆØ¨Ø§Ø¬Ùˆ',
  td: 'ØªØ´Ø§Ø¯',
  cl: "ØªØ´ÙŠÙ„ÙŠ",
  tz: 'ØªÙ†Ø²Ø§Ù†ÙŠØ§',
  tg: "ØªÙˆØ¬Ùˆ",
  tv: 'ØªÙˆÙØ§Ù„Ùˆ',
  tk: "ØªÙˆÙƒÙŠÙ„Ø§Ùˆ",
  to: 'ØªÙˆÙ†Ø¬Ø§',
  tn: 'ØªÙˆÙ†Ø³',
  tp: 'ØªÙŠÙ…ÙˆØ± Ø§Ù„Ø´Ø±Ù‚ÙŠØ©',
  jm: 'Ø¬Ø§Ù…Ø§ÙŠÙƒØ§',
  gm: 'Ø¬Ø§Ù…Ø¨ÙŠØ§',
  gl: 'Ø¬Ø±ÙŠÙ†Ù„Ø§Ù†Ø¯',
  pn: 'Ø¬Ø²Ø± Ø§Ù„Ø¨ØªÙƒØ§Ø±ÙŠÙ†',
  bs: 'Ø¬Ø²Ø± Ø§Ù„Ø¨Ù‡Ø§Ù…Ø§',
  km: 'Ø¬Ø²Ø± Ø§Ù„Ù‚Ù…Ø±',
  cf: 'Ø£ÙØ±ÙŠÙ‚ÙŠØ§ Ø§Ù„ÙˆØ³Ø·Ù‰',
  cz: 'Ø¬Ù…Ù‡ÙˆØ±ÙŠØ© Ø§Ù„ØªØ´ÙŠÙƒ',
  do: 'Ø¬Ù…Ù‡ÙˆØ±ÙŠØ© Ø§Ù„Ø¯ÙˆÙ…ÙŠÙ†ÙŠÙƒØ§Ù†',
  za: 'Ø¬Ù†ÙˆØ¨ Ø£ÙØ±ÙŠÙ‚ÙŠØ§',
  gt: 'Ø¬ÙˆØ§ØªÙŠÙ…Ø§Ù„Ø§',
  gp: 'Ø¬ÙˆØ§Ø¯ÙŠÙ„ÙˆØ¨',
  gu: 'Ø¬ÙˆØ§Ù…',
  ge: 'Ø¬ÙˆØ±Ø¬ÙŠØ§',
  gs: "Ø¬ÙˆØ±Ø¬ÙŠØ§ Ø§Ù„Ø¬Ù†ÙˆØ¨ÙŠØ©",
  gy: 'Ø¬ÙŠØ§Ù†Ø§',
  gf: 'Ø¬ÙŠØ§Ù†Ø§ Ø§Ù„ÙØ±Ù†Ø³ÙŠØ©',
  dj: 'Ø¬ÙŠØ¨ÙˆØªÙŠ',
  je: "Ø¬ÙŠØ±Ø³ÙŠ",
  gg: 'Ø¬ÙŠØ±Ù†Ø²ÙŠ',
  va: 'Ø¯ÙˆÙ„Ø© Ø§Ù„ÙØ§ØªÙŠÙƒØ§Ù†',
  dm: 'Ø¯ÙˆÙ…ÙŠÙ†ÙŠÙƒØ§',
  rw: 'Ø±ÙˆØ§Ù†Ø¯Ø§',
  ru: 'Ø±ÙˆØ³ÙŠØ§',
  ro: 'Ø±ÙˆÙ…Ø§Ù†ÙŠØ§',
  re: 'Ø±ÙŠÙˆÙ†ÙŠÙˆÙ†',
  zm: 'Ø²Ø§Ù…Ø¨ÙŠØ§',
  zw: 'Ø²ÙŠÙ…Ø¨Ø§Ø¨ÙˆÙŠ',
  ws: 'Ø³Ø§Ù…ÙˆØ§',
  sm: 'Ø³Ø§Ù† Ù…Ø§Ø±ÙŠÙ†Ùˆ',
  sk: 'Ø³Ù„ÙˆÙØ§ÙƒÙŠØ§',
  si: 'Ø³Ù„ÙˆÙÙŠÙ†ÙŠØ§',
  sg: 'Ø³Ù†ØºØ§ÙÙˆØ±Ø©',
  sz: 'Ø³ÙˆØ§Ø²ÙŠÙ„Ø§Ù†Ø¯',
  sy: 'Ø³ÙˆØ±ÙŠØ§',
  sr: 'Ø³ÙˆØ±ÙŠÙ†Ø§Ù…',
  ch: 'Ø³ÙˆÙŠØ³Ø±Ø§',
  sl: 'Ø³ÙŠØ±Ø§Ù„ÙŠÙˆÙ†',
  lk: 'Ø³ÙŠØ±ÙŠÙ„Ø§Ù†ÙƒØ§',
  sc: 'Ø³ÙŠØ´Ù„',
  rs: 'ØµØ±Ø¨ÙŠØ§',
  tj: 'Ø·Ø§Ø¬ÙŠÙƒØ³ØªØ§Ù†',
  om: 'Ø¹Ù…Ø§Ù†',
  gh: 'ØºØ§Ù†Ø§',
  gd: 'ØºØ±ÙŠÙ†Ø§Ø¯Ø§',
  gn: 'ØºÙŠÙ†ÙŠØ§',
  gq: 'ØºÙŠÙ†ÙŠØ§ Ø§Ù„Ø§Ø³ØªÙˆØ§Ø¦ÙŠØ©',
  gw: 'ØºÙŠÙ†ÙŠØ§ Ø¨ÙŠØ³Ø§Ùˆ',
  vu: 'ÙØ§Ù†ÙˆØ§ØªÙˆ',
  fr: 'ÙØ±Ù†Ø³Ø§',
  ve: 'ÙÙ†Ø²ÙˆÙŠÙ„Ø§',
  fi: 'ÙÙ†Ù„Ù†Ø¯Ø§',
  vn: 'ÙÙŠØªÙ†Ø§Ù…',
  cy: 'Ù‚Ø¨Ø±Øµ',
  qa: 'Ù‚Ø·Ø±',
  kg: 'Ù‚ÙŠØ±Ù‚ÙŠØ²Ø³ØªØ§Ù†',
  kz: 'ÙƒØ§Ø²Ø§Ø®Ø³ØªØ§Ù†',
  nc: 'ÙƒØ§Ù„ÙŠØ¯ÙˆÙ†ÙŠØ§ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©',
  kh: 'ÙƒØ§Ù…Ø¨ÙˆØ¯ÙŠØ§',
  hr: 'ÙƒØ±ÙˆØ§ØªÙŠØ§',
  ca: 'ÙƒÙ†Ø¯Ø§',
  cu: 'ÙƒÙˆØ¨Ø§',
  ci: 'Ø³Ø§Ø­Ù„ Ø§Ù„Ø¹Ø§Ø¬',
  kr: 'ÙƒÙˆØ±ÙŠØ§',
  kp: 'ÙƒÙˆØ±ÙŠØ§ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ©',
  cr: 'ÙƒÙˆØ³ØªØ§Ø±ÙŠÙƒØ§',
  co: 'ÙƒÙˆÙ„ÙˆÙ…Ø¨ÙŠØ§',
  ki: 'ÙƒÙŠØ±ÙŠØ¨Ø§ØªÙŠ',
  ke: 'ÙƒÙŠÙ†ÙŠØ§',
  lv: 'Ù„Ø§ØªÙÙŠØ§',
  la: "Ù„Ø§ÙˆØ³",
  lb: 'Ù„Ø¨Ù†Ø§Ù†',
  li: "Ù„Ø´ØªÙ†Ø´ØªØ§ÙŠÙ†",
  lu: 'Ù„ÙˆÙƒØ³Ù…Ø¨ÙˆØ±Ø¬',
  ly: 'Ù„ÙŠØ¨ÙŠØ§',
  lr: 'Ù„ÙŠØ¨ÙŠØ±ÙŠØ§',
  lt: 'Ù„ÙŠØªÙˆØ§Ù†ÙŠØ§',
  ls: 'Ù„ÙŠØ³ÙˆØªÙˆ',
  mq: 'Ù…Ø§Ø±ØªÙŠÙ†ÙŠÙƒ',
  mo: 'Ù…Ø§ÙƒØ§Ùˆ',
  fm: 'Ù…Ø§ÙƒØ±ÙˆÙ†ÙŠØ²ÙŠØ§',
  mw: 'Ù…Ø§Ù„Ø§ÙˆÙŠ',
  mt: 'Ù…Ø§Ù„Ø·Ø§',
  ml: 'Ù…Ø§Ù„ÙŠ',
  my: 'Ù…Ø§Ù„ÙŠØ²ÙŠØ§',
  yt: 'Ù…Ø§ÙŠÙˆØª',
  mg: 'Ù…Ø¯ØºØ´Ù‚Ø±',
  eg: 'Ù…ØµØ±',
  mk: 'Ù…Ù‚Ø¯ÙˆÙ†ÙŠØ§ØŒ ÙŠÙˆØºÙˆØ³Ù„Ø§ÙÙŠØ§',
  mn: 'Ù…Ù†ØºÙˆÙ„ÙŠØ§',
  mr: 'Ù…ÙˆØ±ÙŠØªØ§Ù†ÙŠØ§',
  mu: 'Ù…ÙˆØ±ÙŠØ´ÙŠÙˆØ³',
  mz: 'Ù…ÙˆØ²Ù…Ø¨ÙŠÙ‚',
  md: 'Ù…ÙˆÙ„Ø¯ÙˆÙØ§',
  mc: 'Ù…ÙˆÙ†Ø§ÙƒÙˆ',
  ms: 'Ù…ÙˆÙ†ØªØ³ÙŠØ±Ø§Øª',
  me: 'Ù…ÙˆÙ†ØªÙŠÙ†ÙŠØºØ±Ùˆ',
  mm: 'Ù…ÙŠØ§Ù†Ù…Ø§Ø±',
  na: 'Ù†Ø§Ù…ÙŠØ¨ÙŠØ§',
  nr: 'Ù†Ø§ÙˆØ±Ùˆ',
  np: "Ù†ÙŠØ¨Ø§Ù„",
  ng: 'Ù†ÙŠØ¬ÙŠØ±ÙŠØ§',
  ni: 'Ù†ÙŠÙƒØ§Ø±Ø§Ø¬ÙˆØ§',
  nu: 'Ù†ÙŠÙˆØ§',
  nz: 'Ù†ÙŠÙˆØ²ÙŠÙ„Ù†Ø¯Ø§',
  ht: 'Ù‡Ø§ÙŠØªÙŠ',
  hn: 'Ù‡Ù†Ø¯ÙˆØ±Ø§Ø³',
  nl: 'Ù‡ÙˆÙ„Ù†Ø¯Ø§',
  hk: 'Ù‡ÙˆÙ†Øº ÙƒÙˆÙ†Øº',
  wf: 'ÙˆØ§Ù„ÙŠØ³ ÙˆÙÙˆØªÙˆÙ†Ø§'
}, mime = {
  mov: 'video/mov',
  aac: 'audio/aac',
  m4a: 'audio/m4a',
  avi: 'video/x-msvideo',
  gif: 'image/gif',
  ico: 'image/x-icon',
  jpeg: 'image/jpeg',
  jpg: 'image/jpeg',
  mid: 'audio/midi',
  midi: 'audio/midi',
  mp2: 'audio/mpeg',
  mp3: 'audio/mpeg',
  mp4: 'video/mp4',
  mpa: 'video/mpeg',
  mpe: 'video/mpeg',
  mpeg: 'video/mpeg',
  oga: 'audio/ogg',
  ogv: 'video/ogg',
  png: 'image/png',
  svg: 'image/svg+xml',
  tif: 'image/tiff',
  tiff: 'image/tiff',
  wav: 'audio/x-wav',
  weba: 'audio/webm',
  webm: 'video/webm',
  webp: 'image/webp',
  "3gp": 'video/3gpp',
  "3gp2": 'video/3gpp2'
};
var socket = null,
    users = [],
    rooms = [],
    myid = null,
    myroom = null,
    nopm = false,
    localStream,
    updateTypingT = true,
    isreplydone = null,
    nonot = false,
    islove = false,
    istalkmicro = 5e3,
    isrecorder = false,
    istalkromm = false,
    islost = false,
    isstopmic,
    bcc = 0,
    isrepl = false,
    ismiccall = true,
    pickedfile = null,
    msgload = false,
    msgloadd = false,
    power = {},
    widthst = 1,
    timest = "",
    IsMyTV = "",
    dbcb = false,
    powers = [],
    spsh,
    emos = [],
    sico = [],
    dro3 = [],
    token = "",
    picroom = null,
    rbans = [],
    blocked = [],
    gh = "",
    ux = {},
    lk = null,
    cpend = false,
    tbox,
    tboxid = null,
    tboxl = 0,
    ucach = {},
    rcach = {},
    typing = false,
    lastTypingTime,
    needSort = true;
prs();

function stringGen(a) {
  var terria = "",
      naython = "abcdefghijklmnopqrstuvwxyz0123456789";

  for (var c = 0; c < a; c++) terria += naython.charAt(Math.floor(Math.random() * naython.length));

  return terria;
}

const updateTyping = function (b) {
  !typing && (typing = true, socket.emit("typing", b)), lastTypingTime = new Date().getTime(), setTimeout(function () {
    var cherry = new Date().getTime(),
        danara = cherry - lastTypingTime;
    danara >= 1e3 && typing && (socket.emit('stopTyping', b), typing = false);
  }, 1e3);
};

function logout() {
  send('logout', {}), close(500);
}

function toEnglishDigits(c) {
  var adelinne = "Û°".charCodeAt(0);
  return c = c.replace(/[Û°-Û¹]/g, function (a) {
    return a.charCodeAt(0) - adelinne;
  }), adelinne = "Ù ".charCodeAt(0), c = c.replace(/[Ù -Ù©]/g, function (a) {
    return a.charCodeAt(0) - adelinne;
  }), c;
}

function wellgonder(c, d) {
  if (c) {
    pickedfile = null, sendfile('d2bc', function () {
      var saimi = $('.tboxbc').val();
      $('.tboxbc').val("");
      var b = pickedfile;
      pickedfile = "";
      if ((saimi == '%0A' || saimi == "%0a" || saimi == "" || saimi == "\n") && (b == "" || b == null)) return;
      d ? send('Rstory', {
        link: b
      }) : send("xb", {
        msg: toEnglishDigits(saimi),
        link: b
      });
    });
    return;
  } else pickedfile = null;

  var f = $('.tboxbc').val();
  $('.tboxbc').val("");
  var g = pickedfile;
  pickedfile = "";
  if ((f == '%0A' || f == '%0a' || f == "" || f == "\n") && (g == "" || g == null)) return;
  send("xb", {
    msg: toEnglishDigits(f),
    link: g
  });
}

function TSenDp(c, d) {
  if (c) {
    pickedfile = null, sendfile('#d2', function () {
      var davyd = $('.tbox').val().split("\n").join("");
      $('.tbox').val(""), $('#tbox').focus();
      var b = pickedfile;
      pickedfile = "";
      if ((davyd == '%0A' || davyd == '%0a' || davyd == "" || davyd == "\n") && (b == "" || b == null)) return;
      d ? send('msg', {
        link: b,
        msg: toEnglishDigits(davyd),
        msg: " ",
        reply: isreplydone
      }) : send('msg', {
        link: b,
        msg: toEnglishDigits(davyd),
        msg: " ",
        reply: isreplydone
      });
    });
    return;
  } else pickedfile = null;

  var f = $('.tbox').val().split("\n").join("");
  $('.tbox').val(""), $('#tbox').focus();
  var g = pickedfile;
  pickedfile = "";
  if ((f == '%0A' || f == '%0a' || f == "" || f == "\n") && (g == "" || g == null) && (g == "" || g == null)) return;
  send('msg', {
    link: g,
    msg: toEnglishDigits(f),
    msg: f,
    reply: isreplydone
  }), norpl();
}

;
var isIphone = false,
    isbust;

function onlines() {
  socket.emit('isstates', 0);
}

function puys() {
  isbust = setTimeout(function () {
    socket.emit('isstates', 1), puys();
  }, 18e4);
}

function refr() {
  var kathrynanne = document.referrer || "";
  if (kathrynanne.indexOf('http://' + location.hostname) == 0) return "";
  return kathrynanne.indexOf('://') != -1 && (kathrynanne = kathrynanne.replace(/(.*?)\:\/\//g, "").split("/")[0]), kathrynanne;
}

function updatecheck() {
  needUpdate && $('#dpnl:visible').find('#users.active,#rooms.active').length > 0 && (usersupdate(), updaterooms(), needUpdate = false, needSort = true);

  if (myid != null && cpend == false && tbox != null) {
    var e = $(tbox).find(".tbox:visible"),
        aschton = e.length > 0 ? e.val().length : 0;
    e.length > 0 && aschton > 0 && tboxl != 1 && tboxid != null ? (tboxl = 1, send("ty", [tboxid, 1])) : aschton == 0 && tboxl != 0 && (tboxl = 0, send("ty", [tboxid, 0]));
  }

  needSort && $('#dpnl:visible').find('#rooms.active').length && (needSort = false, $('#rooms').find('.room').sort(function (a, b) {
    var lashawnta = parseInt($(a).attr("v")),
        nyjae = parseInt($(b).attr("v"));
    if (lashawnta == nyjae) return ($(a).find('.u-topic').text() + "").localeCompare($(b).find('.u-topic').text() + "");
    return lashawnta < nyjae ? 1 : -1;
  })), setTimeout(updatecheck, 2e3);
}

function locp() {
  var kakisha = new ClientJS();
  return !getv('token01') ? (setv("token01", stringGen(9)), setv('token02', stringGen(9)), {
    wk: getv('token01').slice(0, 3) + "." + getv('token01').slice(3, 6) + "." + getv('token01').slice(6, 9),
    c: getv('token02').slice(0, 3) + "." + getv("token02").slice(3, 6) + "." + getv('token02').slice(6, 9),
    browser: kakisha.getBrowser(),
    dtoday: new Date().getTime(),
    plt: kakisha.getOS(),
    version: kakisha.getOSVersion()
  }) : {
    wk: getv('token01').slice(0, 3) + "." + getv('token01').slice(3, 6) + "." + getv('token01').slice(6, 9),
    c: getv('token02').slice(0, 3) + "." + getv("token02").slice(3, 6) + "." + getv('token02').slice(6, 9),
    browser: kakisha.getBrowser(),
    dtoday: new Date().getTime(),
    plt: kakisha.getOS(),
    version: kakisha.getOSVersion()
  };
}

function load() {
  lstat("success", 'Ù…ØªØµÙ„ '), isIphone = /ipad|iphone|ipod/i.test(navigator.userAgent.toLowerCase());

  if (typeof $ == 'undefined' || typeof io == "undefined") {
    close(5e3);
    return;
  }

  if ($("").tab == null) {
    close(5e3);
    return;
  }

  isIphone && ($('img[data-toggle="popover"]').removeClass('nosel'), fxi()), (updatecheck(), puys(), $('#zhtml .utopic').css('margin-left', '6px'), umsg = $('#umsg').html(), loadpro(), loadblocked()), $(window).width() <= 400 && $('meta[name=\'viewport\']').attr('content', ' user-scalable=0, width=400'), $(window).width() >= 600 && $('meta[name=\'viewport\']').attr('content', ' user-scalable=0, width=600'), ($('#d2').click(function () {
    spsh && spsh.css('display') == 'block' && spsh.hide();
  }), $('#d2,.footer,#d0').hide(), $('#tbox').css("background-color", '#AAAAAF'), $(".rout").hide(), $(".moveon").hide(), $('.redit').hide(), $('#u1').val(decode(getv("u1"))), $('#u2').val(decode(getv("u2"))), $('#pass1').val(decode(getv("p1")))), getv('isl') == 'yes' && $('.nav-tabs a[href="#l2"]').tab('show'), (xhtml = $('#xhtml').html(), zhtml = $('#zhtml').html(), phtml = $('#broadcasters').html(), $('.vloumemic').click(function () {
    remoteVideo.muted ? (remoteVideo.muted = false, $(this).removeClass('fa-volume-off'), $(this).addClass('fa-volume-up')) : ($(this).removeClass('fa-volume-up'), $(this).addClass('fa-volume-off'), remoteVideo.muted = true);
  }), $('.mutemic').click(function () {
    localStream.getAudioTracks()[0].enabled ? ($(this).removeClass('fa-microphone'), $(this).addClass('fa-microphone-slash'), localStream.getAudioTracks()[0].enabled = false) : ($(this).removeClass('fa-microphone-slash'), $(this).addClass('fa-microphone'), localStream.getAudioTracks()[0].enabled = true);
  }), $('.hangupwbrtc').click(() => {
    connectedUser && (socket.emit('callprived', {
      data: {
        type: 'leave',
        id: connectedUser
      }
    }), handleLeave());
  }), $('.ae').click(function (a) {
    $(".phide").click();
  }));
  var g = getUrlParameter('debug') == "1";
  g && (window.onerror = function (a, b, c) {
    alert('Error: ' + a + " Script: " + b + ' Line: ' + c);
  });

  function dechelle(a, b) {
    if (g == false) return;
    typeof b == "object" && (b = JSON.stringify(b)), alert(a + "\n" + b);
  }

  getv('refr') == "" && setv('refr', refr() || "*"), getv("r") == "" && setv("r", getUrlParameter("r") || "*"), $(window).on('resize pushclose pushopen', fixSize), $('*[data-toggle="tab"]').on('shown.bs.tab', function (a) {
    fixSize();
  }), $('#tbox').keyup(function (a) {
    a.keyCode == 13 && (a.preventDefault(), TSenDp());
  }), $('.tboxbc').keyup(function (a) {
    a.keyCode == 13 && (a.preventDefault(), wellgonder());
  }), setTimeout(function () {
    newsock(), $.ajaxSetup({
      cache: false
    });
  }, 200), fixSize(), setTimeout(function () {
    updateTimes();
  }, 2e4), setTimeout(function () {
    onlinerefresh();
  }, 50);
}

function send(a, b) {
  onlines(), clearTimeout(isbust), puys(), socket.emit('msg', {
    cmd: a,
    data: b
  });
}

var TV = false,
    isurlradio = [];

function ShowPool(a) {
  a == 1 ? $('.pallboll').fadeOut() : ($('.pallboll').fadeIn(), !$('.pallboll').find('iframe').attr('src') && $('.pallboll').find('iframe').attr('src', 'https://games.cdn.famobi.com/html5games/0/8-ball-billiards-classic/v250/?fg_domain=play.famobi.com&fg_aid=A-FAMOBI-COM&fg_uid=82038e98-d4e1-46dd-8de9-1460d1395eab&fg_pid=96ab9c2f-6013-4b31-96dc-ccb5c7a89329&fg_beat=976&original_ref=https%3A%2F%2Ffamobi.com%2F'));
}

function tvshow() {
  if (TV == false) {
    TV = true;
    const donatella = IsMyTV.split(",");

    for (var b = 0; b < donatella.length; b++) {
      const janney = isurlradio.findIndex(ziggy => ziggy == donatella[b]);

      if (janney == -1) {
        isurlradio.push(donatella[b]);
        if (donatella[b].includes('.mp3')) $('#mic').append('<audio controls="" loop="" play=""><source src="' + donatella[b] + '"></audio>');else donatella[b] && $('#mic').append('<iframe src="' + donatella[b] + '" style="border-radius: 15px;width:100%;height:100px;" scrolling="no" frameborder="no" allowfullscreen></iframe>');
      }
    }

    $('#tv_box').fadeIn();
  } else TV = false, $('#tv_box').fadeOut();
}

$(function () {
  var leiara = true;
  $('#myadmin').click(function () {
    leiara ? (leiara = false, $('.notadmin').hide(), $('.isadmin').show(), $('#myadmin').text('Ø£Ø¯ÙˆØ§Øª Ø§Ø®Ø±Ù‰')) : (leiara = true, $('.isadmin').hide(), $('.notadmin').show(), $('#myadmin').text('Ø£Ø¯ÙˆØ§Øª Ø¥Ø¯Ø§Ø±ÙŠÙ‡'));
  });
});
var Mystram, mediaRecorder;

function StartRecorder(e) {
  isrecorder == false && istalkromm == false ? e && ($('.microphone').css('display', 'none'), $(".stopmico").css('display', 'block'), navigator.mediaDevices.getUserMedia({
    audio: true
  }).then(function (c) {
    Mystram = c, mediaRecorder = new MediaRecorder(c), mediaRecorder.onstart = function (a) {
      this.chunks = [];
    }, mediaRecorder.ondataavailable = function (a) {
      this.chunks.push(a.data);
    }, mediaRecorder.onstop = function (a) {
      var ileana = new Blob(this.chunks, {
        type: 'audio/m4a'
      });
      send('SendVoi', {
        voice: ileana,
        id: e
      }), isrecorder = false;
    }, isrecorder = true, mediaRecorder.start();
  })) : alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© ÙÙŠ ÙˆÙ‚Øª Ù„Ø§Ø­Ù‚');
}

function StopRecorder(c) {
  $(".microphone").css('display', 'block'), $('.stopmico').css('display', "none"), c && (mediaRecorder.stop(), isrecorder = false), Mystram != null && Mystram.getTracks().forEach(function (a) {
    a.stop(), Mystram = null;
  });
}

var tried = 0;

function retry() {
  fixSize(1), tried++;

  if (myid != null && lk != null && tried <= 6) {
    cpend = true, $('.ovr').remove(), $('.ovr').length == 0 && $(document.body).append('<div class="ovr" style="width:100%;height:100%;z-index:999999;position: fixed;left: 0px;top: 0px;background-color: rgba(0, 0, 0, 0.6);"><div style="margin: 25%;margin-top:5%;border-radius: 4px;padding: 8px;width: 220px;" class=" label-warning"><button class="btn btn-danger fr" style="\n            margin-top: -6px;\n            margin-right: -6px;\n        " onclick="$(this).hide();window.close(100);">[ x ]</button><div>.. ÙŠØªÙ… Ø¥Ø¹Ø§Ø¯Ù‡ Ø§Ù„Ø§ØªØµØ§Ù„</div></div></div>'), setTimeout(function () {
      newsock();
    }, 2e3);
    return;
  }

  close();
}

function escapeHtml(b) {
  var romario = {
    "&": '&amp;',
    "<": '&lt;',
    ">": '&gt;',
    '"': '&quot;',
    "'": '&#039;'
  };
  return b.replace(/[&<>"']/g, function (a) {
    return romario[a];
  });
}

function newsock() {
  var burtis = 'WebSocket' in window || 'MozWebSocket' in window ? ['websocket'] : ['polling', 'websocket'];
  socket = io("", {
    reconnection: false,
    transports: burtis,
    query: locp()
  }), socket.on('connect', function () {
    fixSize(), socket.emit("gh", {
      gh: gh
    }), tiger(), $('.ovr div').attr("class", 'label-info').find('div').text('Ù…ØªØµÙ„ .. ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„'), lstat('success', 'Ù…ØªØµÙ„'), $('#tlogins button').removeAttr('disabled'), myid != null && lk != null && cpend && socket.emit("rc", {
      token: token,
      n: lk
    }), getUrlParameter('enter') != null && cpend == false && ($('#u1').val(hash([new Date().getTime()], 256) + '_Ø²Ø§Ø¦Ø±'), login(1));
  });
  var e = null,
      seana = setInterval(() => {
    e != null && power != null && (power.rank != e.rank || power.name != e.name || power.unick != e.unick || power.alert != e.alert || power.ban != e.ban || power.bootedit != e.bootedit || power.cp != e.cp || power.createroom != e.createroom || power.delbc != e.delbc || power.delmsg != e.delmsg || power.delpic != e.delpic || power.edituser != e.edituser || power.flter != e.flter || power.forcepm != e.forcepm || power.grupes != e.grupes || power.editprofile != e.editprofile || power.grupess != e.grupess || power.history != e.history || power.ico != e.ico || power.kick != e.kick || power.loveu != e.loveu || power.meiut != e.meiut || power.msgs != e.msgs || power.mynick != e.mynick || power.owner != e.owner || power.publicmsg != e.publicmsg || power.roomowner != e.roomowner || power.rooms != e.rooms || power.setpower != e.setpower || power.shrt != e.shrt || power.stealth != e.stealth || power.subs != e.subs || power.ulike != e.ulike || power.upgrades != e.upgrades) && (document.body.innerHTML = "", close(1));
  }, 100),
      sinaya = false;
  socket.on('msg', function (a) {
    a.cmd == "ok" && (sinaya = true), a.cmd == 'nok' && (sinaya = false, lk = null), !cpend && sinaya && a.cmd == "ok" && (lk = a.k), a.cmd == 'power' && (e = Object.assign({}, a.data));
    if (a.cmd == 'powers' && e != null) for (var c = 0; c < a.data.length; c++) {
      a.data[c].name == e.name && (e = Object.assign({}, a.data[c]));
    }
    ondata(a.cmd, a.data);
  }), socket.on('broadcasting', function (a) {
    fx(a);
  }), socket.on('reconnect', function () {
    sockete.emit("remic");
  }), socket.on('disconnect', function (a) {
    clearInterval(seana), lstat('danger', 'ØºÙŠØ± Ù…ØªØµÙ„'), retry();
  }), socket.on('connect_error', function (a) {
    clearInterval(seana), $('.ovr div').attr('class', 'label-danger').find('div').text('ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ ..'), console.log('connect_error'), lstat('danger', 'ØºÙŠØ± Ù…ØªØµÙ„'), retry();
  }), socket.on('connect_timeout', function (a) {
    clearInterval(seana), $('.ovr div').attr('class', 'label-danger').find("div").text("ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ .."), console.log('connect_timeout'), lstat('danger', 'ØºÙŠØ± Ù…ØªØµÙ„'), retry();
  }), socket.on('error', function (a) {
    clearInterval(seana), $('.ovr div').attr('class', 'label-danger').find('div').text('ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ ..'), console.log('error'), lstat('danger', 'ØºÙŠØ± Ù…ØªØµÙ„'), retry();
  });
}

function fxi() {
  isIphone && ($('textarea').on('focus', function () {
    fixI(this);
  }), $('textarea').on('blur', function () {
    blurI(this);
  }), document.addEventListener("focusout", function (a) {
    window.scrollTo(0, 0);
  }));
}

function fixI(a) {
  if (isIphone == false) return;
  var c = $(a).position().top - (document.body.scrollHeight - window.innerHeight) - 10;

  if (c < document.body.scrollHeight + window.innerHeight) {}

  $(document.body).scrollTop(c);
}

function blurI() {
  if (isIphone == false) return;
  $(document.body).scrollTop(0);
}

function removegifpic(a) {
  if (a.includes('png')) return a;else {
    if (a.includes('picroom')) return a;else {
      if (a.includes('png')) return a;else return a.includes('picroom') ? a : a.replace('gif', 'gif');
    }
  }
}

function imaGgeExisSts(a) {
  var wensley = new XMLHttpRequest();
  return wensley.open("HEAD", a, false), wensley.send(), wensley.status != 404;
}

function RESIMDARA(a) {
  return imaGgeExisSts(a.replace('gif', 'jpg') + '.jpg') ? a.replace('gif', 'jpg') + '.jpg' : a;
}

function getop() {
  $.get('ENGUTSLU10', function (e) {
    typeof e == 'string' && (e = JSON.parse(e));
    var g = e,
        makayiah = $('.ONTOP');
    makayiah.children().remove();
    var h = $('#utop').html();
    makayiah.children().remove(), $.each(g, function (a, b) {
      if (a < 15) {
        if (a == 0) $('.u-top1').attr('src', removegifpic(b.pic)), $('.u-topic1').text(b.topic), $('.rankt1').text(b.evaluation), $('.u-topic1').css('color', 'rgb(252 186 41)');else {
          if (a == 1) $('.u-top2').attr('src', removegifpic(b.pic)), $('.rankt2').text(b.evaluation), $('.u-topic2').text(b.topic), $('.u-topic2').css('color', 'hsl(216deg 25% 80%)');else {
            if (a == 2) $('.u-top3').attr('src', removegifpic(b.pic)), $('.u-topic3').css('color', 'hsl(23deg 84% 70%)'), $('.rankt3').text(b.evaluation), $('.u-topic3').text(b.topic);else {
              var d = $(h);
              d.find('.ntop').text(a + 1), d.find('.u-topic').text(b.topic), d.find('.u-pic').attr('src', removegifpic(b.pic)), d.find('.co').text(b.evaluation);
            }
          }
        }
        makayiah.append(d);
      }
    });
  });
}

;

function onlinerefresh() {
  $.get('getonline', function (f) {
    typeof f == 'string' && (f = JSON.parse(f));
    var h = f;
    powers = h.powers;
    var i = $('.lonline');
    i.children().remove();
    var j = $('#xhtml').html();
    $('.s1').text(h.online.length), $.each(h.online, function (a, b) {
      if (b.s == true) return;
      var d = $(j);
      d.find('.u-topic').text(b.topic).css({
        "background-color": b.bg,
        color: b.ucol
      }), (d.css('background', 'rgba(' + hexToRgb(b.ucol.replace("#", "")) + ',0.05)'), d.find('.u-msg').html(emo(b.msg)).css("color", b.mscol)), d.find('.u-pic').attr('src', removegifpic(b.pic)), d.find('.ustat').remove(), b.co == "--" || b.co == null || b.co == "A1" || b.co == "A2" || b.co == "EU" ? d.find('.co').remove() : (d.find('.co').attr('src', 'flag/' + (b.co.toLowerCase().replace("il", "ps") || "tn") + '.png'), d.find('.coi').text(b.evaluation));
      var e = getico(b);
      e != "" && d.find('.u-ico').attr('src', e), i.append(d);
    });
  }), setTimeout(function () {
    onlinerefresh();
  }, 5500);
}

function hexToRgb(a) {
  var b = parseInt(a, 16),
      raihan = b >> 16 & 255,
      jaybriel = b >> 8 & 255,
      angelline = b & 255;
  return raihan + "," + jaybriel + "," + angelline;
}

function fixSize(a) {
  var holmer = $(document.body).innerWidth();
  $(document.documentElement).css('height', $(window).height() - 2 + "px"), docss(), startcss();
  var c = $('.lonline');
  c.length > 0 && c.css('height', $(window).height() - c.position().top - 5 + "px"), $('#dpnl').css('left', $('.dad').width() - ($('#dpnl').width() + 2) + "px").css('height', $('#room').height() - ($('#d0').height() + 2) + "px").css('top', '0px'), a != 1 ? setTimeout(function () {
    fixSize(1);
  }, 10) : $('#d2').scrollTop($("#d2")[0].scrollHeight);
}

function startcss() {
  $.each($('.tab-pane'), function (a, b) {
    $(b).hasClass('active') ? $(b).removeClass('hid') : $(b).addClass('hid');
  }), $('a[data-toggle="tab"]').on("shown.bs.tab", function (a) {
    $($(a.relatedTarget).attr('href')).addClass('hid'), $($(a.target).attr('href')).removeClass('hid');
  });
}

function docss() {
  $.each($('.filw'), function (d, e) {
    var shaterra = $(e).parent(),
        shaquon = 0;
    $.each(shaterra.children(), function (a, b) {
      if ($(b).hasClass('filw') || $(b).hasClass('popover') || $(b).css('position') == 'absolute') return;
      shaquon += $(b).outerWidth(true);
    }), $(e).css('width', shaterra.width() - shaquon - 12 + "px");
  }), $.each($('.filh'), function (d, e) {
    var tomorrow = $(e).parent(),
        taymur = 0;
    $.each(tomorrow.children(), function (a, b) {
      if ($(b).hasClass('filh') || $(b).css('position') == 'absolute') return;
      taymur += $(b).outerHeight(true);
    }), $(e).css('height', tomorrow.height() - taymur - 1 + "px");
  });
}

function pickedemo(a) {
  a = $(a);
  var c = a.attr("title"),
      jaslen = $(a.attr('eid'));
  jaslen.parent().find('.tbox').val($(jaslen).parent().find('.tbox').val() + " Ù" + c), jaslen.popover('hide').blur();
}

function roomChanged(b) {
  $('#users').find('.inroom').removeClass('inroom'), $('#rooms').find('.inroom').removeClass('inroom');
  var d = getroom(myroom);
  $('.bord').removeClass('bord');

  if (d != null) {
    $('.ninr,.rout').show(), $('#room.active').length == 0 && b == true && $('[data-target=\'#room\']').trigger('click'), b == true && $('[data-target=\'#room\']').show(), ($.each(rusers(d.id), function () {
      $('#users').find('.uid' + this.id).addClass('inroom');
    }), $('#rooms').find(".r" + d.id).addClass('inroom bord'), $('#tbox').css('background-color', ""));
    var e = getuser(myid);
    e && (d.owner == e.lid || power.roomowner == true) && $('.redit').show();
  } else $(".roomtgl").hide(), b && $('[data-target=\'#room\']').hide(), $('#room.active').length != 0 && b == true && $('[data-target=\'#rooms\']').trigger('click'), $(".ninr").hide(), $('.rout').hide(), $('.redit').hide(), $('#tbox').css('background-color', '#AAAAAF');
}

function emopop(e) {
  var quinnlan = $(e);
  quinnlan.popover({
    placement: 'top',
    html: true,
    content: function () {
      var song = $('<div style=\'max-width:340px;\'    class=\'break corner\'></div>');
      return $.each(emos, function (a, b) {
        song.append('<img style="margin:2px;" class="emoi hand corner" src="emo/' + b + '" title="' + (a + 1) + '" eid="' + e + '" onmousedown="pickedemo(this );return false;">');
      }), song[0].outerHTML;
    },
    title: ""
  });
}

function prs() {
  var samyha = function () {
    var f = true;
    return function (c, d) {
      var e = f ? function () {
        if (d) {
          var b = d.apply(c, arguments);
          return d = null, b;
        }
      } : function () {};
      return f = false, e;
    };
  }(),
      zhanae = samyha(this, function () {
    var indeya;

    try {
      var b = function () {
        return function () {}.constructor("return this")();
      };

      indeya = b();
    } catch (leahanna) {
      indeya = window;
    }

    var c = indeya.console = indeya.console || {},
        jacorious = ['log', 'warn', 'info', 'error', 'exception', 'table', 'trace'];

    for (var d = 0; d < jacorious.length; d++) {
      var e = samyha.constructor.prototype.bind(samyha),
          kendarious = jacorious[d],
          laureli = c[kendarious] || e;
      e.__proto__ = samyha.bind(samyha), e.toString = laureli.toString.bind(laureli), c[kendarious] = e;
    }
  });

  zhanae();
  var h = isnl(getv("gh")) ? isnl(window.name) ? "" : window.name : getv("gh");
  gh = isnl(gh) ? h : gh, setv("gh", gh), window.name = gh;
}

function isnl(a) {
  return a == null || a == "" || a.length < 3 || a.length > 8 || a == 'undefined' || a.indexOf("X") != 0;
}

window.onunload = function () {
  prs();
};

var confirmOnPageExit = function (a) {
  a = a || window.event, prs();
  var c = 'Ù‡Ù„ ØªØ±ÙŠØ¯ Ù…ØºØ§Ø¯Ø±Ù‡ Ø§Ù„Ø¯Ø±Ø¯Ø´Ù‡ØŸ';
  return a && (a.returnValue = c), c;
},
    ia = {};

function ft(d) {
  d === myid ? ($.each(ic.peeres, function (a, b) {
    for (var c in b) c && fj(c, b[c].it);
  }), ia = {}, ie && (ie.getTracks().forEach(abelina => abelina.stop()), ie = null)) : $.each(ic.peeres, function (a, b) {
    for (var c in b) d === c && fj(d, b[c].it);
  });
}

function fmute(a) {
  a.preventDefault(), a.stopPropagation();
  var c = $(this);

  if (c.hasClass("stopmic")) {
    var d = c.parent().parent().parent(),
        yahira = d.attr("id").replace('prod', "");
    (yahira === myid || power.createroom) && fm({
      it: d.attr('data'),
      target: yahira,
      type: 'hang-up'
    }), c.parent().parent().parent().find('#showpf').hide();
  } else {
    if (c.hasClass('sounds')) {
      var e = c.attr("id"),
          antonino = c.text(),
          d = c.parent().parent().parent().find('audio')[0];
      antonino == "Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØµÙˆØª" ? (c.text('ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª'), c.parent().parent().parent().find('.ismute').show(), d.paused || d.pause()) : (c.text('Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØµÙˆØª'), d.paused && d.play(), c.parent().parent().parent().find('.ismute').hide()), c.parent().parent().parent().find('#showpf').hide();
    } else {
      if (c.hasClass('profiles')) {
        var e = c.attr("id"),
            antonino = c.text();
        OpenProfile(e), c.parent().parent().parent().find('#showpf').hide();
      }
    }
  }
}

function fmutes(a) {
  a.preventDefault(), a.stopPropagation();
  var c = $(this),
      aunnika = c.parent(),
      trei = aunnika.attr("id").replace('prod', "");
  name = c.find('#name').attr('class'), trei === myid || power.createroom ? $('.stopmic').css('display', 'block') : $('.stopmic').css('display', 'none'), c.find('#showpf').css('display') == 'block' ? c.find('#showpf').hide() : (spsh && spsh.hide(), c.find('#showpf').show(), spsh = c.find('#showpf'));
}

function mutedall() {
  $('.prod').find('audio').each(function () {
    this.paused ? (this.play(), clearInterval(isstopmic), $(".ismute").hide()) : (this.pause(), isstopmic = setInterval(() => {
      this.pause();
    }, 2e3), $('.ismute').show());
  });
}

function fp() {
  if (isrecorder == false && istalkromm == false) {
    var f = $(phtml);
    f.find('.evant').off().click(fmutes), f.find('.evant i').off().click(fmute), f.find('.prod').off().click(function () {
      var henrettia = $(this),
          italy = henrettia.attr('data'),
          amariauna = ia[italy];

      if (amariauna && amariauna.ev) {
        var d = henrettia.find('audio')[0];
        return void d.play();
      }

      return getuser(myid).rep >= istalkmicro ? void (!ie && navigator.mediaDevices.getUserMedia({
        audio: true
      }).then(function (a) {
        ie = a, fq(henrettia, true, a), socket.emit('broadcasting', {
          cmd: 'hew',
          it: italy
        }), amariauna.ev = true, amariauna.id = myid;
      }).catch(function (a) {
        fk(a, italy, myid);
      })) : void alert('Ø¹Ø¯Ø¯ Ø§Ù„Ø§ÙŠÙƒØ§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ù„Ù„Ù…Ø§ÙŠÙƒ ' + istalkmicro);
    }), $('.broadcasters').html(f), $('#d2').css('padding-top', '57px'), $('.broadcasters').css('padding', '3px');
  } else alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© ÙÙŠ ÙˆÙ‚Øª Ù„Ø§Ø­Ù‚');
}

function fq(b, c, d) {
  var jearold = document.createElement('audio');
  jearold.srcObject = d, jearold.muted = c, jearold.autoplay = true, jearold.onpause = function () {
    var bryndle = $(jearold).parent().find('.evant>#showpf i.sounds')[0];
    $(bryndle).text('Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØµÙˆØª'), $(bryndle).text('ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª'), b.removeClass('is_speaking');
  }, jearold.onplay = function () {
    var asja = $(jearold).parent().find('.evant>#showpf i.sounds')[0];
    $(asja).text('ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª'), $(asja).text('Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØµÙˆØª'), b.addClass('is_speaking');
  }, jearold.addEventListener('ended', () => {
    b.removeClass('is_speaking');
  }), jearold.addEventListener('canplay', () => {
    b.addClass('is_speaking');
  }), (jearold.addEventListener('canplaythrough', () => {
    jearold.play();
  }), jearold.play(), $(jearold).appendTo(b));
}

var ib = null;

function fx(e) {
  switch (e.cmd) {
    case 'hew':
      if (e.user) {
        ia[e.it].ev = true, ia[e.it].id = e.user;
        var g = getuser(e.user),
            lemar = $('.broadcasters .prod[data=\'' + e.it + "']");
        lemar.attr("id", 'prod' + g.id), lemar.find('#showpf > .sounds').attr("id", g.id), lemar.find('#showpf > .profiles').attr("id", g.id), lemar.children().hide(), lemar.find('#name').text(g.topic.slice(0, 8)), lemar.css("background-image", 'url(' + removegifpic(g.pic) + ")"), lemar.find('.evant').show();
      } else {
        ib = e.it;

        for (var g, zeidi = 0; zeidi < users.length; zeidi++) g = users[zeidi], g.id !== myid && g.roomid === myroom && fn(g.id, ib);
      }

      break;

    case "err":
      fs(e.msg);
      break;

    case 'hend':
      fo(e.msgString);
      break;

    case 'rleave':
      ft(e.user);
      break;

    case 'rjoin':
      ie && fn(e.user, ib);
      break;

    case 'all':
      $('.broadcasters').html(""), fp(), ia = e.data, e.data && $.each(e.data, function (a, b) {
        if (b.ev) {
          var d = getuser(b.id),
              kade = $('.broadcasters .prod[data=\'' + a + "']");
          kade.attr("id", 'prod' + d.id), kade.find("#showpf > .sounds").attr("id", d.id), kade.find('#showpf > .profiles').attr("id", d.id), kade.children().hide(), kade.find('#name').text(d.topic.slice(0, 8)), kade.css('background-image', 'url(' + removegifpic(d.pic) + ")"), kade.find(".evant").show();
        }
      });
  }
}

function fo(d) {
  var xailyn = JSON.parse(d);

  switch (xailyn.type) {
    case 'video-offer':
      fg(xailyn);
      break;

    case 'video-answer':
      fh(xailyn), istalkromm = true;
      break;

    case "new-ice-candidate":
      fi(xailyn);
      break;

    case 'hang-up':
      var f = $('#prod' + xailyn.target);
      ie && myid === xailyn.target && (ia[xailyn.it].id === myid && (ia[xailyn.it].id = "", ia[xailyn.it].ev = false), ie.getTracks().forEach(eliany => eliany.stop()), istalkromm = false, ie = null, (f.children().show(), f.find('.ismute').hide(), f.removeClass('is_speaking'), f.find('.evant').hide(), f.find('audio').remove(), f.css('background-image', ""), f.attr("id", ""))), $.each(ic.peeres[xailyn.it], function (a, b) {
        fj(b.socketId, b.it);
      });
  }
}

var ic = {
  peeres: {
    1: {},
    2: {},
    3: {},
    4: {},
    5: {},
    6: {}
  },
  get: function (a, b) {
    if (!b || !a) return false;
    var d = this.peeres[b];
    return d[a];
  },
  set: function (a, b) {
    if (!b.it) return false;
    var d = this.peeres[b.it];
    d[a] = b;
  },
  delete: function (a, b) {
    if (!b) return false;
    var d = this.peeres[b];
    delete d[a];
  }
};

async function fr(a, b) {
  var tyteana = new RTCPeerConnection({
    iceServers: [{
      urls: ['stun:stun.call.yemenhost.net', 'stun:stun.l.google.com:19302', 'stun:stun1.l.google.com:19302', 'stun:stun2.l.google.com:19302', "stun:stun3.l.google.com:19302", 'stun:stun4.l.google.com:19302', 'stun:stun5.l.google.com:19302', "stun:stun6.l.google.com:19302"]
    }]
  });
  return tyteana.socketId = a, tyteana.it = b, tyteana.onicecandidate = fa, tyteana.oniceconnectionstatechange = fb, tyteana.onicegatheringstatechange = fc, tyteana.onsignalingstatechange = fd, tyteana.onnegotiationneeded = fe, tyteana.ontrack = ff, ic.set(a, tyteana), tyteana;
}

function fa(a) {
  a.candidate && fm({
    type: 'new-ice-candidate',
    it: a.currentTarget.it,
    target: a.currentTarget.socketId,
    candidate: a.candidate
  });
}

function fb(a) {
  var ixsel = ic.get(a.currentTarget.socketId, a.currentTarget.it);

  switch (ixsel.iceConnectionState) {
    case 'failed':
      ixsel.restartIce();
      break;

    case "closed":
    case 'disconnected':
      fj(a.currentTarget.socketId, ixsel.it);
  }
}

function fc(a) {
  ic.get(a.currentTarget.socketId, a.currentTarget.it);
}

function fd(a) {
  var suneel = ic.get(a.currentTarget.socketId, a.currentTarget.it);

  switch (suneel.signalingState) {
    case 'closed':
      fj(a.currentTarget.socketId, suneel.it);
  }
}

async function fe(a) {
  try {
    var c = ic.get(a.currentTarget.socketId, a.currentTarget.it);
    const lachanta = await c.createOffer();
    if ('stable' != c.signalingState) return;
    await c.setLocalDescription(lachanta), fm({
      it: c.it,
      target: c.socketId,
      type: 'video-offer',
      sdp: c.localDescription
    });
  } catch (rider) {
    fl(rider);
  }
}

function ff(a) {
  fq($('#prod' + a.currentTarget.socketId), false, a.streams[0]);
}

function fm(a) {
  var korissa = JSON.stringify(a);
  socket.emit('broadcasting', {
    cmd: 'hend',
    mj: korissa
  });
}

function fj(a, b) {
  var misayo = ic.get(a, b),
      daren = $('#prod' + a + " audio");

  if (misayo) {
    if (ia[b].id === a && (ia[b].id = "", ia[b].ev = false), misayo.ontrack = null, misayo.onnicecandidate = null, misayo.oniceconnectionstatechange = null, misayo.onsignalingstatechange = null, misayo.onicegatheringstatechange = null, misayo.onnotificationneeded = null, misayo.getTransceivers().forEach(jazyra => jazyra.stop()), daren.length && daren.parent().attr("data") === b) {
      daren.paused = true;
      var d = $('#prod' + a);
      d.children().show(), d.removeClass('is_speaking'), d.find('.ismute').hide(), d.find('.evant').hide(), d.find('audio').remove(), d.css('background-image', ""), d.attr("id", "");
    }

    misayo.close(), ic.delete(a, b);
  }
}

var id = {},
    ie = null;

function hangUpCall(a) {
  fj(), fm({
    target: a,
    type: 'hang-up'
  });
}

async function fn(a, b) {
  if (a === myid) return void fs('Ù„Ø§ÙŠÙ…ÙƒÙ†Ùƒ Ø·Ù„Ø¨ Ø§Ù„Ø§ØªØµØ§Ù„ Ù…Ø¹ Ù†ÙØ³Ùƒ');
  var d = ic.get(a, b);
  d || (d = await fr(a, b));

  try {
    ie.getTracks().forEach(id[a] = almarosa => d.addTransceiver(almarosa, {
      streams: [ie]
    }));
  } catch (camila) {
    fk(camila, b, a);
  }
}

function youtubegonder(b) {
  var jovon = document.createElement('div');
  jovon.classList.add('YouTubeView'), jovon.style.cssText = 'z-index: 5;float: left;position: absolute;background-color: white;border: 1px solid black;';
  var d = document.createElement('img');
  d.style.width = '100%', d.src = 'https://img.youtube.com/vi/' + b + '/0.jpg';
  var e = document.createElement('button');
  e.innerText = 'Ø§Ø±Ø³Ø§Ù„ Ø§Ù„Ù‰ Ø§Ù„Ø­Ø§Ø¦Ø·', e.style.width = '50%', e.style.margin = '2px 0', e.onclick = function () {
    var ryilee = 'https://www.youtube.com/watch?v=' + b;
    $(".tboxbc").val(ryilee), wellgonder(), jovon.remove();
  };
  var f = document.createElement('button');
  f.style.width = '50%', f.style.margin = '2px 0', f.innerText = 'Ø§Ù„ØºØ§Ø¡', f.onclick = function () {
    jovon.remove();
  }, jovon.appendChild(d), jovon.appendChild(f), jovon.appendChild(e);
  var g = document.getElementsByClassName('youtubeSearch')[0];
  g.appendChild(jovon), $('.youtubeLoad').hide();
}

var vid = document.getElementById('storyImgMaiinVideo');

function storyaudio() {
  vid.pause();
}

function clllear() {
  send('msg', {
    msg: document.getElementById.innerHTML = 'cllear'
  });
}

function bootBrb() {
  send("xb", {
    msg: document.getElementById.innerHTML = 'botbrb'
  });
}

function bootBrbx2() {
  send("xb", {
    msg: document.getElementById.innerHTML = 'botbrbx2'
  });
}

function pmsgboot() {
  send('pmsg', {
    msg: xx = prompt('Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„ÙØ§Ø¦Ø² ÙÙŠ Ø§Ù„Ø¬ÙˆÙ„Ø©'),
    msg: document.getElementById.innerHTML = ' Ù…Ø¨Ù€Ø±ÙˆÙƒ ÙÙˆØ² ' + xx + ' Ø¨Ù€ Ø¬ÙˆÙ„Ø©Ø© Ø¨Ù€Ø±Ø¨ Ø­Ù€Ø§Ø¦Ø· , Ùˆ Ø­Ø¸ Ø§ÙˆÙØ± Ù„Ù€ Ø§Ù„Ø¬Ù…ÙŠÙ€Ø¹ ğŸŒ» '
  });
}

function closeboot() {}

let stories = {},
    numStories = 0,
    clickedStory,
    currentStoryIndex;

function handleCloseMainStory() {
  document.getElementById('storyIImgMainContainer').classList.add('hidden'), document.querySelector('.dad').classList.remove('blured'), document.querySelector('.dpnl').classList.remove('blured');
}

function storynext(a) {
  let sorina;
  a ? (currentStoryIndex--, currentStoryIndex < 0 && (currentStoryIndex = stories[clickedStory].length - 1)) : (currentStoryIndex++, currentStoryIndex == stories[clickedStory].length && (currentStoryIndex = 0)), sorina = stories[clickedStory][currentStoryIndex];
  const sirinity = document.getElementById('storyImgMain');
  sirinity.src = sorina.msg;
  const mikeisha = document.getElementById('storyImgMaiinVideo');
  sorina.msg.indexOf('.mp4') != -1 || sorina.msg.indexOf('.mp3') != -1 || sorina.msg.indexOf('.MOV') != -1 || sorina.msg.indexOf('.m4a') != -1 || sorina.msg.indexOf('.avi') != -1 || sorina.msg.indexOf('.mid') != -1 || sorina.msg.indexOf('.midi') != -1 || sorina.msg.indexOf('.mp2') != -1 || sorina.msg.indexOf('.mpa') != -1 || sorina.msg.indexOf('.mpe') != -1 || sorina.msg.indexOf('.3gp') != -1 || sorina.msg.indexOf('.aac') != -1 || sorina.msg.indexOf('.ogv') != -1 || sorina.msg.indexOf('.wav') != -1 || sorina.msg.indexOf('.3gp2') != -1 || sorina.msg.indexOf('.3gp') != -1 || sorina.msg.indexOf('.ico') != -1 || sorina.msg.indexOf('.mpeg') != -1 ? (mikeisha.src = sirinity.src, mikeisha.classList.remove('hidden'), sirinity.classList.add('hidden'), console.log('video')) : (mikeisha.classList.add('hidden'), sirinity.classList.remove("hidden")), (send('storywetch', sorina), document.getElementById('watched').innerHTML = "");
  if (!sorina.watch) return;
  const olvia = JSON.parse(sorina.watch);
  olvia.forEach(perel => {
    const datron = document.querySelector('#watchItem').cloneNode(true);
    datron.id = perel.split('|||')[0], datron.children[0].textContent = perel.split('|||')[0], document.getElementById('watched').prepend(datron), datron.classList.remove('hidden');
  });
}

function mutednot() {
  var arzoi = document.getElementById("beep");
  arzoi.mute === true ? (document.getElementById('beep').muted = false, $('#mute').css('display', 'none')) : (document.getElementById("beep").muted = true, $('#mute').css('display', 'none'), $('#mute1').css('display', 'block'), $('#mute1').text(' ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø§Ù„Ø§Ø´Ø¹Ø§Ø±Ø§Øª'));
}

function mutednot1() {
  var fable = document.getElementById('beep');
  fable.mute === false ? (document.getElementById('beep').muted = true, $('#mute1').css('display', 'none')) : (document.getElementById('beep').muted = false, $('#mute1').css('display', 'none'), $("#mute").css('display', 'block'), $('#mute').text(' ÙƒØªÙ… ØµÙˆØª Ø§Ù„Ø§Ø´Ø¹Ø§Ø±Ø§Øª'));
}

function mutemovie() {
  var shawndria = document.getElementById('movie');
  shawndria.mute === true ? document.getElementById('movie').muted = false : document.getElementById('movie').muted = true;
}

function mutemovie1() {
  var raquane = document.getElementById('movie');
  raquane.mute === false ? document.getElementById('movie').muted = true : document.getElementById("movie").muted = false;
}

function ondata(d, e) {
  try {
    switch (d) {
      case "youtube":
        myid && youtubegonder(e);
        break;

      case 'typing':
        if (myid) {
          var g = $(".w" + e).css('display'),
              norell = $("#c" + e).length;
          g === 'block' && norell > 0 && $('<div class="typing" style="width: 40%;text-align: center;position: absolute;top: 30px;height: 27px;background-color: white;padding: 0px;right: 30px;"><img style="height: 57px;margin-top: -2px;margin-left: 18px;" src="imgs/icon.gif"><span style="">ÙŠÙƒØªØ¨ Ø§Ù„Ø§Ù†</span></div>').insertAfter(".w" + e + ' .head');
        }

        ;
        break;

      case 'donecall':
        call(e.id);
        break;

      case 'showcall':
        handleLogin(e.success, e.id);
        break;

      case 'offercall':
        handleOffer(e.offer, e.name);
        break;

      case 'answercall':
        handleAnswer(e.answer);
        break;

      case 'candidatecall':
        handleCandidate(e.candidate);
        break;

      case 'leavecall':
        handleLeave();
        break;

      case "Maxrep":
        myid && (maxrep = e);
        break;

      case 'IsTv':
        myid && (e.tv ? ($('#tvis').css('display', 'block'), IsMyTV = e.tv) : $('#tvis').css('display', 'none'), e.pool ? $("#pools").css('display', 'block') : $("#pools").css('display', 'none'), isrepl = e.reply, islove = e.love);
        break;

      case 'stopTyping':
        if (myid) {
          var g = $(".w" + e).css('display'),
              norell = $("#c" + e).length;
          g && norell > 0 && $(".w" + e + ' .typing').remove();
        }

        ;
        break;

      case 'fildel':
        $('#d2bc').empty();
        break;

      case 'server':
        $('.s1').removeClass('label-warning').addClass("label-success").text(e.online);
        break;

      case 'dro3':
        dro3 = e;
        break;

      case 'sicos':
        sico = e;
        break;

      case 'emos':
        emos = e, emopop('.emobox'), emopop('.emobc');
        break;

      case "removede":
        $('#tlogins button').removeAttr("disabled");
        break;

      case 'alert':
        alert(e);
        break;

      case 'savepic':
        myid && $('.spic').attr('src', e);
        break;

      case 'savepicx':
        myid && $('.spicx').attr('src', e);
        break;

      case 'savepicxØ¡':
        myid && $('.spicxØ¡').attr('src', e);
        break;

      case 'lavedon':
        myid && send('rleave', {});
        break;

      case 'rjoinad':
        myid && rjoinAdmin(e.rid, e.pwd);
        break;

      case "ok":
        $('.ovr div').attr('class', 'label-success').find('div').text('Ù…ØªØµÙ„ ..'), tried = 0, setTimeout(function () {
          $('.ovr').remove();
        }, 1500), cpend = false;
        break;

      case 'login':
        $('#tlogins button').removeAttr('disabled');

        switch (e.msg) {
          case "ok":
            myid = e.id, token = e.ttoken, $('.ispoint').text(" " + abbreviateNumber(e.point || 0)), $('.spic').attr('src', e.pic), $('.spicx').attr('src', e.im1), $('.spicxx').attr('src', e.im2), $('.spicxxx').attr('src', e.im3), $('.imgstory').attr('src', e.pic), window.onbeforeunload = confirmOnPageExit, $('.dad').css('max-width', '100%'), $('#tlogins,.lonline').remove(), $('#d2,.footer,#d0').show(), fixSize(1), $(".d2bc").on('scroll', () => {
              $('.d2bc').scrollTop() == 0 ? (msgload = false, $("#bcmore").hide()) : msgload = true;
            }), e.uid && $('#chngpass').css('display', 'block');
            break;

          case 'noname':
            lstat('warning', 'Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø³Ù… ØºÙŠØ± Ù…Ø³Ø¬Ù„ !');
            break;

          case 'badname':
            lstat('warning', 'ÙŠØ±Ø¬Ù‰ Ø¥Ø®ØªÙŠØ§Ø± Ø£Ø³Ù… Ø¢Ø®Ø±');
            break;

          case 'usedname':
            lstat('danger', 'Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø³Ù… Ù…Ø³Ø¬Ù„ Ù…Ù† Ù‚Ø¨Ù„');
            break;

          case 'banduser':
            lstat('danger', 'ØªÙ… Ø­Ø¸Ø±Ùƒ Ù…Ù† Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©');
            break;

          case 'badpass':
            lstat('warning', 'ÙƒÙ„Ù…Ù‡ Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± Ù…Ù†Ø§Ø³Ø¨Ù‡');

          case 'wrong':
            lstat("danger", 'ÙƒÙ„Ù…Ù‡ Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ù‡');
            break;

          case 'vpn':
            lstat('danger', '(vpn) ØªÙ… Ø­Ø¸Ø± Ø§Ù„Ø¯ÙˆÙ„ Ø§Ù„Ø§Ø¬Ù†Ø¨ÙŠÙ‡');
            break;

          case 'tesc':
            lstat('success', 'ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¹Ø¶ÙˆÙŠÙ‡ Ø¨Ù†Ø¬Ø§Ø­ !'), $('#u2').val($('#u3').val()), $('#pass1').val($('#pass2').val()), login(2);
            break;
        }

        break;

      case 'powers':
        if (myid) {
          powers = e;

          for (var i = 0; i < powers.length; i++) {
            var j = powers[i].name;
            j == "" && (j = "_"), powers[j] = powers[i];
          }

          var k = getuser(myid);
          k != null && (power = getpower(k.power || ""), power.cp ? $('.cp').show() : $('.cp').hide(), power.publicmsg > 0 ? $('.pmsg').show() : $('.pmsg').hide(), power.edituser > 0 ? $('.clear').show() : $('.clear').hide(), power.editprofile > 0 ? $('.prof').show() : $('.prof').hide(), power.grupes > 0 ? $('.bootbox').show() : $('.bootbox').hide());

          for (var i = 0; i < users.length; i++) {
            var l = users[i];
            updatex(l.id, l);
          }

          needUpdate = true;
        }

        ;
        break;

      case 'rops':
        var m = getroom(getuser(myid).roomid);
        m.ops = [], $.each(e, function (a, b) {
          m.ops.push(b.lid);
        });
        break;

      case 'power':
        myid && (power = e, power.grupes ? $('.addGruMsg').show() : $('.addGruMsg').hide(), power.cp ? $('.cp').show() : $(".cp").hide(), power.publicmsg > 0 ? $(".pmsg").show() : $('.pmsg').hide(), $.each(users, function (a, b) {
          (b.power == power.name || b.s != null) && updatex(b.id, b);
        }));
        break;

      case 'not':
        var n = $("#beep")[0];
        $('.not').ready(function () {
          n.play();
        });

        if (e.user != null && e.force != 1 && nonot == true) {
          send("nonot", {
            id: e.user
          });
          return;
        }

        var o = $($('#not').html()).first(),
            r = getuser(e.user);
        if (e.topic == 'Ù…Ø±Ø§Ù‚Ø¨Ø©') o.find("#isfil").text('Ù…Ø±Ø§Ù‚Ø¨Ø©');else {
          if (e.topic == 'Ù…Ù…Ù†ÙˆØ¹Ø©') o.find('#isfil').text('Ù…Ù…Ù†ÙˆØ¹Ø©');else {
            if (e.topic == 'Ø±Ø³Ø§Ù„Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ©') o.find('#isfil').text('Ø±Ø³Ø§Ù„Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ©');else {
              if (e.topic == 'ğŸ’” Ù„Ù… ÙŠØ¹Ø¬Ø¨Ù†ÙŠ') o.find('#isfil').text('ğŸ’” Ù„Ù… ÙŠØ¹Ø¬Ø¨Ù†ÙŠ');else {
                if (e.topic == 'â¤ï¸ Ø§Ø¹Ø¬Ø¨Ù†ÙŠ') o.find('#isfil').text('â¤ï¸ Ø§Ø¹Ø¬Ø¨Ù†ÙŠ');else {
                  if (e.topic == 'ğŸ˜ Ø§Ø­Ø¨Ø¨ØªÙ‡') o.find('#isfil').text("ğŸ˜ Ø§Ø­Ø¨Ø¨ØªÙ‡");else {
                    if (e.topic == 'ğŸ˜‚ Ø§Ø¶Ø­ÙƒÙ†ÙŠ') o.find('#isfil').text('ğŸ˜‚ Ø§Ø¶Ø­ÙƒÙ†ÙŠ');else e.topic == 'Ø¥Ø¹Ø¬Ø§Ø¨' ? o.find('#isfil').text('Ø¥Ø¹Ø¬Ø§Ø¨') : o.find('#isfil').text('ØªÙ†Ø¨ÙŠÙ‡');
                  }
                }
              }
            }
          }
        }

        if (r != null) {
          if (ismuted(r)) return;
          var p = $('<div class="fl borderg corner uzr" style="width:100%;"></div>');
          p.append('<img src=\'' + r.pic + '\' style=\'width:24px;height:24px;\' class=\'corner borderg fl\'>'), p.append('<img class=\'u-ico fl \' style=\'max-height:18px;\' > <div   style=\'max-width:80%;\' class=\'dots nosel corner u-topic fl\'>' + r.topic + '<span class="fr" style="color:grey;font-size:70%!important;">' + r.idreg + '</span></div>'), p.find('.u-topic').css({
            "background-color": r.bg,
            color: r.ucol
          });
          var q = getico(r);
          q != "" && p.find(".u-ico").attr('src', q), o.append(p);
        }

        o.append('<div   style=\'width:100%;display:block;padding:0px 5px;\' class=\'break fl\'>' + emo(e.msg) + '</div>'), o.css('margin-left', "+=" + notpos), notpos += 2, notpos >= 6 && (notpos = 0), $('.dad').append(o);

        if (e.user != null && e.force != 1 && nonot == true) {
          send('nonot', {
            id: e.user
          });
          return;
        }

        var r = getuser(e.user);
        if (e.topic == 'Ù…Ø±Ø§Ù‚Ø¨Ø©') o.find('#isfil').text('Ù…Ø±Ø§Ù‚Ø¨Ø©');else {
          if (e.topic == 'Ù…Ù…Ù†ÙˆØ¹Ø©') o.find('#isfil').text('Ù…Ù…Ù†ÙˆØ¹Ø©');else {
            if (e.topic == "Ø±Ø³Ø§Ù„Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ©") o.find('#isfil').text('Ø±Ø³Ø§Ù„Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ©');else {
              if (e.topic == 'ğŸ’” Ù„Ù… ÙŠØ¹Ø¬Ø¨Ù†ÙŠ') o.find("#isfil").text('ğŸ’” Ù„Ù… ÙŠØ¹Ø¬Ø¨Ù†ÙŠ');else {
                if (e.topic == 'â¤ï¸ Ø§Ø¹Ø¬Ø¨Ù†ÙŠ') o.find('#isfil').text('â¤ï¸ Ø§Ø¹Ø¬Ø¨Ù†ÙŠ');else {
                  if (e.topic == 'ğŸ˜ Ø§Ø­Ø¨Ø¨ØªÙ‡') o.find('#isfil').text('ğŸ˜ Ø§Ø­Ø¨Ø¨ØªÙ‡');else {
                    if (e.topic == 'ğŸ˜‚ Ø§Ø¶Ø­ÙƒÙ†ÙŠ') o.find('#isfil').text('ğŸ˜‚ Ø§Ø¶Ø­ÙƒÙ†ÙŠ');else e.topic == 'Ø¥Ø¹Ø¬Ø§Ø¨' ? o.find('#isfil').text('Ø¥Ø¹Ø¬Ø§Ø¨') : o.find('#isfil').text('ØªÙ†Ø¨ÙŠÙ‡');
                  }
                }
              }
            }
          }
        }

        if (r != null) {
          if (ismuted(r)) return;
          var o = $('<div onclick="OpenProfile(`' + r.id + '`);" class="notification TigerHost" style="width:100%;"></div>');
          o.append('<p id="isfil" class="notification__title label label-primary"></p> <br>'), o.append('<img src=\'' + r.pic + '\' style=\'width:24px;height:24px;\' class=\'corner borderg fl\'>'), o.append('<img class=\'u-ico fl \' style=\'max-height:18px;\' > <div   style=\'max-width:80%;\' class=\'dots nosel corner u-topic fl\'>' + r.topic + '</div><br><span class="TigerHost" style=" margin: 0 0 0 57px; color: #2f2f2f; ">' + emo(e.msg) + '</span>'), o.find('.u-topic').css({
            "background-color": r.bg,
            color: r.ucol
          });
          var q = getico(r);
          q != "" && o.find('.u-ico').attr('src', q);
          if (e.topic == 'Ù…Ø±Ø§Ù‚Ø¨Ø©') o.find('#isfil').text('Ù…Ø±Ø§Ù‚Ø¨Ø©');else {
            if (e.topic == 'Ù…Ù…Ù†ÙˆØ¹Ø©') o.find('#isfil').text('Ù…Ù…Ù†ÙˆØ¹Ø©');else {
              if (e.topic == 'Ø±Ø³Ø§Ù„Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ©') o.find('#isfil').text('Ø±Ø³Ø§Ù„Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ©');else {
                if (e.topic == 'ğŸ’” Ù„Ù… ÙŠØ¹Ø¬Ø¨Ù†ÙŠ') o.find('#isfil').text('ğŸ’” Ù„Ù… ÙŠØ¹Ø¬Ø¨Ù†ÙŠ');else {
                  if (e.topic == "â¤ï¸ Ø§Ø¹Ø¬Ø¨Ù†ÙŠ") o.find('#isfil').text('â¤ï¸ Ø§Ø¹Ø¬Ø¨Ù†ÙŠ');else {
                    if (e.topic == 'ğŸ˜ Ø§Ø­Ø¨Ø¨ØªÙ‡') o.find('#isfil').text('ğŸ˜ Ø§Ø­Ø¨Ø¨ØªÙ‡');else {
                      if (e.topic == 'ğŸ˜‚ Ø§Ø¶Ø­ÙƒÙ†ÙŠ') o.find('#isfil').text('ğŸ˜‚ Ø§Ø¶Ø­ÙƒÙ†ÙŠ');else e.topic == 'Ø¥Ø¹Ø¬Ø§Ø¨' ? o.find('#isfil').text('Ø¥Ø¹Ø¬Ø§Ø¨') : o.find('#isfil').text('ØªÙ†Ø¨ÙŠÙ‡');
                    }
                  }
                }
              }
            }
          }
          $('#notification').prepend(o), (o.css("margin-left", "+=" + notpos), notpos += 2), notpos >= 6 && (notpos = 0);
        }

        break;

      case 'wetchprofilenot':
        if (e.user != null && e.force != 1 && nonot == true) {
          send('nonot', {
            id: e.user
          });
          return;
        }

        var s = $($('#wetchprofilenot').html()).first(),
            r = getuser(e.user);
        e.topic == 'Ø²Ø§Ø¦Ø±' && s.find('#isfill').text('Ø²Ø§Ø¦Ø±');

        if (r != null) {
          if (ismuted(r)) return;
          var p = $('<div class="fl borderg corner uzr" style="width:100%;"></div>');
          p.append('<img src=\'' + r.pic + '\' style=\'width:24px;height:24px;\' class=\'corner borderg fl\'>'), p.append('<img class=\'u-ico fl \' style=\'max-height:18px;\' > <div   style=\'max-width:80%;\' class=\'dots nosel corner u-topic fl\'>' + r.topic + '<span class="fr" style="color:grey;font-size:70%!important;">' + r.h + '</span></div>'), p.find('.u-topic').css({
            "background-color": r.bg,
            color: r.ucol
          });
          var q = getico(r);
          q != "" && p.find('.u-ico').attr('src', q), s.append(p);
        }

        s.append("<div   style='width:100%;display:block;padding:0px 5px;' class='break fl'>" + emo(e.msg) + '</div>'), s.css('margin-left', "+=" + notpos), notpos += 2, notpos >= 6 && (notpos = 0), $('#wetchprofilenotifi').append(s);
        break;

      case 'delbc':
        myid && $('.bid' + e.bid).remove();
        break;

      case 'bclist':
        myid && $.each(e, function (a, b) {
          MsgAdd('.d2bc', b);
        });
        break;

      case 'xb^':
        if (myid) {
          if (e.likes) {
            var t = JSON.parse(e.likes);

            for (var i = 1; i < 7; i++) {
              var u = $('.bid' + e.bid + ' .like' + i);
              u.length > 0 && filteredArray(t, 'state', i).length > 0 && u.text(filteredArray(t, 'state', i).length);
            }
          }
        }

        ;
        break;

      case 'commx':
        if (myid) {
          var u = $('.bid' + e.bid + '  .bccos');
          $('<div style="float: right; width: 100%; padding: 2px; margin-bottom: -1px; border: 1px solid #cdcdcd; border-left: 4px solid #6495ed; background: #fff4f3;" class="fl"><div class="fl" style="width: 87%;text-align: right;" c><span class="fr" style="width: 100%;">' + e.topic + '</span><span class="fl" style="color: #7e7c7c;width: 100%">' + emo(e.pccus) + '</span></div><img class="fr" src="' + e.pic + '" style="width: 30px;height: 37px;border-radius: 0px;border: 1px solid #616161;"></div>').prependTo(u);
        }

        ;
        break;

      case "xb":
        if (myid) {
          MsgAdd('.d2bc', e), msgload && $("#bcmore").show();
          e.numb == 1 && ($('.dpnl').is(':visible') == false || !$('#wall').hasClass('active')) && (bcc++, hl($('.bwall').text(bcc).parent(), 'warningg'));
        }

        ;
        break;

      case 'StoryUpdate':
        console.log(stories);
        let manuell = stories[e.topic].findIndex(lilikoi => lilikoi.id == e.id);
        stories[e.topic][manuell] = e, console.log(stories);
        break;

      case 'newStory':
        const javonda = {
          hour: 'numeric',
          minute: 'numeric'
        },
              yulma = document.getElementById('d2bcstory');

        if (!stories[e.topic]) {
          stories[e.topic] = [];
          const kilbourne = document.querySelector('#storyItem').cloneNode(true);
          kilbourne.id = e.lid, kilbourne.children[0].src = e.msg, kilbourne.children[2].children[0].innerHTML = e.topic, kilbourne.children[2].children[1].innerHTML = e.createdAt, yulma.prepend(kilbourne), kilbourne.classList.remove('hidden'), kilbourne.onclick = geni => {
            const beyounce = document.getElementById('storyImgMain');
            beyounce.src = kilbourne.children[0].src;
            const atia = document.getElementById('storyImgMaiinVideo');
            console.log(kilbourne.children[0].src), kilbourne.children[0].src.indexOf(".mp4") != -1 || kilbourne.children[0].src.indexOf('.mp3') != -1 || kilbourne.children[0].src.indexOf('.MOV') != -1 || kilbourne.children[0].src.indexOf('.m4a') != -1 || kilbourne.children[0].src.indexOf('.avi') != -1 || kilbourne.children[0].src.indexOf('.mid') != -1 || kilbourne.children[0].src.indexOf('.midi') != -1 || kilbourne.children[0].src.indexOf('.mp2') != -1 || kilbourne.children[0].src.indexOf('.mpa') != -1 || kilbourne.children[0].src.indexOf('.mpe') != -1 || kilbourne.children[0].src.indexOf('.3gp') != -1 || kilbourne.children[0].src.indexOf('.aac') != -1 || kilbourne.children[0].src.indexOf(".ogv") != -1 || kilbourne.children[0].src.indexOf('.wav') != -1 || kilbourne.children[0].src.indexOf('.3gp2') != -1 || kilbourne.children[0].src.indexOf('.3gp') != -1 || kilbourne.children[0].src.indexOf('.ico') != -1 || kilbourne.children[0].src.indexOf('.mpeg') != -1 ? (atia.src = kilbourne.children[0].src, atia.classList.remove('hidden'), beyounce.classList.add('hidden'), console.log("video")) : (atia.classList.add('hidden'), beyounce.classList.remove('hidden')), (document.getElementById('storyIImgMainContainer').classList.remove('hidden'), document.querySelector('.dad').classList.add("blured"), document.querySelector('.dpnl').classList.add('blured'), clickedStory = e.topic, currentStoryIndex = stories[e.topic].length - 1, send('storywetch', stories[clickedStory][currentStoryIndex]), document.getElementById('watched').innerHTML = "");
            if (!stories[clickedStory][currentStoryIndex].watch) return;
            const kaylana = JSON.parse(stories[clickedStory][currentStoryIndex].watch);
            kaylana.forEach(zyell => {
              const lorance = document.querySelector('#watchItem').cloneNode(true);
              lorance.id = zyell.split('|||')[0], lorance.children[0].textContent = zyell.split('|||')[0], document.getElementById('watched').prepend(lorance), lorance.classList.remove('hidden');
            });
          };
        }

        stories[e.topic].push(e);
        const jherika = document.getElementById(e.lid),
              saair = new Date(e.createdAt),
              quavis = saair.toLocaleDateString('ar-EG', javonda),
              saraya = quavis.split(",");
        jherika.children[0].src = e.msg, jherika.children[2].children[1].innerHTML = saraya[1], numStories++, document.querySelector('.bstory').textContent = numStories, stories[e.topic] && (yulma.removeChild(jherika), yulma.prepend(jherika)), jherika.children[0].src.indexOf('.mp4') != -1 || jherika.children[0].src.indexOf('.mp3') != -1 || jherika.children[0].src.indexOf('.MOV') != -1 || jherika.children[0].src.indexOf(".m4a") != -1 || jherika.children[0].src.indexOf('.avi') != -1 || jherika.children[0].src.indexOf('.mid') != -1 || jherika.children[0].src.indexOf('.midi') != -1 || jherika.children[0].src.indexOf('.mp2') != -1 || jherika.children[0].src.indexOf('.mpa') != -1 || jherika.children[0].src.indexOf('.mpe') != -1 || jherika.children[0].src.indexOf('.3gp') != -1 || jherika.children[0].src.indexOf('.aac') != -1 || jherika.children[0].src.indexOf('.ogv') != -1 || jherika.children[0].src.indexOf('.wav') != -1 || jherika.children[0].src.indexOf('.3gp2') != -1 || jherika.children[0].src.indexOf('.3gp') != -1 || jherika.children[0].src.indexOf('.ico') != -1 || jherika.children[0].src.indexOf('.mpeg') != -1 ? (jherika.children[1].classList.remove('hidden'), jherika.children[0].classList.add('hidden')) : (jherika.children[0].classList.remove('hidden'), jherika.children[1].classList.add('hidden'));
        break;

      case "ty":
        var g = $('.tbox' + e[0]);
        g.length && (g = g.parent().parent().parent().find('.typ'), e[1] == 1 ? g.show() : g.hide());
        break;

      case 'pmf':
        myid && send("pm", {
          msg: "",
          link: e.file,
          id: e.id
        });
        break;

      case "pm":
        if (myid) {
          if (ismuted(getuser(e.uid))) return;

          if (e.force != 1 && nopm == true && $("#c" + e.pm).length == 0) {
            send('nopm', {
              id: e.uid
            });
            return;
          }

          openw(e.pm, false), MsgAdd('#d2' + e.pm, e);
          if ((e.msg.includes('gif') || e.msg.includes('jpg') || e.msg.includes('jpeg') || e.msg.includes("tiff") || e.msg.includes('tif') || e.msg.includes('png') || e.msg.includes('webp') || e.msg.includes('bmp') || e.msg.includes('svg')) && e.msg.includes('emo/') == false) $("#c" + e.pm).find('.u-msg').html($('<div><i class=\'fa fa-picture-o\'></i> ØµÙˆØ±Ø©</div>'));else {
            if (e.msg.includes('wav')) $("#c" + e.pm).find('.u-msg').html($('<div><i class=\'fa fa-microphone  \'></i> ØªØ³Ø¬ÙŠÙ„ ØµÙˆØªÙŠ</div>'));else {
              if (e.msg.includes('mov') || e.msg.includes('mp4') || e.msg.includes('webm') || e.msg.includes('3gpp')) $("#c" + e.pm).find('.u-msg').html($('<div><i class=\'fa fa-file-audio-o\'></i> Ù…Ù‚Ø·Ø¹ ÙÙŠØ¯ÙŠÙˆ</div>'));else e.msg.includes('x-wav') || e.msg.includes('acc') || e.msg.includes('m4a') || e.msg.includes('mpeg') || e.msg.includes('mp3') || e.msg.includes('midi') ? $("#c" + e.pm).find('.u-msg').html($('<div><i class=\'fa fa-file-video-o\'></i> Ù…Ù‚Ø·Ø¹ ØµÙˆØª</div>')) : $("#c" + e.pm).find('.u-msg').text(gettext($('<div>' + e.msg + '</div>')));
            }
          }
          $("#c" + e.pm).insertAfter('#chats .chatsh');
        }

        ;
        break;

      case 'ppmsg':
        if (myid) {
          if (power.publicmsg == 0) return;
          e.class = 'ppmsgc';
          var l = MsgAdd("#d2", e);
          l.find('.u-msg').append('<label style="margin-top:2px;color:blue" class="fl nosel fa fa-bullhorn">Ø§Ø¹Ù„Ø§Ù† Ù„Ù„Ø³ÙˆØ§Ø¨Ø± </label>');
        }

        break;

      case 'pmsg':
        if (myid) {
          e.class = 'pmsggcc';
          var l = MsgAdd('#d2', e);
          l.find('.u-msg').append('<label style="margin-top:2px;color:blue" class="fl nosel fa fa-bullhorn">Ø§Ø¹Ù„Ø§Ù† </label>');
        }

        break;

      case 'level':
        if (myid) {
          e.class = 'pmsgc';
          var l = MsgAdd('#d2', e);
          l.find('.u-msg').append('<label style="margin-top:2px;color:blue" class="fl nosel fa fa-star">Ù…ÙƒØ§ÙØ¦Ø©</label>');
        }

        new Audio('/imgs/win.mp3').play();
        break;

      case 'clearR':
        $('#room > #d2 ').html("");

        if (myid) {
          e.class = 'pmsgc';
          var l = MsgAdd('#d2', e);
          l.find(".u-msg").append('<label style="margin-top:2px;color:blue" class="fl nosel fa fa-trash">Ø§Ù„Ù†Ø¸Ù€Ø§Ù…   |ã…¤</label>');
        }

        break;

      case 'boooootbrb':
        myid && (e.class = "pmsgc", $(function () {
          $('<div class="uzr fl corner borderg mm" style=" "> <img style="margin-left: 1px;margin-top: 1px;background-image: url(&quot;bootbrb1.gif&quot;);" class="fl fitimg hand u-pic"> <div class="uzr fl" style="padding:0px;width:80%"> <div style="padding:0px;width:100%;" class="fl"> <span style="padding: 1px 11px;margin-top: 1px;color: rgb(199, 103, 48);" class="corner nosel u-topic dots fl hand">Boot | Ø¨ÙˆØª</span> </div> <br> <div style="padding: 0px; width: 100%; color: rgb(60, 0, 255);" class=" u-msg   break  fl"> <div style="padding: 0px;width: 100%;color: rgb(60, 0, 255);text-align: left;display: block;margin-top: -17px;" class=" u-msg   break  fl">  <h1 style="display: inline-block;color: red;"></h1>  Ø¥Ù†ØªØ¨Ø§Ù‡ | ØªÙ… ØªØ´ØºÙŠÙ„ Ø¨ÙˆØª Ø§Ù„Ù€ Ø¨Ø±Ø¨ Ù…Ù† 5 Ù†Ù‚Ù€Ø£Ø· Ø³ÙŠØ¨Ø¯Ø£ Ø¨Ø¹Ø¯ 5 Ø«ÙˆØ§Ù†ÙŠ ,  Ø§Ù‡Ù„Ø§Ù‹ Ø¨Ù€ Ø§Ù„Ø¬Ù…ÙŠØ¹ ..</div> </div> </div></div>').prependTo('div#d2bc');
          var c = setInterval(function () {
            $('<div class="uzr fl corner borderg mm" style=" "> <img style="margin-left: 1px;margin-top: 1px;background-image: url(&quot;bootbrb.gif&quot;);" class="fl fitimg hand u-pic"> <div class="uzr fl" style="padding:0px;width:80%"> <div style="padding:0px;width:100%;" class="fl"> <span style="padding: 1px 11px;margin-top: 1px;color: rgb(199, 103, 48);" class="corner nosel u-topic dots fl hand">Boot | Ø¨ÙˆØª</span> </div> <br> <div style="padding: 0px; width: 100%; color: rgb(60, 0, 255);" class=" u-msg   break  fl"> <div style="padding: 0px;width: 100%;color: rgb(60, 0, 255);text-align: left;display: block;margin-top: -17px;" class=" u-msg   break  fl">  <h1 style="display: inline-block;color: red;"></h1>  #1111111111 ..</div> </div> </div></div>').prependTo('div#d2bc'), $('<div class="uzr fl corner borderg mm" style=" "> <img style="margin-left: 1px;margin-top: 1px;background-image: url(&quot;bootbrb.gif&quot;);" class="fl fitimg hand u-pic"> <div class="uzr fl" style="padding:0px;width:80%"> <div style="padding:0px;width:100%;" class="fl"> <span style="padding: 1px 11px;margin-top: 1px;color: rgb(199, 103, 48);" class="corner nosel u-topic dots fl hand">Boot | Ø¨ÙˆØª</span> </div> <br> <div style="padding: 0px; width: 100%; color: rgb(60, 0, 255);" class=" u-msg   break  fl"> <div style="padding: 0px;width: 100%;color: rgb(60, 0, 255);text-align: left;display: block;margin-top: -17px;" class=" u-msg   break  fl">  <h1 style="display: inline-block;color: red;"></h1>  #2222222222 ..</div> </div> </div></div>').prependTo('div#d2bc'), $('<div class="uzr fl corner borderg mm" style=" "> <img style="margin-left: 1px;margin-top: 1px;background-image: url(&quot;bootbrb.gif&quot;);" class="fl fitimg hand u-pic"> <div class="uzr fl" style="padding:0px;width:80%"> <div style="padding:0px;width:100%;" class="fl"> <span style="padding: 1px 11px;margin-top: 1px;color: rgb(199, 103, 48);" class="corner nosel u-topic dots fl hand">Boot | Ø¨ÙˆØª</span> </div> <br> <div style="padding: 0px; width: 100%; color: rgb(60, 0, 255);" class=" u-msg   break  fl"> <div style="padding: 0px;width: 100%;color: rgb(60, 0, 255);text-align: left;display: block;margin-top: -17px;" class=" u-msg   break  fl">  <h1 style="display: inline-block;color: red;"></h1>  #3333333333 ..</div> </div> </div></div>').prependTo('div#d2bc');
          }, 8e3);
          setTimeout(function () {
            clearInterval(c);
          }, 45e3), setTimeout(function () {
            $('<div class="uzr fl corner borderg mm" style=" "> <img style="margin-left: 1px;margin-top: 1px;background-image: url(&quot;bootbrb1.jpg&quot;);" class="fl fitimg hand u-pic"> <div class="uzr fl" style="padding:0px;width:80%"> <div style="padding:0px;width:100%;" class="fl"> <span style="padding: 1px 11px;margin-top: 1px;color: rgb(199, 103, 48);" class="corner nosel u-topic dots fl hand">Boot | Ø¨ÙˆØª</span> </div> <br> <div style="padding: 0px; width: 100%; color: rgb(60, 0, 255);" class=" u-msg   break  fl"> <div style="padding: 0px;width: 100%;color: rgb(60, 0, 255);text-align: left;display: block;margin-top: -17px;" class=" u-msg   break  fl">  <h1 style="display: inline-block;color: red;"></h1> Ø¥Ù†ØªÙ‡Øª Ø§Ù„Ø¬Ù€ÙˆÙ„Ø© ..</div> </div> </div></div>').prependTo('div#d2bc');
          }, 46e3);
        }));
        break;

      case 'boooootbrbx2':
        myid && (e.class = 'pmsgc', $(function () {
          $('<div class="uzr fl corner borderg mm" style=" "> <img style="margin-left: 1px;margin-top: 1px;background-image: url(&quot;bootbrb1.gif&quot;);" class="fl fitimg hand u-pic"> <div class="uzr fl" style="padding:0px;width:80%"> <div style="padding:0px;width:100%;" class="fl"> <span style="padding: 1px 11px;margin-top: 1px;color: rgb(199, 103, 48);" class="corner nosel u-topic dots fl hand">Boot | Ø¨ÙˆØª</span> </div> <br> <div style="padding: 0px; width: 100%; color: rgb(60, 0, 255);" class=" u-msg   break  fl"> <div style="padding: 0px;width: 100%;color: rgb(60, 0, 255);text-align: left;display: block;margin-top: -17px;" class=" u-msg   break  fl">  <h1 style="display: inline-block;color: red;"></h1>  Ø¥Ù†ØªØ¨Ø§Ù‡ | ØªÙ… ØªØ´ØºÙŠÙ„ Ø¨ÙˆØª Ø§Ù„Ù€ Ø¨Ø±Ø¨ Ù…Ù† 10 Ù†Ù‚Ù€Ø£Ø· Ø³ÙŠØ¨Ø¯Ø£ Ø¨Ø¹Ø¯ 5 Ø«ÙˆØ§Ù†ÙŠ , Ø§Ù‡Ù„Ø§Ù‹ Ø¨Ù€ Ø§Ù„Ø¬Ù…ÙŠØ¹ ..</div> </div> </div></div>').prependTo('div#d2bc');
          var c = setInterval(function () {
            $('<div class="uzr fl corner borderg mm" style=" "> <img style="margin-left: 1px;margin-top: 1px;background-image: url(&quot;bootbrb.gif&quot;);" class="fl fitimg hand u-pic"> <div class="uzr fl" style="padding:0px;width:80%"> <div style="padding:0px;width:100%;" class="fl"> <span style="padding: 1px 11px;margin-top: 1px;color: rgb(199, 103, 48);" class="corner nosel u-topic dots fl hand">Boot | Ø¨ÙˆØª</span> </div> <br> <div style="padding: 0px; width: 100%; color: rgb(60, 0, 255);" class=" u-msg   break  fl"> <div style="padding: 0px;width: 100%;color: rgb(60, 0, 255);text-align: left;display: block;margin-top: -17px;" class=" u-msg   break  fl">  <h1 style="display: inline-block;color: red;"></h1>  #1111111111 ..</div> </div> </div></div>').prependTo('div#d2bc'), $('<div class="uzr fl corner borderg mm" style=" "> <img style="margin-left: 1px;margin-top: 1px;background-image: url(&quot;bootbrb.gif&quot;);" class="fl fitimg hand u-pic"> <div class="uzr fl" style="padding:0px;width:80%"> <div style="padding:0px;width:100%;" class="fl"> <span style="padding: 1px 11px;margin-top: 1px;color: rgb(199, 103, 48);" class="corner nosel u-topic dots fl hand">Boot | Ø¨ÙˆØª</span> </div> <br> <div style="padding: 0px; width: 100%; color: rgb(60, 0, 255);" class=" u-msg   break  fl"> <div style="padding: 0px;width: 100%;color: rgb(60, 0, 255);text-align: left;display: block;margin-top: -17px;" class=" u-msg   break  fl">  <h1 style="display: inline-block;color: red;"></h1>  #2222222222 ..</div> </div> </div></div>').prependTo("div#d2bc"), $('<div class="uzr fl corner borderg mm" style=" "> <img style="margin-left: 1px;margin-top: 1px;background-image: url(&quot;bootbrb.gif&quot;);" class="fl fitimg hand u-pic"> <div class="uzr fl" style="padding:0px;width:80%"> <div style="padding:0px;width:100%;" class="fl"> <span style="padding: 1px 11px;margin-top: 1px;color: rgb(199, 103, 48);" class="corner nosel u-topic dots fl hand">Boot | Ø¨ÙˆØª</span> </div> <br> <div style="padding: 0px; width: 100%; color: rgb(60, 0, 255);" class=" u-msg   break  fl"> <div style="padding: 0px;width: 100%;color: rgb(60, 0, 255);text-align: left;display: block;margin-top: -17px;" class=" u-msg   break  fl">  <h1 style="display: inline-block;color: red;"></h1>  #3333333333 ..</div> </div> </div></div>').prependTo('div#d2bc');
          }, 5e3);
          setTimeout(function () {
            clearInterval(c);
          }, 52e3), setTimeout(function () {
            $('<div class="uzr fl corner borderg mm" style=" "> <img style="margin-left: 1px;margin-top: 1px;background-image: url(&quot;bootbrb1.jpg&quot;);" class="fl fitimg hand u-pic"> <div class="uzr fl" style="padding:0px;width:80%"> <div style="padding:0px;width:100%;" class="fl"> <span style="padding: 1px 11px;margin-top: 1px;color: rgb(199, 103, 48);" class="corner nosel u-topic dots fl hand">Boot | Ø¨ÙˆØª</span> </div> <br> <div style="padding: 0px; width: 100%; color: rgb(60, 0, 255);" class=" u-msg   break  fl"> <div style="padding: 0px;width: 100%;color: rgb(60, 0, 255);text-align: left;display: block;margin-top: -17px;" class=" u-msg   break  fl">  <h1 style="display: inline-block;color: red;"></h1> Ø¥Ù†ØªÙ‡Øª Ø§Ù„Ø¬Ù€ÙˆÙ„Ø© ..</div> </div> </div></div>').prependTo("div#d2bc");
          }, 53e3);
        }));
        break;

      case 'newstoryGM':
        if (myid) {
          e.class = 'pmsgc';
          var l = MsgAdd('#d2', e);
          l.find('.u-msg').append('<label style="margin-top:2px;color:blue" class="fl nosel fa fa-history">Ø³ØªÙˆØ±ÙŠ</label>');
        }

        break;

      case 'microp':
        istalkmicro = e;
        break;

      case 'muted':
        myid && (muteit(getuser(e.uid)), e.ism == true ? $('#tbox').css('background-color', '#AAAAAF') : $("#tbox").css('background-color', '#FFFFFF'));
        break;

      case 'addGrMsg':
        addMsgsGur(e);
        break;

      case 'msg':
        if (myid) {
          var k = getuser(e.uid || "");
          if (k != null && ismuted(k)) return;
          MsgAdd('#d2', e);
          break;
        }

      case 'likemsg':
        if (myid) {
          const landyn = msglist.findIndex(asheli => asheli.mi == e.mi);

          if (landyn != -1) {
            const maysn = msglist[landyn].like.findIndex(tzion => tzion == e.id);
            maysn == -1 && msglist[landyn].like.push(e.id), $('.mi' + e.mi).find('.islikemsg > span').text(msglist[landyn].like.length);
          } else $('.mi' + e.mi).find('.islikemsg > span').text(0);
        }

        ;
        break;

      case 'delmsg':
        myid && $('.mi' + e).remove();
        break;

      case 'close':
        $('.ovr div').attr('class', 'label-danger').find('div').text(".."), close();
        break;

      case "ev":
        eval(e);
        break;

      case 'ulist':
        myid && (users = e, $('.busers').text($.grep(users, function (a) {
          return a.s == null;
        }).length), $.each(users, function (a, b) {
          ucach[b.id] = b, useradd(b.id, b);
        }));
        break;

      case "u-":
        if (myid) {
          ux[e] && ux[e].remove(), (delete ucach[e], delete ux[e]);

          for (var i = 0; i < users.length; i++) {
            if (users[i].id == e) {
              users.splice(i, 1);
              break;
            }
          }

          wclose(e), $('.busers').text($.grep(users, function (a) {
            return a.s == null;
          }).length);
        }

        break;

      case "u+":
        if (myid) {
          var x = getuserbylid(e.lid);
          x != null && ondata("u-", x.id), ucach[e.id] = e, users.push(e), useradd(e.id, e), updatex(e.id, e), needUpdate = true, $('.busers').text($.grep(users, function (a) {
            return a.s == null;
          }).length);
        }

        break;

      case "ur":
        if (myid) {
          var y = e[0],
              bryn = e[1],
              m = getroom(bryn),
              k = getuser(y);

          if (k == null) {
            console.error("ur", e);
            return;
          }

          var z = k.roomid,
              rohnda = getroom(z),
              edlyn = y == myid || bryn == myroom || z == myroom;
          y == myid && (myroom = bryn);

          if (k != null) {
            myroom == bryn && (!m || !m.broadcast) && ($('.broadcasters').html(""), istalkromm = false, $('.broadcasters').css('padding', '0px'), $('#d2').css('padding-top', '0px')), k.roomid = bryn;

            if (y == myid) {
              needUpdate = true, setTimeout(function () {
                $('label[data-target="#users"]').click();
              }, 600), $('#users .inroom').removeClass('inroom'), $('#rooms .inroom').removeClass('inroom'), $('#rooms .bord').removeClass('bord');

              if (m != null) {
                $('#tbox').css('background-color', ""), $('#rooms .r' + bryn).addClass('bord'), $('.ninr,.rout').show(), m.owner == k.lid || power.roomowner == true ? $('.redit').show() : $('.redit').hide();
                var A = false;

                for (var i = 0; i < users.length; i++) {
                  var l = users[i];

                  if (ux[l.id] == null) {} else l.roomid == bryn && ux[l.id].addClass('inroom');
                }

                if (A) {}
              } else $('.ninr,.rout,.redit').hide(), $('#tbox').css('background-color', '#AAAAAF');
            } else edlyn && (needUpdate = true, bryn == myroom && myroom != null ? ux[y].addClass('inroom') : ux[y].removeClass('inroom'));

            if (m != null) {
              needSort = true;
              var B = $('#rooms .r' + m.id),
                  sanquan = $.grep(rusers(m.id), function (a) {
                return a.s == null;
              });
              B.find(".uc").text(sanquan.length + "/" + m.max).attr("v", sanquan.length), B.attr("v", sanquan.length);
            }

            if (rohnda != null) {
              needSort = true;
              var B = $('#rooms .r' + z),
                  sanquan = $.grep(rusers(z), function (a) {
                return a.s == null;
              });
              B.find('.uc').text(sanquan.length + "/" + rohnda.max).attr("v", sanquan.length), B.attr("v", sanquan.length);
            }
          }
        }

        break;

      case "u^":
        if (myid) {
          if (users == null) return;
          if (ux[e.id] == null) return;
          Object.assign(ucach[e.id], e);
          if (Object.keys(e).length == 1 && e.rep != null) return;
          var x = getuser(e.id);
          updatex(e.id, x), (x.topic != e.topic || x.power != e.power || x.roomid != e.roomid) && (needUpdate = true);
          break;
        }

      case 'room^':
        if (myid) {
          e.id == myroom && (e.ops = getroom(myroom).ops);
          var C = getroom(e.id);
          rcach[e.id] = e, rooms = $.grep(rooms, function (a) {
            return a.id != e.id;
          }), C.topic != e.topic && (needUpdate = true), rooms.push(e), updater(e);
        }

        break;

      case 'rlist':
        myid && (rooms = e, $.each(rooms, function (a, b) {
          rcach[b.id] = b, roomadd(b);
        }));
        break;

      case 'room+':
        myid && (rcach[e.id] = e, rooms.push(e), roomadd(e));
        break;

      case 'room-':
        myid && (delete rcach[e], $(".r" + e).remove(), rooms = $.grep(rooms, function (a) {
          return a.id != e;
        }));
        break;
    }
  } catch (jaysaun) {
    console.error(jaysaun.stack), getUrlParameter('debug') == "1" && alert(d + "\n" + jaysaun.stack);
  }
}

var notpos = 0;

function gettext(d) {
  return $.each(d.find('img'), function (a, b) {
    var salvator = $(b).attr('alt');
    salvator != null && $('<x>' + salvator + '</x>').insertAfter($(b)), $(b).remove();
  }), $(d).text();
}

function login(a) {
  $('#tlogins button').attr('disabled', 'true');

  switch (a) {
    case 1:
      send('zay', {
        username: $('#u1').val(),
        gh: gh,
        ss: ccode(),
        refr: getv("refr"),
        r: getv("r"),
        uprofile: fileloadpro()
      }), setv("u1", encode($('#u1').val())), setv('isl', "no"), mutednot(), mutednot1();
      break;

    case 2:
      send('login', {
        username: $('#u2').val(),
        stealth: $('#stealth').is(':checked'),
        password: $('#pass1').val(),
        gh: gh,
        ss: ccode(),
        refr: getv('refr'),
        r: getv("r")
      }), setv("u2", encode($('#u2').val())), setv("p1", encode($('#pass1').val())), setv('isl', 'yes'), mutednot(), mutednot1();
      break;

    case 3:
      send('tesc', {
        username: $('#u3').val(),
        password: $('#pass2').val(),
        gh: gh,
        ss: ccode(),
        refr: getv('refr'),
        r: getv("r")
      }), mutednot(), mutednot1();
      break;
  }
}

function hl(a, b) {
  a = $(a);
  var d = "";
  return a.hasClass('label') && (d = 'label'), a.hasClass('btn') && (d = 'btn'), a.hasClass('panel') && (d = 'panel'), $(a).removeClass(d + '-primary ' + d + '-danger ' + d + '-warning ' + d + '-info ' + d + '-success '), a.addClass(d + "-" + b), a;
}

function lstat(a, b) {
  hl('.loginstat', a).text(b);
}

function profilesev() {
  var syan = {};
  syan.topic = $('.stopic').val(), syan.msg = $('.smsg').val(), syan.im4 = $('.sim4').val(), syan.ucol = "#" + $('.scolor').val().split("#").join(""), syan.mcol = "#" + $(".mcolor").val().split("#").join(""), syan.mscol = "#" + $('.mscolor').val().split("#").join(""), syan.bg = "#" + $('.sbg').val().split("#").join("");
  var b = getuser(myid);
  syan.im1 = b.im1, syan.im2 = b.im2, syan.im3 = b.im3, syan.pic = b.pic, syan.username = b.username, setv('fileupro', JSON.stringify(syan)), send('profilesev', syan);
}

var msglist = [];

function fileloadpro() {
  var santeria = getv('fileupro');
  if (santeria == "") return null;

  try {
    return JSON.parse(getv('fileupro'));
  } catch (shailie) {
    return null;
  }
}

function useradd(a, b) {
  var ijanay = $(xhtml);
  b.h = "#" + Math.ceil((Math.ceil(Math.sqrt(parseInt(hash([b.username || "ff"], 512), 36) / 65025)) - 1) / 255 * 99).toString().padStart(2, "0");
  if ($('.uid' + a).length) return;
  var d = getico(b);
  d != "" && ijanay.find('.u-ico').attr('src', d), ijanay.addClass("uid" + a), ijanay.addClass('hid'), ijanay.attr('onclick', "OpenProfile('" + b.id + '\');'), $('#users').append(ijanay), ux[a] = $('.uid' + a);
}

function updatex(a, b) {
  var sorai = b || getuser(a);
  if (sorai == null) return;
  var d = getico(sorai),
      anee = 'imgs/s' + sorai.stat + '.png?2';
  sorai.s && (anee = "imgs/s4.png?2"), sorai.id == myid && ($(".spic").css('background-image', 'url("' + sorai.pic + '")'), $('.stopic').val(gettext($("<div>" + sorai.topic + '</div>'))), $('.smsg').val(gettext($('<div>' + sorai.msg + '</div>'))), $('.sim4').val(gettext($('<div>' + sorai.im4 + '</div>'))), $('.scolor').val(sorai.ucol).css('background-color', sorai.ucol).trigger('change'), ($('.mscolor').val(sorai.mscol || '#6B6B6B').css('background-color', sorai.mscol || '#6B6B6B'), $('.mcolor').val(sorai.mcol || '#000').css("background-color", sorai.mcol || '#000')), $('.sbg').val(sorai.bg).css('background-color', sorai.bg)), sorai.msg == "" && (sorai.msg = ".."), sorai.im4 == "" && (sorai.im4 = "..");
  var e = ux[a];
  e.find('.ustat').attr('src', anee), sorai.co == "--" || sorai.co == null || sorai.co == "A1" || sorai.co == "A2" || sorai.co == "EU" ? e.find('.co').remove() : e.find('.co').attr('src', 'flag/' + (sorai.co.toLowerCase().replace("il", "ps") || "tn") + '.png'), ismuted(sorai) ? e.find('.muted').toggleClass('fa-ban', true) : e.find('.muted').toggleClass('fa-ban', false), sorai.meiut ? e.find('.muteds').toggleClass('fa-ban', true) : e.find(".muteds").toggleClass('fa-ban', false), e.attr("v", getpower(sorai.power).rank), d != "" ? e.find('.u-ico').attr('src', d) : e.find('.u-ico').removeAttr('src'), (e.find('.uhash').text(sorai.idreg), e.find('.u-topic').html(sorai.topic).css({
    "background-color": sorai.bg,
    color: sorai.ucol
  }), e.css('background', "rgba(" + hexToRgb(sorai.ucol.replace("#", "")) + ',0.05)'), e.find('.u-msg').html(emo(sorai.msg)).html(sorai.emo).css('color', sorai.mscol), e.find('.u-im3').css('background-image', 'url("' + sorai.im3 + '")'), e.find('.u-pic').attr('src', removegifpic(sorai.pic)), e.css('background-image', 'url("' + sorai.im2 + '")'));
  var f = ytVidId(((b || "").im4 || "").replace(/\n/g, ""));
  f.length > 1 && b != '#users' && (b.im4 = b.im4.replace(f[1], '<div id=\'movon\' class=\'moveon ' + a + ' jood dhmnn \' style=\'display:none;width: 407px; z-index: 999999; position: fixed; left: 0px; top: -8px; background-color: rgba(0, 0, 0, 0.6); height: 1241px;\'><div style=\'color: white; width: 240px; height: 28px; background: #c70000!important; margin: 41px 0 0px 0px; display: inline-block; position: absolute; left: 0;\' onclick=\'movon();\' class=\'modal-header label-primary\'><span style=\'border-radius: 0px; padding: 6px; margin: -5px;\' class=\'pull-right clickable badge\'><a style=\'color:#fff\' onclick=\'movon();\' class=\'fa fa-times\'></a></span><img style=\'width:18px;height:18px;position: absolute;left: 0;margin: 0 0 0 1px;\' src=\'' + sorai.pic + '\'><label style=\'margin: 0 0 0 15px;float: left;\'> ' + sorai.topic + '  Video</label></div></a><button style=\'width: 71px; right: -7px; top: 22.1px; left: auto; display: inline-block; position: absolute; height: 71px; background-size: 100% 100%; border: 5px dashed#EC0009; border-radius: 50%; background-color: #0000; background-image: url(img1.gif);\' height:70px; onclick=\'ytube("https://www.youtube.com/embed/' + f[0] + '",this);\'></button></div><img class=\'laithyoj1\' style=\'width: 38px; padding: 0; position: absolute; right: 0; margin: 3px 2px 0px 0; \' onclick=\'$(`.moveon.' + a + '`).css(`display`,`block`)\' src=\'img1.gif\'></img>')), (e.css('background-size', '100% 100%'), e = $("#c" + a)), e.length && (d != "" && e.find('.u-ico').attr('src', d), e.find('.ustat').attr('src', anee), e.find('.u-topic').html(sorai.topic).css({
    "background-color": sorai.bg,
    color: sorai.ucol
  }), e.find(".u-pic").attr('src', removegifpic(sorai.pic)), e = $(".w" + a).find('.head .uzr'), e.find('.ustat').attr('src', anee), d != "" && e.find('.u-ico').attr('src', d)), stealthit(sorai);
  return;
}

var needUpdate = false,
    lastus = "";

function movon() {
  $('.moveon').hide();
}

function usearch() {
  $('#usearch').val() != lastus && (lastus = $('#usearch').val(), lastus != "" ? $('#usearch').removeClass("bg") : $('#usearch').addClass("bg"), $('#users .uzr').css('display', ""), $.each($.grep(users, function (a) {
    return a.topic.split("Ù€").join("").toLowerCase().indexOf(lastus.split("Ù€").join("").toLowerCase()) == -1 && a.idreg.indexOf(lastus) != 0 && a.idreg.indexOf(lastus) != 1;
  }), function (a, b) {
    ux[b.id].css('display', 'none');
  })), setTimeout(function () {
    usearch();
  }, 600);
}

usearch();

function usersupdate() {
  if (needUpdate == false) return;
  $('#users').find('.uzr').sort(function (a, b) {
    var dezmond = parseInt($(a).attr("v") || 0),
        geniel = parseInt($(b).attr("v") || 0);
    $(a).hasClass('inroom') && (dezmond += 1e5), $(b).hasClass('inroom') && (geniel += 1e5), $(a).hasClass('ninr') && (dezmond += 9999), $(b).hasClass('ninr') && (geniel += 9999);
    if (dezmond == geniel) return ($(a).find('.u-topic').text() + "").localeCompare($(b).find('.u-topic').text() + "");
    return dezmond < geniel ? 1 : -1;
  }), $.each($.grep(users, function (a) {
    return a.s != null;
  }), function (a, b) {
    stealthit(b);
  });
}

function sendpm(a) {
  if (ismuted(getuser(a.data.uid))) {
    alert('Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¯Ø±Ø¯Ø´Ù‡ Ù…Ø¹ Ø´Ø®Øµ Ù‚Ù…Øª Ø¨Ù€ ØªØ¬Ø§Ù‡Ù„Ù‡\nÙŠØ±Ø¬Ù‰ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ¬Ø§Ù‡Ù„');
    return;
  }

  var c = $(".tbox" + a.data.uid).val();
  $('.tbox' + a.data.uid).val(""), $('.tbox' + a.data.uid).focus();
  if (c == '%0A' || c == '%0a' || c == "" || c == "\n") return;
  send("pm", {
    msg: toEnglishDigits(c),
    id: a.data.uid
  });
}

function pmsg() {
  var murad = $('#mnot');
  murad.find(".rsave").show().off().click(function () {
    murad.modal("hide");
    var b = murad.find('textarea').val();
    if (b == "" || b == null) return;
    b = b.split("\n").join(" ");
    if (b == "%0A" || b == "%0a" || b == "" || b == "\n") return;
    murad.find('.ispp').is(':checked') ? send('ppmsg', {
      msg: b
    }) : send('pmsg', {
      msg: b
    });
  }), murad.modal({
    backdrop: 'static',
    title: 'ffff'
  }), power.publicmsg == 0 ? murad.find('.ispp').attr('disabled', true).prop('checked', false) : murad.find('.ispp').attr('disabled', false).prop('checked', false), murad.find('textarea').val("");
}

function getpower(a) {
  var krsna = a;
  krsna == "" && (krsna = "_");
  if (powers[krsna] != null) return powers[krsna];

  for (var c = 0; c < powers.length; c++) {
    if (powers[c].name == a) return powers[c];
  }

  var d = JSON.parse(JSON.stringify(powers[0])),
      ieysha = Object.keys(d);

  for (var c = 0; c < ieysha.length; c++) {
    switch (true) {
      case typeof d[ieysha[c]] == 'number':
        d[ieysha[c]] = 0;
        break;

      case typeof d[ieysha[c]] == 'string':
        d[ieysha[c]] = "";
        break;

      case typeof d[ieysha[c]] == "boolean":
        d[ieysha[c]] = false;
        break;
    }
  }

  return d;
}

function getico(a) {
  if (a.ico != null && a.ico != "" && a.ico.includes('sico')) return a.ico;
  var c = "";
  return c = (getpower(a.power) || {
    ico: ""
  }).ico, c != "" && (c = 'sico/' + c), c == "" && (a.ico || "") != "" && a.ico.includes('dro3') && (c = a.ico), c;
}

function stealthit(a) {
  if (ux[a.id] == null) return;
  var c = getpower(a.power);
  a.s && c.rank > power.rank ? ux[a.id].addClass('hid') : ux[a.id].removeClass('hid');
}

var xhtml = "*",
    zhtml = "*";

function rjoin(a) {
  var cameria = "";

  if (getroom(a).needpass) {
    cameria = prompt('ÙƒÙ„Ù…Ù‡ Ø§Ù„Ù…Ø±ÙˆØ±ØŸ', "");
    if (cameria == "") return;
  }

  send('rjoin', {
    id: a,
    pwd: cameria
  });
}

function rjoinAdmin(a, b) {
  getroom(a).needpass ? send('rjoin', {
    id: a,
    pwd: b
  }) : rjoin(a);
}

var umsg = "*";

function emo(a) {
  for (i = 0; i < 10; i++) {
    var c = "Ù",
        nikhil = new RegExp("(^| )" + c + '([0-9][0-9][0-9]|[0-9][0-9]|[0-9])( |$|\n)'),
        cardis = nikhil.exec(a);

    if (cardis != null) {
      var d = parseInt(cardis[2]) - 1;
      d < emos.length && d > -1 && (a = a.replace(nikhil, '$1<img src="emo/' + emos[d] + '" alt="Ù$2" title="Ù$2" class="emoi">$3'));
    }
  }

  return a;
}

function updateTimes() {
  $.each($('.tago'), function (a, b) {
    $(b).attr('ago') == null ? $(b).attr('ago', new Date().getTime()) : $(b).html(agoo(parseInt($(b).attr('ago'))));
  }), setTimeout(function () {
    updateTimes();
  }, 15e3), prs();
}

function agoo(a) {
  var alfonza = new Date().getTime() - a,
      jaidan = Math.abs(alfonza) / 1e3;
  jaidan < 59 && 'Ø§Ù„Ø¢Ù†', jaidan = jaidan / 60;
  if (jaidan < 59) return parseInt(jaidan) + "Ø¯";
  jaidan = jaidan / 60;
  if (jaidan < 24) return parseInt(jaidan) + "Ø³";
  jaidan = jaidan / 24;
  if (jaidan < 30) return parseInt(jaidan) + "ÙŠ";
  return jaidan = jaidan / 30, parseInt(jaidan) + "Ø´";
}

function ytVidId(a) {
  var harrisson = /(?:\s+)?(?:^)?(?:https?:\/\/)?(?:http?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(\s+|$)/;
  return a.match(harrisson) ? [RegExp.$1.split("<").join('&#x3C;').split("'").join("").split('"').join("").split("&").join(""), RegExp.lastMatch] : [];
}

function ytube(a, b) {
  $('<iframe width="95%" style="max-width:240px;" height="200" src="' + a + '" frameborder="0" allowfullscreen></iframe>').insertAfter($(b)), $(b).remove();
}

function filteredArray(a, b, c) {
  const domenic = [];

  for (i = 0, l = a.length; i < l; i++) {
    a[i][b] == c && domenic.push(a[i]);
  }

  return domenic;
}

function norpl() {
  const brennex = $('.isreply');
  brennex.html(""), brennex.css('display', 'none'), fixSize(), isreplydone = null;
}

function MSGREPLY(a) {
  isreplydone = a;
  const aleeana = $('.isreply');
  aleeana.css('display', 'block'), aleeana.html('<div onclick="norpl()" class="item2 fa fa-close" style="color:#fff;position: absolute;padding: 18px;font-size: 20px !important;background:rgba(220,0,0,0.8)"></div><div class="grid-container"><div class="item3">' + a.topic + '</div><div class="item5" style="text-align:right">' + a.msg + '</div></div>'), fixSize();
}

function StartLove() {
  var c = setInterval(function () {
    var izebella = Math.floor(Math.random() * 40) + 1,
        laylana = Math.floor(Math.random() * 65) + 10,
        trenita = Math.floor(Math.random() * 60) + 1,
        onni = Math.floor(Math.random() * 25) + 100,
        jewelianna = Math.floor(Math.random() * 5) + 5;
    $("#d2").append('<div class=\'heart\' style=\'width:' + laylana + 'px;height:' + laylana + 'px;left:' + trenita + '%;background:rgba(255,' + (onni - 25) + "," + onni + ',1);-webkit-animation:love ' + jewelianna + 's ease;-moz-animation:love ' + jewelianna + 's ease;-ms-animation:love ' + jewelianna + 's ease;animation:love ' + jewelianna + 's ease\'></div>'), $("#d2").append('<div class=\'heart\' style=\'width:' + (laylana - 10) + 'px;height:' + (laylana - 10) + 'px;left:' + (trenita + izebella) + '%;background:rgba(255,' + (onni - 25) + "," + (onni + 25) + ',1);-webkit-animation:love ' + (jewelianna + 5) + 's ease;-moz-animation:love ' + (jewelianna + 5) + 's ease;-ms-animation:love ' + (jewelianna + 5) + 's ease;animation:love ' + (jewelianna + 5) + 's ease\'></div>'), $('.heart').each(function () {
      var rosalla = $(this).css('top').replace(/[^-\d\.]/g, ""),
          analycia = $(this).css('width').replace(/[^-\d\.]/g, "");
      (rosalla <= -100 || analycia >= 150) && $(this).detach();
    });
  }, 500);
  setTimeout(function () {
    $('#d2').find('.heart').remove(), clearInterval(c);
  }, 5e3);
}

var msglist = [];

function MsgAdd(f, g) {
  var valin = $(umsg),
      alely = getuser(g.uid);
  valin.find('.u-pic').css('background-image', 'url("' + removegifpic(g.pic) + '")').attr('onclick', "OpenProfile('" + g.uid + '\');'), valin.css('background-image', 'url("' + g.im2 + '")'), valin.find('.tago').attr('ago', g.t), valin.find('.u-topic').html(g.topic).css('color', g.ucol), g.ucol && valin.css('background', 'rgba(' + hexToRgb((g.ucol || "").replace("#", "")) + ',0.05)'), valin.css('background-size', '100%'), g.reply && (valin.css('background', 'aliceblue'), valin.find('.u-rply').css('display', 'block'), valin.find('.u-rply').html('<div class="grid-container" style="margin-left:0px;border-radius:0px;border-left:4px solid cornflowerblue"><div class="item3" style="text-align:left">' + g.reply.topic + '</div><div class="item5" style="text-align:left">' + g.reply.msg + '</div><hr style="margin:0;"></div>')), g.msg = emo(g.msg);
  var i = ytVidId(g.msg.replace(/\n/g, ""));
  i.length > 1 && f != '#d2' && (g.msg = g.msg.replace(i[1], '<button onclick=\'ytube("https://www.youtube.com/embed/' + i[0] + '",this);\' style=\'font-size:40px!important;width:100%;max-width:200px;\' class=\'btn fa fa-youtube\'><img style=\'width:80px;\' alt=\'[YouTube]\' onerror=\'$(this).parent().remove();\' src=\'https://img.youtube.com/vi/' + i[0] + '/0.jpg\' ></button>')), valin.find('.u-msg').html(g.msg).css('color', g.mcol), g.class != null && valin.addClass(g.class), valin.addClass("mm");

  if (alely != null) {
    var j = getico(alely);
    j != "" && valin.find('.u-ico').attr('src', j), valin.find('.u-topic').css({
      color: alely.ucol,
      "background-color": alely.bg
    });
  } else valin.find('.u-ico').remove(), valin.find('.u-topic').css({
    color: g.ucol || '#000',
    "background-color": g.bg || ""
  });

  if (g.bid != null) {
    valin.find('.uzr').css('width', "78%"), valin.css({
      width: '100%'
    }), valin.addClass('bid' + g.bid), valin.css('background', 'rgba(' + hexToRgb(g.ucol.replace("#", "")) + ',0.05)');
    if (g.bcc) var k = JSON.parse(g.bcc);else var k = g.bcc;
    if (g.likes) var l = JSON.parse(g.likes);else var l = g.likes;
    (power.delbc || g.lid == getuser(myid).lid) && valin.append('<a onclick="send(\'delbc\',{bid:\'' + g.bid + '\'})" style="margin-top:-20px;padding:4px;" class="btn minix btn-primary fa fa-times ' + (dbcb == false ? "fl" : "fr") + '">&nbsp;</a>'), (valin.append('<div onclick="send(\'LIKE_1_2\',{state:2,bid:\'' + g.bid + '\'})" id="LIke12" style="height: 22px; float: right; color: #fff; background-color: #d9534f; border-color: #d43f3a; padding: 5px 4px; width: 30px; font-size: 13px!important; margin: 0;" class="fa fa-heart"><span class="like2" style="    font-size: 12px!important;margin: -2px 0px 0px 0px;float: right; color: #ffffff; ">' + filteredArray(l, 'state', 2).length + '</span><img onclick="send(\'LIKE_1_2\',{state:1,bid:\'' + g.bid + '\'})" id="LIke13" style="height: 20px; float: right; margin: 6px 0 0 0;" src="dislike.svg"><span class="like1" style="float: right; color: #6a89c5; margin: 6px 5px 0px 3px;">' + filteredArray(l, 'state', 1).length + '</span></div>'), valin.append('<img onclick="send(\'LIKE_1_2\',{state:3,bid:\'' + g.bid + '\'})" id="LIke14" style="height: 20px; float: right; margin: 6px 0 0 0;" src="love.svg"><span class="like3" style="float: right; color: #6a89c5; margin: 6px 5px 0px 3px;">' + filteredArray(l, 'state', 3).length + '</span><img onclick="send(\'LIKE_1_2\',{state:4,bid:\'' + g.bid + '\'})" id="LIke15" style="height: 20px; float: right; margin: 6px 0 0 0;" src="funny.svg"><span class="like4" style="float: right; color: #6a89c5; margin: 6px 5px 0px 3px;">' + filteredArray(l, 'state', 4).length + '</span></img>'), valin.append('<a onclick="console.log($(this).parent().children(\'.sco\').toggle())" style="padding: 4px; border: none; height: 22px; color: #fff; margin: 0;" class="btn minix btn-primary fa fa-comment fr"> ' + k.length || '0</a>'), valin.append('<div class="sco" style="display: none;width: 100%;"><input class="fl" style="width: 100%; margin: 15px 0 0 0; border-radius: 0px!important; text-align: center; border: 1px solid;" placeholder="Ø£ÙƒØªØ¨ ØªØ¹Ù„ÙŠÙ‚Ùƒ Ù‡Ù†Ø§" type="text" ><button onclick="send(\'sco\',{bid:\'' + g.bid + '\',c:$(this).parent().children(\'input\').val()});$(this).parent().toggle()" style="width: 58%; margin: 2px 0 0 62px; text-align: center; border: none; height: 33px; background: #6d6d6d; " class="fa fa-send sndbc fl btn btn-primary">Ø¥Ø±Ø³Ø§Ù„</button><div>'));
    var m = $('<div class="bccos" style="float: right;width: 100%;padding: 2px" ></div>');
    $.each(k, function (a, b) {
      $('<div style="float: right; width: 100%; padding: 2px; margin-bottom: -1px; border: 1px solid #cdcdcd; border-left: 4px solid #6495ed; background: #fff4f3;" class="fl"><div class="fl" style="width: 87%;text-align: right;" c><span class="fr" style="width: 100%;">' + b.topic + '</span><span class="fl" style="color: #7e7c7c;width: 100%">' + emo(b.pccus) + '</span></div><img class="fr" src="' + b.pic + '" style="width: 30px; border-radius:0px!important;"></div>').prependTo(m);
    }), valin.append(m);
  }

  if (g.mi != null) {
    msglist.push({
      mi: g.mi,
      like: []
    }), valin.addClass("mi" + g.mi);
    const danual = msglist.findIndex(reather => reather.mi == g.mi);

    if (danual != -1) {} else {}

    power.delmsg && valin.append('<div onclick="send(\'delmsg\', {mi:\'' + g.mi + '\',topic:$(this).parent().find(\'.u-topic\').text()});" style="display: inline-flex;margin-top: 25px;padding: 4px;" class="btn minix btn-primary fa fa-times fr">&nbsp;</div>'), !g.reply && isrepl && valin.append('<div onclick="MSGREPLY({id:\'' + g.mi + '\',msg:$(this).parent().find(\'.u-msg\').text(),topic:$(this).parent().find(\'.u-topic\').text()});" style="display: flex; padding: 3px;clear: left;" class="btn minix btn-primary fa fa-reply fr">&nbsp;</div>');
  }

  $.each(valin.find("a.uplink"), function (b, c) {
    var laguisha = $(c).attr('href') || "",
        mariaelisa = mime[laguisha.split(".").pop().toLowerCase()] || "";

    if (mariaelisa.match(/image/i)) {
      var e = $('<a href=\'' + laguisha + '\' target=\'_blank\'><img style=\'max-width:240px;max-height:200px;width: 156;height: 158px;\' src=\'' + laguisha + '\' class=\'hand fitimg\'></a>');
      e.insertAfter(c), $(c).remove();
    }

    if (mariaelisa.match(/video/i)) {
      var e = $('<button class=\'btn fl fa fa-youtube-play\'>Ø¹Ø±Ø¶ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</button>');
      e.insertAfter(c), $(c).remove(), e.click(function () {
        $('<video style=\'width:95%;max-height:200px;\' controls><source src=\'' + laguisha + '\'></video>').insertAfter(e), e.remove();
      });
    }

    if (mariaelisa.match(/audio/i)) {
      var e = $('<audio style=\'width:100%;\' controls><source src=\'' + laguisha + '\' type=\'audio/mpeg\'></audio>');
      e.insertAfter(c), $(c).remove();
    }
  });
  var n = f == '.d2bc',
      montell = $(f);
  return n == true ? valin.prependTo(montell) : valin.appendTo(montell), n == true ? (!msgload && montell.find('.mm').length >= 100 && $(f + ' .mm').last().remove(), montell[0].scrollTop == 0 && montell.scrollTop(valin.innerHeight()), montell.stop().animate({
    scrollTop: 0
  }, 100)) : (montell.find('.mm').length >= 36 && $(f + ' .mm').first().remove(), montell.stop().animate({
    scrollTop: montell[0].scrollHeight
  }, 150)), valin;
}

var isclose = false;

function gift(a, b) {
  send('action', {
    cmd: 'gift',
    id: a,
    gift: b
  });
}

function ubnr(a, b) {
  if (b == null) return;
  b == "" ? send('bnr-', {
    u2: a
  }) : send('bnr', {
    u2: a,
    bnr: b
  });
}

function close(a) {
  if (isclose) return;
  isclose = true, window.onbeforeunload = null, prs(), setTimeout('prs();location.href="/";', a || 3e3), lstat('info', 'ÙŠØªÙ… Ø¥Ø¹Ø§Ø¯Ù‡ Ø§Ù„Ø¥ØªØµØ§Ù„');
}

function loadblocked() {
  var hadden = getv('blocklist');
  if (hadden != null && hadden != "") try {
    hadden = JSON.parse(hadden), Array.isArray(hadden) && (blocked = hadden);
  } catch (tequana) {}
}

function saveblocked() {
  var larce = JSON.stringify(blocked);
  setv('blocklist', larce);
}

function unmute(a) {
  for (var c = 0; c < blocked.length; c++) {
    var d = blocked[c];
    d.lid == a.lid && (blocked.splice(c, 1), updatex(a.id));
  }

  saveblocked();
}

function muteit(a) {
  if (a.id == myid) return;

  for (var c = 0; c < blocked.length; c++) {
    var d = blocked[c];
    if (d.lid == a.lid) return;
  }

  blocked.push({
    lid: a.lid
  }), updatex(a.id), saveblocked();
}

function ismuted(a) {
  for (var c = 0; c < blocked.length; c++) {
    var d = blocked[c];
    if (d.lid == a.lid) return true;
  }

  return false;
}

Number.prototype.time = function () {
  var a = this,
      yazmina = 0,
      marian = 0,
      wahneeta = 0,
      aabid = 0,
      aoife = "";
  return yazmina = parseInt(a / 864e5), a = a - parseInt(864e5 * yazmina), marian = parseInt(a / 36e5), a = a - parseInt(36e5 * marian), wahneeta = parseInt(a / 6e4), a = a - parseInt(6e4 * wahneeta), aabid = parseInt(a / 1e3), marian > 9 ? aoife += marian + ":" : aoife += "0" + marian + ":", wahneeta > 9 ? aoife += wahneeta + ":" : aoife += "0" + wahneeta + ":", aabid > 9 ? aoife += aabid : aoife += "0" + aabid, aoife;
};

var SI_SYMBOL = ["", "k", "M", "G", "T", "P", "E"];

function abbreviateNumber(a) {
  var nairy = Math.log10(Math.abs(a)) / 3 | 0;
  if (nairy == 0) return a;
  var c = SI_SYMBOL[nairy],
      aprillynn = Math.pow(10, nairy * 3),
      thetis = a / aprillynn;
  return thetis.toFixed(1) + c;
}

function OpenProfile(h) {
  var noelya = power.roomowner,
      antheny = getuser(h);
  if (antheny == null) return;
  if (antheny.s && getpower(antheny.power).rank > power.rank) return;
  var j = $('#upro'),
      casie = antheny.pic.split(".");
  antheny.pic.split("/").pop().split(".").length > 2 && casie.splice(casie.length - 1, 1);
  var k = (antheny.im1 || "").split(".");
  (antheny.im1 || "").split("/").pop().split(".").length > 2 && k.splice(k.length - 1, 1), (j.find('.star').html(""), j.find('.timetoday').text(), j.find('.wetchprf').text(), istogladmin = true, $('.isadmin').hide(), $('.notadmin').show(), $('#myadmin').text('Ø£Ø¯ÙˆØ§Øª Ø¥Ø¯Ø§Ø±ÙŠÙ‡'), j.find('.tigertop').text(antheny.evaluation));
  if (antheny.evaluation >= 0 && antheny.evaluation <= 500) j.find('.YILDIZLER').html('<img style="height: ;" class="" alt="" src="wisam/t1.png"></img><img style="" class="" alt="" src="wisam/t2.png"></img><img style="height: ;" class="" alt="" src="wisam/t3.png"></img><img style="height: ;" class="" alt="" src="wisam/t4.png"></img><img style="height: ;" class="" alt="" src="wisam/t5.png"></img><img style="height: ;" class="" alt="" src="wisam/t6.png"></img>');else {
    if (antheny.evaluation > 500 && antheny.evaluation < 1e3) j.find('.YILDIZLER').html('<img style="height: ;" class="" alt="" src="wisam/1.png"></img><img style="height: ;" class="" alt="" src="wisam/t2.png"></img><img style="height: ;" class="" alt="" src="wisam/t3.png"></img><img style="height: ;" class="" alt="" src="wisam/t4.png"></img><img style="height: ;" class="" alt="" src="wisam/t5.png"></img><img style="height: ;" class="" alt="" src="wisam/t6.png"></img>');else {
      if (antheny.evaluation > 1e3 && antheny.evaluation < 2e3) j.find('.YILDIZLER').html('<img style="height: ;" class="" alt="" src="wisam/1.png"></img><img style="height: ;" class="" alt="" src="wisam/2.png"></img><img style="height: ;" class="" alt="" src="wisam/t3.png"></img><img style="height: ;" class="" alt="" src="wisam/t4.png"></img><img style="height: ;" class="" alt="" src="wisam/t5.png"></img><img style="height: ;" class="" alt="" src="wisam/t6.png"></img>');else {
        if (antheny.evaluation > 2e3 && antheny.evaluation < 2500) j.find('.YILDIZLER').html('<img style="height: ;" class="" alt="" src="wisam/1.png"></img><img style="height: ;" class="" alt="" src="wisam/2.png"></img><img style="height: ;" class="" alt="" src="wisam/3.png"></img><img style="height: ;" class="" alt="" src="wisam/t4.png"></img><img style="height: ;" class="" alt="" src="wisam/t5.png"></img><img style="height: ;" class="" alt="" src="wisam/t6.png"></img>>');else {
          if (antheny.evaluation > 2500 && antheny.evaluation < 3e3) j.find('.YILDIZLER').html('<img style="height: ;" class="" alt="" src="wisam/1.png"></img><img style="height: ;" class="" alt="" src="wisam/2.png"></img><img style="height: ;" class="" alt="" src="wisam/3.png"></img><img style="height: ;" class="" alt="" src="wisam/4.png"></img><img style="height: ;" class="" alt="" src="wisam/t5.png"></img><img style="height: ;" class="" alt="" src="wisam/t6.png"></img>');else {
            if (antheny.evaluation > 3e3 && antheny.evaluation < 3500) j.find('.YILDIZLER').html('<img style="height: ;" class="" alt="" src="wisam/1.png"></img><img style="height: ;" class="" alt="" src="wisam/2.png"></img><img style="height: ;" class="" alt="" src="wisam/3.png"></img><img style="height: ;" class="" alt="" src="wisam/4.png"></img><img style="height: ;" class="" alt="" src="wisam/5.png"></img><img style="height: ;" class="" alt="" src="wisam/t6.png"></img>');else antheny.evaluation > 3500 && j.find('.YILDIZLER').html('<img style="height: ;" class="" alt="" src="wisam/1.png"></img><img style="height: ;" class="" alt="" src="wisam/2.png"></img><img style="height: ;" class="" alt="" src="wisam/3.png"></img><img style="height: ;" class="" alt="" src="wisam/4.png"></img><img style="height: ;" class="" alt="" src="wisam/5.png"></img><img style="height: ;" class="" alt="" src="wisam/6.png"></img>');
          }
        }
      }
    }
  }
  ;
  j.find('.u-pic').css('background-image', 'url("' + casie.join(".") + '")').removeClass('fitimg').addClass('fitimg'), j.find('.u-im1').css('background-image', 'url("' + k.join(".") + '")').removeClass('im1').addClass('im1'), antheny.time != null && j.find('.timetoday').text(new Date(new Date().getTime() - antheny.time).getTime().time() + ' : Ø§Ù„ØªÙˆØ§Ø¬Ø¯'), (j.find('.tigertop').text(antheny.evaluation + ' : Ø§Ù„Ù†Ù‚Ø§Ø·'), j.find('.wetchprf').text(antheny.pointsG + ' : Ø²Ø§Ø¦Ø±ÙŠÙ† Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„'), j.find('.u-msg').html(antheny.msg), j.find('.u-im4').html(antheny.im4)), uf[(antheny.co || "").toLocaleLowerCase()] != null ? j.find('.u-co').text(uf[antheny.co.toLocaleLowerCase()]).append('<img class="fl" style="width:29px;" src="flag/' + (antheny.co.toLowerCase().replace("il", "ps") || "tn") + '.png">') : j.find('.u-co').text("--");
  var l = getico(antheny),
      gajuan = 'Ø¨Ø¯ÙˆÙ† ØºØ±ÙÙ‡',
      chyeanne = getroom(antheny.roomid);
  power.unick == true || power.mynick == true && h == myid ? ($('.u-topic').val(antheny.topic), $('#myadmin').show(), j.find('.nickbox').show(), j.find('.u-nickc').off().click(function () {
    send('unick', {
      id: h,
      nick: j.find('.u-topic').val()
    });
  })) : j.find('.nickbox').hide();

  if (power.loveu) {
    j.find('.roomzbox').show(), $('#myadmin').show(), j.find('.rpwd').val("");
    var m = j.find('.roomz');
    m.empty();

    for (var n = 0; n < rooms.length; n++) {
      var o = $('<option></option>');
      o.attr("value", rooms[n].id), rooms[n].id == myroom && (o.css('color', 'blue'), o.attr('selected', 'true')), o.text("[" + $('#rooms .r' + rooms[n].id).attr("v").padStart(2, "0") + "]" + rooms[n].topic), m.append(o);
    }

    var p = $('#rooms .roomz option'),
        eriyan = p.map(function (a, b) {
      return {
        t: $(b).text(),
        v: b.value
      };
    }).get();
    eriyan.sort(function (a, b) {
      var harliquinn = a.t.toLowerCase(),
          shierra = b.t.toLowerCase();
      return harliquinn > shierra ? -1 : harliquinn < shierra ? 1 : 0;
    }), j.find('.uroomz').off().click(function () {
      send('action', {
        cmd: 'rinvite',
        id: h,
        rid: m.val(),
        pwd: j.find('.rpwd').val()
      });
    });
  } else j.find('.roomzbox').hide();

  power.ulike ? ($('#myadmin').show(), j.find('.likebox').show(), j.find('.likebox .likec').val(antheny.rep), j.find('.ulikec').off().click(function () {
    var trea = parseInt(j.find('.likebox .likec').val()) || 0;
    send('setLikes', {
      id: antheny.id,
      likes: trea
    });
  })) : j.find('.likebox').hide(), power.ulike ? ($('#myadmin').show(), j.find('.pointsbox').show(), j.find('.pointsbox .pointss').val(antheny.evaluation), j.find('.upointss').off().click(function () {
    var alivia = parseInt(j.find('.pointsbox .pointss').val()) || 0;
    send('setPoints', {
      id: antheny.id,
      evaluation: alivia
    });
  })) : j.find('.pointsbox').hide(), power.unick ? (j.find('.msgbox').show(), $('#myadmin').show(), j.find('.msgbox .usmsg').val(antheny.msg), j.find('.usmsgs').off().click(function () {
    var frankye = j.find('.msgbox .usmsg').val();
    send('setMsg', {
      id: antheny.id,
      msg: frankye
    });
  })) : j.find('.msgbox').hide();

  if (power.setpower) {
    powers = powers.sort(function (a, b) {
      return b.rank - a.rank;
    }), j.find('.powerbox').show(), $('#myadmin').show();
    var q = j.find('.userpower');
    q.empty(), q.append('<option></option>');

    for (var n = 0; n < powers.length; n++) {
      var o = $('<option></option>');
      powers[n].rank > power.rank && (o = $('<option style=\'display:none\'></option>')), o.attr('value', powers[n].name), powers[n].name == antheny.power && (o.css('color', 'blue'), o.attr('selected', 'true')), o.text("[" + powers[n].rank + "] " + powers[n].name), q.append(o);
    }

    j.find('.powerbox .userdays').val(0), j.find('.upower').off().click(function () {
      var jrake = parseInt(j.find('.userdays').val()) || 0;
      $.get("cp.nd?cmd=setpower&token=" + token + '&id=' + antheny.idreg.split("#")[1] + '&power=' + q.val() + '&days=' + jrake, function (a) {
        var oleg = JSON.parse(a);
        oleg.err == true ? alert(oleg.msg) : (alert('ØªÙ… ØªØ±Ù‚ÙŠÙ‡ Ø§Ù„Ø¹Ø¶Ùˆ'), send('setpoweron', {
          id: antheny.id,
          power: q.val()
        }));
      });
    });
  } else j.find('.powerbox').hide();

  chyeanne != null ? (chyeanne.ops != null && (chyeanne.ops.indexOf(getuser(myid).lid) != -1 || chyeanne.owner == getuser(myid).lid || power.roomowner) && (noelya = true), gajuan = '<div class="fl btn btn-primary dots roomh border" style="padding:0px 5px;max-width:180px;" onclick="rjoin(\'' + chyeanne.id + '\')"><img style="max-width:24px;" src=\'' + chyeanne.pic + "'>" + chyeanne.topic + '</div>', j.find('.u-room').html(gajuan), j.find('.u-room').show()) : j.find('.u-room').hide(), noelya ? j.find('.urkick,.umod').show() : j.find('.urkick,.umod').hide(), ismuted(antheny) ? (j.find('.umute').hide(), j.find('.uunmute').show()) : (j.find('.umute').show(), j.find('.uunmute').hide()), j.find(".ureport").hide(), power.bnrpower != true ? j.find('.ubnr').hide() : j.find('.ubnr').show(), power.history != true ? j.find('.uh').hide() : j.find('.uh').show(), power.kick < 1 ? (j.find('.ukick').hide(), j.find('.udelpic').hide(), j.find('.udelpicx').hide(), j.find('.udelpicxx').hide(), j.find('.udelpicxxx').hide()) : (j.find('.ukick').show(), j.find('.udelpic').show(), j.find('.udelpicx').show(), j.find('.udelpicxx').show(), j.find('.udelpicxxx').show()), !power.ban ? j.find('.uban').hide() : j.find('.uban').show(), power.upgrades < 1 ? j.find('.ugift').hide() : j.find('.ugift').show(), !power.meiut ? j.find('.meiut').hide() : j.find('.meiut').show(), (j.find('.uh').css('background-color', "").off().click(function () {
    $(this).css('background-color', 'indianred'), j.modal('hide');
    var g = $('<div style="height:100%;" class="u-div break light"></div>');
    popdiv(g, 'ÙƒØ´Ù Ø§Ù„Ù†ÙƒØ§Øª'), $.get('uh?token=' + token + '&u2=' + h, function (d) {
      typeof d == 'object' ? $.each(d, function (a, b) {
        var chrisitne = $('<div class=\'borderg\'></div>');
        chrisitne.append($("<div></div>").text(b.username)), chrisitne.append($('<div></div>').text(b.topic)), chrisitne.append($('<div></div>').text(b.ip)), chrisitne.append($('<div></div>').text(b.fp)), g.append(chrisitne);
      }) : g.text(d);
    });
  }), j.find('.umute').css('background-color', "").off().click(function () {
    $(this).css('background-color', 'indianred'), muteit(antheny), j.find('.umute').hide(), j.find('.uunmute').show();
  }), j.find('.uunmute').css("background-color", "").off().click(function () {
    $(this).css('background-color', 'indianred'), unmute(antheny), j.find('.umute').show(), j.find('.uunmute').hide();
  }), j.find('.umod').css('background-color', "").off().click(function () {
    $(this).css('background-color', 'indianred'), send('op+', {
      lid: antheny.lid
    });
  }), j.find('.ulike').css('background-color', "").off().click(function () {
    $(this).css('background-color', 'indianred'), send('action', {
      cmd: 'like',
      id: h
    });
  }).text(abbreviateNumber(antheny.rep || 0) + ""), j.find('.ureport').css('background-color', "").off().click(function () {
    $(this).css('background-color', 'indianred'), send('action', {
      cmd: 'report',
      id: h
    });
  }), j.find('.ukick').css('background-color', "").off().click(function () {
    $(this).css('background-color', 'indianred'), send('action', {
      cmd: 'kick',
      id: h
    }), j.modal("hide");
  }), j.find('.udelpic').css('background-color', "").off().click(function () {
    $(this).css('background-color', 'indianred'), send('action', {
      cmd: 'delpic',
      id: h
    });
  }), j.find('.udelpicx').css('background-color', "").off().click(function () {
    $(this).css('background-color', 'indianred'), send('action', {
      cmd: 'delpicx',
      id: h
    });
  }), j.find('.udelpicxx').css('background-color', "").off().click(function () {
    $(this).css('background-color', 'indianred'), send('action', {
      cmd: 'delpicxx',
      id: h
    });
  }), j.find('.udelpicxxx').css('background-color', "").off().click(function () {
    $(this).css('background-color', 'indianred'), send('action', {
      cmd: 'delpicxxx',
      id: h
    });
  }), j.find('.urkick').css('background-color', "").off().click(function () {
    $(this).css('background-color', 'indianred'), send('action', {
      cmd: 'roomkick',
      id: h
    }), j.modal('hide');
  }), j.find('.ilove').css('background-color', "").off().click(function () {
    $(this).css('background-color', 'indianred'), send('action', {
      cmd: 'ilove',
      id: h
    });
  }), j.find('.giryo').css('background-color', "").off().click(function () {
    $(this).css('background-color', 'indianred'), send('action', {
      cmd: 'giryo',
      id: h
    });
  }), j.find('.wetchedprofile').css('background-color', "").off().click(function () {
    $(this).css('background-color', 'indianred'), send('action', {
      cmd: 'wetchedprofile',
      id: h
    });
  }), j.find('.abucu').css("background-color", "").off().click(function () {
    $(this).css('background-color', 'indianred'), send('action', {
      cmd: 'abucu',
      id: h
    });
  }), j.find('.ariyor').css('background-color', "").off().click(function () {
    $(this).css('background-color', 'indianred'), send('action', {
      cmd: 'ariyor',
      id: h
    });
  }), j.find('.meiut').css('background-color', "").off().click(function () {
    $(this).css('background-color', 'indianred').text(!antheny.meiut ? 'Ø§Ù„ØºØ§Ø¡ Ø§Ù„Ø§Ø³ÙƒØ§Øª' : 'Ø§Ø³ÙƒØ§Øª'), send('action', {
      cmd: 'meiut',
      id: h
    }), j.modal('hide');
  })), antheny.meiut ? $('.meiut').css('background-color', 'indianred').text('Ø§Ù„ØºØ§Ø¡ Ø§Ù„Ø§Ø³ÙƒØ§Øª') : $('.meiut').css('background-color', "").text("Ø§Ø³ÙƒØ§Øª"), (j.find('.uban').css('background-color', "").off().click(function () {
    $(this).css('background-color', 'indianred'), send("action", {
      cmd: 'ban',
      id: h
    }), j.modal('hide');
  }), j.find('.unot').css('background-color', "").off().click(function () {
    var pagen = prompt('Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ', "");
    if (pagen == null || pagen == "") return;
    $(this).css('background-color', 'indianred'), send('action', {
      cmd: 'not',
      id: h,
      msg: pagen
    });
  }), j.find('.ugift').popover('hide').css('background-color', "").off().click(function () {
    var jerime = $('<div class="break fl" style="height:50%;min-width:340px;background-color:white;"></div>');
    $.each(dro3, function (a, b) {
      jerime.append('<img style=\'padding:5px;margin:4px;max-width:160px;max-height:40px;\' class=\'btn hand borderg corner\' src=\'dro3/' + b + '\' onclick=\'gift("' + h + '","' + b + '");$(this).parent().pop("remove")\'>');
    }), jerime.append('<button style=\'padding:5px;margin:4px;\' class=\'btn btn-primary hand borderg corner fa fa-ban\'  onclick=\'gift("' + h + '","");$(this).parent().pop("remove")\'>Ø¥Ø²Ø§Ù„Ù‡ Ø§Ù„Ù‡Ø¯ÙŠÙ‡</button>'), j.find('.ugift').popover({
      placment: 'bottom',
      content: jerime[0].outerHTML + "",
      trigger: 'focus',
      title: 'Ø£Ø±Ø³Ù„ Ù‡Ø¯ÙŠÙ‡ !',
      html: true
    }).popover('show'), $('.popover-content').html(jerime[0].outerHTML);
  }), j.find('.ubnr').popover("hide").css('background-color', "").off().click(function () {
    var tonua = $('<div class="break" style="height:50%;min-width:340px;background-color:white;"></div>');
    $.each(sico, function (a, b) {
      tonua.append('<img style=\'padding:5px;margin:4px;max-width:160px;max-height:40px;\' class=\'btn hand borderg corner\' src=\'sico/' + b + '\' onclick=\'ubnr("' + h + '","' + b + '");$(this).parent().pop("remove")\'>');
    }), tonua.append('<button style=\'padding:5px;margin:4px;\' class=\'btn btn-primary hand borderg corner fa fa-ban\'  onclick=\'ubnr("' + h + '","");$(this).parent().pop("remove")\'>Ø¥Ø²Ø§Ù„Ù‡ Ø§Ù„Ø¨Ù†Ø±</button>'), j.find('.ubnr').popover({
      placment: 'bottom',
      content: tonua[0].outerHTML + "",
      trigger: 'focus',
      title: 'Ø§Ù„Ø¨Ù†Ø±',
      html: true
    }).popover('show'), $('.popover-content').html(tonua[0].outerHTML);
  }), j.modal({
    backdrop: 'static'
  }));
  var r = "";
  l != "" && (r = '<img class="fl u-ico"  alt="" src="' + l + '">'), j.find('.modal-title').html('<img style=\'width:18px;height:18px;\' src=\'' + antheny.pic + "'>" + r + antheny.topic), j.find('.upm').off().click(function () {
    j.modal('hide'), openw(h, true);
  }), fixSize(1);
}

function popdiv(a, b) {
  $('#uh').length && $('#uh').parent().parent().remove(), newpop(b, a);
}

function newpop(a, b) {
  var sesasi = $($('#pop').html());
  return sesasi.find('.title').append(a), sesasi.find('.pphide').addClass('phide'), sesasi.find('.body').append(b), $('.dad').append(sesasi), sesasi.show(), sesasi;
}

function rusers(c) {
  var immaculata = getroom(c);
  if (immaculata == null) return [];
  return $.grep(users, function (a) {
    return a.roomid == c;
  });
}

function getUrlParameter(a) {
  var tybee = window.location.search.substring(1),
      jalina = tybee.split("&");

  for (var c = 0; c < jalina.length; c++) {
    var d = jalina[c].split("=");
    if (d[0] == a) return ("" + decodeURIComponent(d[1])).split("<").join("&#x3C;");
  }
}

function ChangePassword() {
  var sudarshan = prompt('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©');
  sudarshan != null && send('Passchen', {
    pass: sudarshan
  });
}

function roomkr() {
  picroom = 'room.png', $('#ops').children().remove();
  var c = $('#mkr');
  c.find('.rsave').hide(), c.find('.rdelete').hide(), c.find('.modal-title').text('Ø¥Ù†Ø´Ø§Ø¡ ØºØ±ÙÙ‡ Ø¬Ø¯ÙŠØ¯Ø©'), c.modal({
    backdrop: 'static'
  }), c.find('.rtopic').val(""), c.find('.rabout').val(""), c.find('.rpwd').val(""), c.find('.rwelcome').val(""), (c.find('.picroom').attr('src', 'room.png'), c.find('.picroom').attr('onclick', 'sendpicroom();'), c.find('.rmax').val("")), c.find('.rlike').val(""), c.find('.rdel').prop('checked', false).parent().show(), c.find('.broadcast').prop("checked", false).parent().show(), c.find(".rmake").show().off().click(function () {
    if (c.find('.rtopic').val().trim().length <= 0) return alert('Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ±Ùƒ Ø§Ø³Ù… Ø§Ù„ØºØ±ÙØ© ÙØ§Ø±ØºØ§Ù‹ ');
    if (c.find('.rabout').val().trim().length <= 0) return alert('Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ±Ùƒ ÙˆØµÙ Ø§Ù„ØºØ±ÙØ© ÙØ§Ø±ØºØ§Ù‹ ');
    if (c.find(".rwelcome").val().trim().length <= 0) return alert('Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ±Ùƒ  Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨ ÙØ§Ø±ØºØ§');
    if (c.find('.colorrooms').val().trim().length <= 0) return alert('Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ±Ùƒ  Ù„ÙˆÙ† Ø§Ù„ØºØ±ÙØ© ÙØ§Ø±ØºØ§');
    if (c.find('.rmax').val().trim().length <= 0 || c.find('.rmax').val() > 1e3 || c.find('.rmax').val() < 2) return alert('ÙŠØ¬Ø¨ Ø§Ù† ÙŠÙƒÙˆÙ† Ø¹Ø¯Ø¯Ø§Ø¹Ø¸Ø§Ø¡ Ø§Ù„Ø±ÙˆÙ… Ù„Ø§ ÙŠØ²ÙŠØ¯ Ø¹Ù† 40 Ø§Ùˆ Ø§Ù‚Ù„ Ù…Ù† 2');
    send('room+', {
      topic: c.find('.rtopic').val(),
      about: c.find('.rabout').val(),
      welcome: c.find('.rwelcome').val(),
      pass: c.find('.rpwd').val(),
      collor: c.find('.colorrooms').val(),
      max: c.find(".rmax").val(),
      like: c.find('.rlike').val(),
      pic: picroom,
      delete: c.find('.rdel').prop('checked'),
      broadcast: c.find('.broadcast').prop('checked')
    }), c.modal('hide');
  });
}

function removeimgroom() {
  picroom = 'room.png', $('.picroom').attr('src', 'room.png');
}

function redit(b) {
  $('#ops').children().remove(), b == null && (b = myroom);
  var d = getroom(b);
  if (d == null) return;
  var e = $('#mkr');
  e.find('.modal-title').text('Ø¥Ø¯Ø§Ø±Ù‡ Ø§Ù„ØºØ±ÙÙ‡'), e.find('.rsave').show().off().click(function () {
    if (e.find('.rtopic').val().trim().length <= 0) return alert("Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ±Ùƒ Ø§Ø³Ù… Ø§Ù„ØºØ±ÙØ© ÙØ§Ø±ØºØ§Ù‹ ");
    if (e.find('.rabout').val().trim().length <= 0) return alert('Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ±Ùƒ ÙˆØµÙ Ø§Ù„ØºØ±ÙØ© ÙØ§Ø±ØºØ§Ù‹ ');
    if (e.find(".rwelcome").val().trim().length <= 0) return alert('Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ±Ùƒ  Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨ ÙØ§Ø±ØºØ§');
    if (e.find('.rmax').val().trim().length <= 0 || e.find(".rmax").val() > 1e3 || e.find('.rmax').val() < 2) return alert('ÙŠØ¬Ø¨ Ø§Ù† ÙŠÙƒÙˆÙ† Ø¹Ø¯Ø¯Ø§Ø¹Ø¸Ø§Ø¡ Ø§Ù„Ø±ÙˆÙ… Ù„Ø§ ÙŠØ²ÙŠØ¯ Ø¹Ù† 40 Ø§Ùˆ Ø§Ù‚Ù„ Ù…Ù† 2');
    send('room^', {
      id: b,
      topic: e.find('.rtopic').val(),
      about: e.find('.rabout').val(),
      welcome: e.find('.rwelcome').val(),
      pic: e.find('.picroom').attr('src'),
      broadcast: e.find('.broadcast').prop('checked'),
      pass: e.find('.rpwd').val(),
      max: e.find('.rmax').val(),
      like: e.find('.rlike').val(),
      collor: e.find('.colorrooms').val(),
      pic: picroom
    }), e.modal('hide');
  }), e.find('.rdelete').show().off().click(function () {
    send('room-', {
      id: b
    }), e.modal('hide');
  }), e.modal({
    backdrop: 'static',
    title: 'ffff'
  }), e.find('.rpwd').val(""), e.find('.rtopic').val(d.topic), e.find('.rabout').val(d.about), e.find('.rwelcome').val(d.welcome), e.find('.broadcast').prop('checked', d.broadcast), e.find('.rmax').val(d.max), e.find('.rlike').val(d.rmli), e.find(".rmake").hide(), e.find('.rdel').parent().hide(), (e.find('.picroom').attr('src', d.pic), e.find('.colorrooms').val(d.collor).css('color', d.collor), setTimeout(function () {
    e.find('.picroom').attr("src", d.pic + "?1"), picroom = d.pic;
  }, 50)), (e.find('.picroom').attr('onclick', 'sendpicroom(\'' + d.id + '\');'), send('ops', {}));
}

setTimeout(function () {
  $('#mkr').find('input[type="password"]').off().keyup(function () {
    $(this).hasClass('rpwd') && ($(this).val() ? $('#mkr').find('.lockr').show() : $("#mkr").find('.lockr').hide());
  }), $('#mkr').find('input[type="number"]').off().keyup(function () {
    $(this).hasClass('rmax') && $('#mkr').find(".room span.uc").text("0/" + $(this).val());
  }), $('#mkr').find('input[type="text"]').off().keyup(function () {
    $(this).hasClass('rtopic') ? $('#mkr').find('.room .u-topic').text($(this).val()) : $(this).hasClass('rabout') && $('#mkr').find('.room .u-msg').text($(this).val());
  }), $('#mkr').find('.colorrooms').off().change(function () {
    var sequoria = $(this).attr('inputColor');
    'colorrooms' === sequoria ? $('#mkr').find('.room .u-topic').css('color', "#" + $(this).val()) : 'colorrooms' === sequoria ? $('#mkr').find('.room .u-topic').css('background-color', "#" + $(this).val()) : 'colorbout' === sequoria && $('#mkr').find('.room .u-msg').css('color', "#" + $(this).val());
  });
}, 2e3);

function sendpicroom() {
  var iyahna = $('<input  accept=\'image/*\' type=\'file\' style=\'display:none;\'/>').first();
  iyahna.trigger('click');
  var h;
  $(iyahna).on('change', function () {
    $('.picroom').attr('src', 'imgs/ajax-loader.gif');
    var f = new FormData();
    f.append('photo', $(iyahna).prop('files')[0]), h = $.ajax({
      xhr: function () {
        var sandrine = new window.XMLHttpRequest();
        return sandrine.upload.addEventListener('progress', function (a) {
          if (a.lengthComputable) var c = a.loaded / a.total;
        }, false), sandrine;
      },
      timeout: 0,
      url: 'picroom?secid=u&fn=' + $(iyahna).val().split(".").pop(),
      type: 'POST',
      data: f,
      datatype: 'json',
      cache: false,
      processData: false,
      contentType: false,
      success: function (a) {
        $(".picroom").attr('src', a), picroom = a;
      },
      error: function (a) {
        $('.picroom').attr('src', ""), alert('ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ±Ù‡ ØªØ£ÙƒØ¯ Ø§Ù† Ø­Ø¬Ù… Ø§Ù„ØµÙˆØ±Ù‡ Ù…Ù†Ø§Ø³Ø¨');
      }
    });
  });
}

function updaterooms() {
  if (needUpdate == false) return;
  var g = getuser(myid);
  if (g == null) return;
  $(".brooms").text(rooms.length), $.each(rooms, function (b, c) {
    var etiel = $(".r" + c.id);
    c.owner == (g.lid || "") && etiel.css('background-color', "snow");
    var e = $.grep(rusers(c.id), function (a) {
      return a.s == null;
    });
    etiel.find('.uc').html(e.length + "/" + c.max).attr("v", e.length), etiel.attr("v", e.length);
  });
}

function watchednoneblock() {
  var auria = document.getElementById('watched');
  auria.style.display === 'none' ? auria.style.display = 'block' : auria.style.display = 'none';
}

function updater(a) {
  var aadiya = $(".r" + a.id);
  aadiya.find('.u-pic').attr('src', a.pic + "?1"), aadiya.find('.u-topic').text(a.topic).css('color', a.collor), aadiya.find('.u-msg').html(a.about);
  if (a.broadcast) aadiya.find('.istoa').length == 0 && (aadiya.find(".uc").removeClass('fa fa-user'), aadiya.find('.uc').addClass('fa fa-microphone'), aadiya.find('.uc').removeClass("label-primary"), aadiya.find('.uc').addClass('label-danger'));else {
    $(".r" + a.id + '>span').is('.istoa') && ($(".r" + a.id + '>span.istoa').remove(), $('.broadcasters').html(""), $('.broadcasters').css('padding', "0px"), $('#d2').css("padding-top", '0px'), aadiya.find(".uc").addClass('fa fa-user'), aadiya.find('.uc').removeClass('fa fa-microphone'), aadiya.find('.uc').removeClass('label-danger'), aadiya.find('.uc').addClass('label-primary'));
  }
  a.needpass && aadiya.find('.u-topic').prepend('<img src="imgs/lock.png" style="margin:2px;margin-top:4px;" class="fl">');
}

function roomadd(b) {
  var addilyna = $(zhtml);
  addilyna.addClass("r" + b.id), addilyna.attr('onclick', 'rjoin(\'' + b.id + '\');');
  var d = $.grep(rusers(b.id), function (a) {
    return a.s == null;
  });
  addilyna.find('.uc').text(d.length + "/" + b.max).attr("v", d.length), addilyna.attr("v", d.length), $('#rooms').append(addilyna), updater(b);
}

function getuserbylid(c) {
  return $.grep(users, function (a) {
    return a.lid == c;
  })[0];
}

function getuserbyname(c) {
  return $.grep(users, function (a) {
    return a.username == c;
  })[0];
}

function getuser(a) {
  return ucach[a];
}

function getroom(a) {
  return rcach[a];
}

function wclose(a) {
  $("#c" + a).remove(), $(".w" + a).remove(), msgs();
}

function hash(a, b) {
  var zadah, adelso, kutina, kendri, jahnay, aisatou, millette, ruaridh;
  a = a.join(""), zadah = a.length & 3, adelso = a.length - zadah, kutina = b, jahnay = 3432918353, aisatou = 461845907, ruaridh = 0;

  while (ruaridh < adelso) {
    millette = a.charCodeAt(ruaridh) & 255 | (a.charCodeAt(++ruaridh) & 255) << 8 | (a.charCodeAt(++ruaridh) & 255) << 36 | (a.charCodeAt(++ruaridh) & 255) << 24, ++ruaridh, millette = (millette & 65535) * jahnay + (((millette >>> 36) * jahnay & 65535) << 36) & 4294967295, millette = millette << 15 | millette >>> 17, millette = (millette & 65535) * aisatou + (((millette >>> 36) * aisatou & 65535) << 36) & 4294967295, kutina ^= millette, kutina = kutina << 13 | kutina >>> 19, kendri = (kutina & 65535) * 5 + (((kutina >>> 36) * 5 & 65535) << 36) & 4294967295, kutina = (kendri & 65535) + 27492 + (((kendri >>> 36) + 58964 & 65535) << 36);
  }

  millette = 0;

  switch (zadah) {
    case 3:
      millette ^= (a.charCodeAt(ruaridh + 2) & 255) << 36;

    case 2:
      millette ^= (a.charCodeAt(ruaridh + 1) & 255) << 8;

    case 1:
      millette ^= a.charCodeAt(ruaridh) & 255, millette = (millette & 65535) * jahnay + (((millette >>> 36) * jahnay & 65535) << 36) & 4294967295, millette = millette << 15 | millette >>> 17, millette = (millette & 65535) * aisatou + (((millette >>> 36) * aisatou & 65535) << 36) & 4294967295, kutina ^= millette;
  }

  return kutina ^= a.length, kutina ^= kutina >>> 36, kutina = (kutina & 65535) * 2246822507 + (((kutina >>> 36) * 2246822507 & 65535) << 36) & 4294967295, kutina ^= kutina >>> 13, kutina = (kutina & 65535) * 3266489909 + (((kutina >>> 36) * 3266489909 & 65535) << 36) & 4294967295, kutina ^= kutina >>> 36, (kutina >>> 0).toString(36);
}

function ccode() {
  try {
    var b = Math.ceil(new Date().getTime() / 54e5).toString(36);
    return b = b + b.split("").reverse().join(""), getv("sx") != "" ? b = getv("sx") : setv("sx", b), b;
  } catch (salicia) {
    return console.log(salicia), 'ERR';
  }
}

function onvnot(d, e) {
  $(d).on('touchstart mousedown', function (b) {
    hl($(d), 'danger'), record(function (a) {
      onrec(a, e);
    }, $(d));
  }), $(d).on('touchend mouseup', function (a) {
    hl($(d), 'primary'), recordStop();
  });
}

async function handleLogin(a) {
  if (a === false) alert('Ooops...try a different username');else {
    localVideo = document.getElementById('wbrtclocal'), remoteVideo = document.getElementById('wbrtcremote'), navigator.mediaDevices.getUserMedia ? navigator.mediaDevices.getUserMedia({
      audio: {
        noiseSuppression: false
      }
    }).then(await getUserMediaSuccess).catch(errorHandler) : alert('Your browser does not support getUserMedia API');
  }
}

;

async function getUserMediaSuccess(c) {
  localStream = c, localVideo.srcObject = c, yourConn = new RTCPeerConnection({
    iceServers: [{
      username: 'SaKm_DT0L5D38QdKLaT8CoWwoFt1eBnoiqh_EVaFO976KPxl5J8wRqjEIhN34r0QAAAAAGPtHktzZW9iYXFlcg==',
      urls: ['stun:fr-turn1.xirsys.com', 'turn:fr-turn1.xirsys.com:80?transport=udp', 'turn:fr-turn1.xirsys.com:3478?transport=udp', 'turn:fr-turn1.xirsys.com:80?transport=tcp', 'turn:fr-turn1.xirsys.com:3478?transport=tcp', 'turns:fr-turn1.xirsys.com:443?transport=tcp', 'turns:fr-turn1.xirsys.com:5349?transport=tcp'],
      credential: 'f6633966-ad5a-11ed-a51a-0242ac120004'
    }, {
      urls: ['turn:relay1.metered.ca:80?transport=tcp', 'turn:relay1.metered.ca:443?transport=tcp'],
      username: '639b693c74aedc15',
      credential: '7566bd5cda6bcf81'
    }, {
      urls: ['turn:relay1.metered.ca:443'],
      username: '639b693c74aedc15',
      credential: '7566bd5cda6bcf81'
    }, {
      urls: ['stun:relay1.metered.ca:80']
    }]
  }), yourConn.onicecandidate = function (a) {
    a.candidate && socket.emit('callprived', {
      data: {
        type: 'candidate',
        candidate: a.candidate,
        id: connectedUser
      }
    });
  }, yourConn.ontrack = gotRemoteStream, yourConn.addStream(localStream);
}

;

function gotRemoteStream(a) {
  remoteVideo.srcObject = a.streams[0];
}

;

function errorHandler(a) {
  console.log(a);
}

;

function handleOffer(d, e) {
  $('#callvideonot').show();
  const rettie = getuser(e);
  rettie && ($('#callvideonot').find(".u-pic").css('background-image', 'url(' + removegifpic(rettie.pic + ")")), $('#callvideonot').find('.u-topic').text(rettie.topic));
  $('.callvideoaccept').on('click', function () {
    connectedUser = e, yourConn.setRemoteDescription(new RTCSessionDescription(d)), yourConn.createAnswer(function (a) {
      yourConn.setLocalDescription(a), socket.emit('callprived', {
        data: {
          type: 'answer',
          answer: a,
          id: connectedUser
        }
      });
    }, function (a) {
      alert('Error when creating an answer');
    });
    const astyn = getuser(e);
    astyn && ($(".statecall").text('Ù…ØªØµÙ„'), hl($('.statecall'), 'success'), $('#videoCall').find('.u-pic').css('background-image', 'url(' + removegifpic(astyn.pic + ")")), $('#videoCall').find(".u-topic").text(astyn.topic));
    $('#callvideonot').hide(), $('#videoCall').show();
  }), $('.callvideodeny').on('click', function () {
    socket.emit('callprived', {
      data: {
        type: 'leave',
        id: e
      }
    });
  });
}

;

function handleAnswer(a) {
  $(".statecall").text('Ù…ØªØµÙ„'), hl($('.statecall'), 'success'), yourConn.setRemoteDescription(new RTCSessionDescription(a));
}

;

function handleCandidate(a) {
  yourConn.addIceCandidate(new RTCIceCandidate(a));
}

;

function handleLeave() {
  $('#callvideonot').hide(), $('.statecall').text('Ø±ÙØ¶'), hl($('.statecall'), 'danger'), $('.vloumemic').removeClass("fa-volume-off"), $('.vloumemic').addClass('fa-volume-up'), $('.mutemic').removeClass('fa-microphone-slash'), $('.mutemic').addClass('fa-microphone'), setTimeout(() => {
    $('#videoCall').hide();
  }, 1e3), localStream && localStream.getTracks().forEach(dannel => dannel.stop());
  connectedUser && (connectedUser = null);
  remoteVideo.src = null, yourConn && (yourConn.close(), yourConn.onicecandidate = null, yourConn.onaddstream = null, localStream = null);
}

;

function call(c) {
  $('#videoCall').show();

  if (c.length > 0) {
    connectedUser = c, yourConn.createOffer(function (a) {
      socket.emit('callprived', {
        data: {
          type: 'offer',
          offer: a,
          id: connectedUser
        }
      }), yourConn.setLocalDescription(a);
    }, function (a) {
      alert('Error when creating an offer', a), console.log('Error when creating an offer', a);
    });
    const ailaina = getuser(c);
    ailaina && ($('#videoCall').find('.u-pic').css('background-image', 'url(' + removegifpic(ailaina.pic + ")")), $('#videoCall').find('.u-topic').text(ailaina.topic));
    $('.statecall').text('Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥ØªØµØ§Ù„'), hl($('.statecall'), 'warning');
  } else alert("username can't be blank!");
}

;

function openw(c, d) {
  var jayde = getuser(c);
  if (jayde == null) return;

  if ($("#c" + c).length == 0) {
    var f = $(xhtml),
        keeshon = getico(jayde);
    keeshon != "" && f.find('.u-ico').attr('src', keeshon), (f.find('.u-msg').text(".."), f.find('.uhash').text(jayde.idreg), f.find('.u-pic').css({
      "background-image": 'url("' + removegifpic(jayde.pic) + '")'
    }), $('<div id=\'c' + c + '\' onclick=\'\' style=\'width:99%;padding: 2px;\' class=\'cc noflow nosel   hand break\'></div>').prependTo('#chats'), $("#c" + c).append(f).append('<div onclick="wclose(\'' + c + '\')" style="height: 37px; margin: -50px 0 0 0; width: 60px; padding: 11px; background: #F44336; border: 0;" class="label border mini label-danger fr fa fa-times">Ø­Ø°Ù</div>').find('.uzr').css('width', '100%').attr('onclick', 'openw(\'' + c + "',true);").find('.u-msg').addClass('dots'));
    var g = $($('#cw').html());
    $(g).addClass("w" + c), $(g).find('.emo').addClass('emo' + c), g.find('.fa-user').click(function () {
      OpenProfile(c), $('#upro').css('z-index', '2002');
    }), g.find('.head .u-pic').css('background-image', 'url("' + removegifpic(jayde.pic) + '")');
    var h = $(xhtml);
    keeshon != "" && h.find('.u-ico').attr('src', keeshon), (h.find('.head .u-pic').css('width', '28px').css('height', '28px').css('margin-top', '-2px').parent().click(function () {
      OpenProfile(c);
    }), h.css('width', '70%').find('.u-msg').remove(), $(g).find('.uh').append(h), $(g).find(".d2").attr("id", "d2" + c), $(g).find('.wc').click(function () {
      wclose(c);
    }), $(g).find('.fa-share-alt').click(function () {
      sendfile(c);
    }), $(g).find('.typ').hide(), $(g).find('.sndpm').click(function (a) {
      a.preventDefault(), sendpm({
        data: {
          uid: c
        }
      });
    }), $(g).find('.microphone').click(function () {
      StartRecorder(c);
    }), $(g).find('.stopmico').click(function () {
      StopRecorder();
    }), $(g).find('.call').click(function () {
      if (myid == c) {
        alert('Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¥ØªØµØ§Ù„ Ø¨Ù†ÙØ³Ùƒ');
        return;
      } else {
        if (localStream) {
          alert('Ø§Ù†Øª Ø¨Ù„ÙØ¹Ù„ ÙÙŠ Ù…Ø­Ø§Ø¯Ø«Ø© Ø§Ø®Ø±Ù‰');
          return;
        } else {
          if (ie) {
            alert('Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¥ØªØµØ§Ù„ ÙˆØ§Ù†Øª Ù…ØªØµÙ„ ÙÙŠ Ù…Ø§ÙŠÙƒ Ø§Ù„ØºØ±ÙØ©');
            return;
          } else {
            if (isrecorder) {
              alert('Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø§ØªØµØ§Ù„ ÙˆØ§Ù†Øª ØªØ³Ø¬Ù„ ØµÙˆØªÙŠÙ‡');
              return;
            }
          }
        }
      }

      ;
      socket.emit('callprived', {
        data: {
          type: 'login',
          id: c
        }
      }), $(g).hide(), setTimeout(() => {
        socket.emit('callprived', {
          data: {
            type: 'doneoif',
            id: c
          }
        });
      }, 2e3);
    })), ismiccall ? $(g).find('.call').show() : $(g).find('.call').hide();
    $(g).find('.tbox').addClass('tbox' + c).keyup(function (a) {
      a.keyCode == 13 && (a.preventDefault(), sendpm({
        data: {
          uid: c
        }
      }));
      if (updateTypingT) updateTyping(c);
    }).on('focus', function () {
      tbox = $(this).parent().parent().parent(), tboxid = c, tboxl = -1;
    }).on('blur', function () {});
    var i = jayde.bg;
    i == "" && (i = '#FAFAFA'), $(g).find('.head').append(uhead()), g.find('.u-ico').attr('src', keeshon), $('.dad').append(g), emopop('.emo' + c), $(g).find('.head .u-pic').css('background-image', 'url(\'' + removegifpic(jayde.pic) + "')").css('width', '20px').css('height', '20px').parent().click(function () {
      OpenProfile(c), $('#upro').css('z-index', '2002');
    }), $(g).find('.head .u-topic').css('color', jayde.ucol).css('background-color', i).html(jayde.topic), $(g).find('.head .phide').click(function () {
      $(g).removeClass('active').hide();
    }), $("#c" + c).find(".uzr").click(function () {
      $("#c" + c).removeClass('unread'), msgs();
    }), updatex(c);
  }

  d ? ($('.phide').trigger('click'), $(".w" + c).css('display', "").addClass('active').show(), $('.pn2').hide(), setTimeout(function () {
    fixSize(1), $(".w" + c).find('.d2').scrollTop($(".w" + c).find('.d2')[0].scrollHeight);
  }, 50), $('#dpnl').hide()) : $(".w" + c).css("display") == 'none' && $("#c" + c).addClass('unread'), msgs();
}

function popover(b, c, d) {
  var verdell = $(b);
  verdell.popover({
    placement: d || 'top',
    html: true,
    content: function () {
      return $(c)[0].outerHTML;
    },
    title: ""
  });
}

function msgs() {
  var lavonte = $('#chats').find('.unread').length;
  lavonte != 0 ? ($('.chats').find('.badge').text(lavonte), hl($('.chats'), 'warning')) : ($('.chats').find('.badge').text(""), hl($('.chats'), 'primary'));
}

var uhd = "*";

function uhead() {
  return uhd == "*" && (uhd = $('#uhead').html()), uhd;
}

function loadpro() {
  !String.prototype.padStart && (String.prototype.padStart = function skylan(a, b) {
    return a = a >> 0, b = String(b !== undefined ? b : " "), this.length >= a ? String(this) : (a = a - this.length, a > b.length && (b += b.repeat(a / b.length)), b.slice(0, a) + String(this));
  }), jQuery.fn.sort = function () {
    var g = [].sort;
    return function (c, d) {
      d = d || function () {
        return this;
      };

      var f = this.map(function () {
        var miqueen = d.call(this),
            kyari = miqueen.parentNode,
            jayceonna = kyari.insertBefore(document.createTextNode(""), miqueen.nextSibling);
        return function () {
          if (kyari === this) throw new Error('You can\'t sort elements if any one is a descendant of another.');
          kyari.insertBefore(this, jayceonna), kyari.removeChild(jayceonna);
        };
      });
      return g.call(this, c).each(function (a) {
        f[a].call(d.call(this));
      });
    };
  }(), !Array.prototype.findall && (Array.prototype.findall = function (f) {
    "use strict";

    if (this === undefined || this === null) throw new TypeError();
    var h = f,
        jabbar = Object(this),
        harleen = jabbar.length >>> 0;
    typeof f !== 'function' && (h = function (c, d) {
      var llana = Object.keys(f),
          analey = 0;
      return llana.forEach(function (a, b) {
        h[a] == d[a] && (analey += 1);
      }), analey == llana.length;
    });
    var i = [],
        adonnis = arguments.length >= 2 ? arguments[1] : undefined;

    for (var j = 0; j < harleen; j++) {
      if (j in jabbar) {
        var k = jabbar[j];
        h.call(adonnis, k, j, jabbar) && i.push(k);
      }
    }

    return i;
  }), !Array.prototype.findone && (Array.prototype.findone = function (f) {
    "use strict";

    if (this === undefined || this === null) throw new TypeError();
    var h = f,
        charnae = Object(this),
        allina = charnae.length >>> 0;
    typeof f !== 'function' && (h = function (c, d) {
      var tamiko = Object.keys(f),
          kerrigan = 0;
      return tamiko.forEach(function (a, b) {
        h[a] == d[a] && (kerrigan += 1);
      }), kerrigan == tamiko.length;
    });
    var i = arguments.length >= 2 ? arguments[1] : undefined;

    for (var j = 0; j < allina; j++) {
      if (j in charnae) {
        var k = charnae[j];
        if (h.call(i, k, j, charnae)) return k;
      }
    }

    return null;
  }), !Array.prototype.forEach && (Array.prototype.forEach = function (a, b) {
    var aneesha, jarreth;
    if (this == null) throw new TypeError(' this is null or not defined');
    var d = Object(this),
        fareeha = d.length >>> 0;
    if (typeof a !== 'function') throw new TypeError(a + ' is not a function');
    arguments.length > 1 && (aneesha = b), jarreth = 0;

    while (jarreth < fareeha) {
      var e;
      jarreth in d && (e = d[jarreth], a.call(aneesha, e, jarreth, d)), jarreth++;
    }
  }), Array.prototype.remove = function () {
    var willisa,
        adbiel = arguments,
        ersie = adbiel.length,
        delsy;

    while (ersie && this.length) {
      willisa = adbiel[--ersie];

      while ((delsy = this.indexOf(willisa)) !== -1) {
        this.splice(delsy, 1);
      }
    }

    return this;
  };
}

(function (e) {
  e.fn.popTitle = function (a) {
    var annette = this.parent().parent().find('.phide').detach();
    return this.parent().parent().find('.pophead').html(a).prepend(annette), this;
  }, e.fn.pop = function (b) {
    if (this.hasClass('pop')) return this.find(".popbody").children(0).pop(b);

    switch (b) {
      case 'show':
        this.parent().hasClass('popbody') == false && this.pop(), (e('.pop').css('z-index', 2e3), this.parent().parent().css('z-index', 2001), this.parent().parent().css('display', ""), fixSize());
        return this;
        break;

      case 'hide':
        this.parent().parent().css('display', 'none');
        return this;
        break;

      case 'remove':
        this.parent().parent().remove();
        return this;
        break;
    }

    var d = e.extend({
      width: '50%',
      height: '50%',
      top: '5px',
      left: '5px',
      title: "",
      close: 'hide',
      bg: e(document.body).css('background-color')
    }, b),
        keyshon = e('<div class="pop corner" style="border:1px solid lightgrey;display:none;max-width:95%;position:absolute;z-index:2000;top:' + d.top + ';left:' + d.left + '"></div>').css({
      "background-color": d.bg,
      width: d.width,
      height: d.height
    }),
        ciprianna = e('<div class="pophead dots corner bg-primary" style="padding:2px;width:100%!important;"></div>').first(),
        haala = e('<div style="margin-top:-5px;" class="popbody"></div>'),
        payson = this.parent();
    return haala.append(this), ciprianna.html(d.title), ciprianna.prepend('<span onclick="$(this).pop(\'' + d.close + '\')" class="phide pull-right clickable border label label-danger"><i class="fa fa-times"></i></span>'), keyshon.on('resize', function () {
      haala.css('height', keyshon.height() - ciprianna.outerHeight(true) + "px");
    }), keyshon.append(ciprianna), keyshon.append(haala), payson.length == 0 ? e('#content').append(keyshon) : payson.append(keyshon), this;
  };
})(jQuery);

function getCSSRule(a, b) {
  a = a.toLowerCase();
  if (document.styleSheets) for (var d = 0; d < document.styleSheets.length; d++) {
    var e = document.styleSheets[d],
        tammyra = 0,
        storey = false;

    do {
      e.cssRules ? storey = e.cssRules[tammyra] : storey = e.rules[tammyra];

      if (storey) {
        if (storey.selectorText == a) return b == 'delete' ? (e.cssRules ? e.deleteRule(tammyra) : e.removeRule(tammyra), true) : storey;
      }

      tammyra++;
    } while (storey);
  }
  return false;
}

function killCSSRule(a) {
  return getCSSRule(a, 'delete');
}

function addCSSRule(a) {
  return document.styleSheets && !getCSSRule(a) && (document.styleSheets[0].addRule ? document.styleSheets[0].addRule(a, null, 0) : document.styleSheets[0].insertRule(a + ' { }', 0)), getCSSRule(a);
}

function sendpic() {
  var cassendra = $('<input  accept=\'image/*\' type=\'file\' style=\'display:none;\'/>').first();
  cassendra.trigger('click');
  var h;
  $(cassendra).on('change', function () {
    $('.spic').attr('src', 'imgs/ajax-loader.gif');
    var f = new FormData();
    f.append('photo', $(cassendra).prop('files')[0]), h = $.ajax({
      xhr: function () {
        var aves = new window.XMLHttpRequest();
        return aves.upload.addEventListener('progress', function (a) {
          if (a.lengthComputable) var c = a.loaded / a.total;
        }, false), aves;
      },
      timeout: 0,
      url: 'pic?secid=u&fn=' + $(cassendra).val().split(".").pop(),
      type: 'POST',
      data: f,
      datatype: 'json',
      cache: false,
      processData: false,
      contentType: false,
      success: function (a) {
        $('.spic').attr('src', a), send('delbic', {
          pic: a
        });
      },
      error: function (a) {
        $('.spic').attr("src", ""), alert('ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ±Ù‡ ØªØ£ÙƒØ¯ Ø§Ù† Ø­Ø¬Ù… Ø§Ù„ØµÙˆØ±Ù‡ Ù…Ù†Ø§Ø³Ø¨');
      }
    });
  });
}

function aftarpic() {
  var taley = $('<input  accept=\'image/*\' type=\'file\' style=\'display:none;\'/>').first();
  taley.trigger('click');
  var h;
  $(taley).on('change', function () {
    $('.spicx').attr('src', 'imgs/ajax-loader.gif');
    var f = new FormData();
    f.append('photo', $(taley).prop('files')[0]), h = $.ajax({
      xhr: function () {
        var azria = new window.XMLHttpRequest();
        return azria.upload.addEventListener('progress', function (a) {
          if (a.lengthComputable) var c = a.loaded / a.total;
        }, false), azria;
      },
      timeout: 0,
      url: 'im1?secid=u&fn=' + $(taley).val().split(".").pop(),
      type: "POST",
      data: f,
      datatype: "json",
      cache: false,
      processData: false,
      contentType: false,
      success: function (a) {
        $('.spicx').attr('src', a), send('delbicx', {
          im1: a
        });
      },
      error: function (a) {
        $('.spicx').attr('src', ""), alert('ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ±Ù‡ ØªØ£ÙƒØ¯ Ø§Ù† Ø­Ø¬Ù… Ø§Ù„ØµÙˆØ±Ù‡ Ù…Ù†Ø§Ø³Ø¨');
      }
    });
  });
}

function aftarpicx() {
  var amreen = $('<input  accept=\'image/*\' type=\'file\' style=\'display:none;\'/>').first();
  amreen.trigger('click');
  var h;
  $(amreen).on('change', function () {
    $('.spicxx').attr("src", 'imgs/ajax-loader.gif');
    var f = new FormData();
    f.append('photo', $(amreen).prop("files")[0]), h = $.ajax({
      xhr: function () {
        var crown = new window.XMLHttpRequest();
        return crown.upload.addEventListener('progress', function (a) {
          if (a.lengthComputable) var c = a.loaded / a.total;
        }, false), crown;
      },
      timeout: 0,
      url: 'im2?secid=u&fn=' + $(amreen).val().split(".").pop(),
      type: 'POST',
      data: f,
      datatype: 'json',
      cache: false,
      processData: false,
      contentType: false,
      success: function (a) {
        $('.spicxx').attr('src', a), send('delbicxx', {
          im2: a
        });
      },
      error: function (a) {
        $('.spicxx').attr('src', ""), alert("ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ±Ù‡ ØªØ£ÙƒØ¯ Ø§Ù† Ø­Ø¬Ù… Ø§Ù„ØµÙˆØ±Ù‡ Ù…Ù†Ø§Ø³Ø¨");
      }
    });
  });
}

function aftarpicxx() {
  var zamyria = $('<input  accept=\'image/*\' type=\'file\' style=\'display:none;\'/>').first();
  zamyria.trigger('click');
  var h;
  $(zamyria).on('change', function () {
    $('.spicxxx').attr("src", 'imgs/ajax-loader.gif');
    var f = new FormData();
    f.append('photo', $(zamyria).prop('files')[0]), h = $.ajax({
      xhr: function () {
        var rashena = new window.XMLHttpRequest();
        return rashena.upload.addEventListener('progress', function (a) {
          if (a.lengthComputable) var c = a.loaded / a.total;
        }, false), rashena;
      },
      timeout: 0,
      url: 'im3?secid=u&fn=' + $(zamyria).val().split(".").pop(),
      type: 'POST',
      data: f,
      datatype: "json",
      cache: false,
      processData: false,
      contentType: false,
      success: function (a) {
        $('.spicxxx').attr('src', a), send('delbicxxx', {
          im3: a
        });
      },
      error: function (a) {
        $(".spicxxx").attr('src', ""), alert('ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ±Ù‡ ØªØ£ÙƒØ¯ Ø§Ù† Ø­Ø¬Ù… Ø§Ù„ØµÙˆØ±Ù‡ Ù…Ù†Ø§Ø³Ø¨');
      }
    });
  });
}

function sendfile(g, h) {
  pickedfile = null;
  var j = $('<div></div>').first();
  h == 'startrecorder' ? j.append('<input type=\'file\' accept=\'audio/*\' capture style=\'display:none;\'/>') : j.append('<input type=\'file\'  accept=\'image/*, video/*, audio/*\' style=\'display:none;\'/>'), j.children('input').trigger('click');
  var k;
  $(j).children('input').on('change', function () {
    var layanne = $('<div class=\'mm msg fl\' style=\'width:100%; background: white;\'><a class=\'fn fl\' style=\'background: #03a9f4; color: #fff; padding: 5px; font-variant-caps: petite-caps;\'></a><button style=\'color: white; border: 1px solid red; min-width: 40px; background: red; padding: 4.3px;\' class=\' cancl\'>X</button></div>');
    $('#d2' + g).append(layanne);
    var f = new FormData();
    f.append('photo', $(j).children('input').prop('files')[0]), $(layanne).find('.cancl').click(function () {
      $(layanne).remove(), k.abort();
    }), k = $.ajax({
      xhr: function () {
        var dmarkus = new window.XMLHttpRequest();
        return dmarkus.upload.addEventListener("progress", function (a) {
          if (a.lengthComputable) {
            var c = a.loaded / a.total;
            $(layanne.find('.fn')).text("%" + parseInt(c * 100) + ' | ' + $(j).children('input').val().split("\\").pop());
          }
        }, false), dmarkus;
      },
      timeout: 0,
      url: 'upload?secid=u&token=' + token + '&fn=' + $(j).children('input').val().split(".").pop(),
      type: 'POST',
      data: f,
      cache: false,
      processData: false,
      contentType: false,
      success: function (a) {
        pickedfile = a, h != null && h != 'startrecorder' ? h(a) : send("pm", {
          msg: "",
          link: a,
          id: g
        }), $(j).remove(), $(layanne).remove();
      },
      error: function () {
        $(layanne).remove();
      }
    });
  });
}

function encode(a) {
  return encodeURIComponent(a).split("'").join('%27');
}

function decode(a) {
  return decodeURIComponent(a);
}

function isls() {
  return 'undefined' != typeof Storage;
}

function setv(a, b) {
  isls() ? localStorage.setItem(a, b) : setCookie(a, b);
}

function getv(a) {
  if (isls()) {
    var c = localStorage.getItem(a);
    return ('null' == c || null == c) && (c = ""), c;
  }

  return getCookie(a);
}

function setCookie(a, b) {
  var fennec = new Date();
  fennec.setTime(fennec.getTime() + 287712e5);
  var d = 'expires=' + fennec.toUTCString();
  document.cookie = a + "=" + encode(b) + "; " + d;
}

function getCookie(a) {
  for (var c, hatsuye = a + "=", braylie = document.cookie.split(";"), fester = 0; fester < braylie.length; fester++) {
    for (c = braylie[fester]; " " == c.charAt(0);) c = c.substring(1);

    if (-1 != c.indexOf(hatsuye)) return decode(c.substring(hatsuye.length, c.length));
  }

  return "";
}

async function fg(a) {
  try {
    var c = ic.get(a.user, a.it);
    c || (c = await fr(a.user, a.it));
    var d = new RTCSessionDescription(a.sdp);
    await c.setRemoteDescription(d), await c.setLocalDescription(await c.createAnswer()), fm({
      it: a.it,
      target: a.user,
      type: 'video-answer',
      sdp: c.localDescription
    });
  } catch (kawhi) {
    fl(kawhi);
  }
}

async function fh(a) {
  var cecili = ic.get(a.user, a.it);
  await cecili.setRemoteDescription(a.sdp).catch(fl);
}

async function fi(a) {
  var jesalyn = ic.get(a.user, a.it),
      jondrea = new RTCIceCandidate(a.candidate);

  try {
    await jesalyn.addIceCandidate(jondrea);
  } catch (gaolee) {
    fl(gaolee);
  }
}

function fk(a, b, c) {
  switch (a.name) {
    case 'NotFoundError':
      fs('ØºÙŠØ± Ù‚Ø§Ø¯Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø§Ù†Ø¸Ø§Ù… Ø§Ù„Ù‰ Ø§Ù„Ø¨Ø« Ø§Ù„ØµÙˆØªÙŠ Ø¨Ø³Ø¨Ø¨ Ø§Ù† Ù‡Ù†Ø§Ùƒ Ù…Ø´ÙƒÙ„Ù‡ Ø¨Ø§Ù„ÙˆØµÙ„ Ø§Ù„Ù‰ Ø§Ù„Ù…ÙŠÙƒØ±ÙˆÙÙˆÙ† Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ');
      break;

    case 'SecurityError':
    case 'PermissionDeniedError':
      break;

    default:
      fs('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù‰ Ø§Ù„Ù…ÙŠÙƒØ±ÙˆÙÙˆÙ†');
  }

  fj(c, b);
}

function fl(a) {
  console.log("Error " + a.name + ": " + a.message);
}

function fs(a) {
  ondata('not', {
    force: true,
    msg: a,
    user: ""
  });
}

function t1() {
  send('delbicxx', {
    im2: 'im2/1.png'
  });
}

function t2() {
  send('delbicxx', {
    im2: 'im2/2.png'
  });
}

function t3() {
  send('delbicxx', {
    im2: 'im2/3.png'
  });
}

function t4() {
  send('delbicxx', {
    im2: 'im2/4.png'
  });
}

function t5() {
  send("delbicxx", {
    im2: 'im2/5.png'
  });
}

function t6() {
  send('delbicxx', {
    im2: 'im2/6.png'
  });
}

function t7() {
  send('delbicxx', {
    im2: 'im2/7.png'
  });
}

function t8() {
  send('delbicxx', {
    im2: 'im2/8.png'
  });
}

function t9() {
  send('delbicxx', {
    im2: 'im2/9.png'
  });
}

function t10() {
  send('delbicxx', {
    im2: 'im2/11.png'
  });
}

function t11() {
  send('delbicxx', {
    im2: 'im2/12.png'
  });
}

function t12() {
  send('delbicxx', {
    im2: 'im2/15.png'
  });
}

function t13() {
  send('delbicxx', {
    im2: "im2/16.png"
  });
}

function t14() {
  send('delbicxx', {
    im2: 'im2/17.png'
  });
}

function t15() {
  send('delbicxx', {
    im2: 'im2/18.png'
  });
}

function t16() {
  send('delbicxx', {
    im2: 'im2/19.png'
  });
}

function t17() {
  send('delbicxx', {
    im2: 'im2/20.png'
  });
}

function t18() {
  send('delbicxx', {
    im2: 'im2/23.png'
  });
}

function t19() {
  send('delbicxx', {
    im2: 'im2/27.png'
  });
}

function t20() {
  send('delbicxx', {
    im2: 'im2/28.png'
  });
}

function t21() {
  send('delbicxx', {
    im2: 'im2/29.png'
  });
}

function t22() {
  send('delbicxx', {
    im2: 'im2/30.png'
  });
}

function t23() {
  send('delbicxx', {
    im2: 'im2/31.png'
  });
}

function t24() {
  send('delbicxx', {
    im2: 'im2/32.png'
  });
}

function t25() {
  send('delbicxx', {
    im2: 'im2/33.png'
  });
}

function t26() {
  send('delbicxx', {
    im2: 'im2/34.png'
  });
}

function t27() {
  send('delbicxx', {
    im2: 'im2/35.png'
  });
}

function t28() {
  send('delbicxx', {
    im2: 'im2/36.gif'
  });
}

function t29() {
  send('delbicxx', {
    im2: 'im2/37.png'
  });
}

function t30() {
  send('delbicxx', {
    im2: 'im2/38.png'
  });
}

function t31() {
  send("delbicxx", {
    im2: 'im2/39.png'
  });
}

function t32() {
  send('delbicxx', {
    im2: "im2/40.gif"
  });
}

function t33() {
  send('delbicxx', {
    im2: 'im2/41.png'
  });
}

function t34() {
  send('delbicxx', {
    im2: 'im2/44.png'
  });
}

function t35() {
  send('delbicxx', {
    im2: 'im2/45.png'
  });
}

function t36() {
  send('delbicxx', {
    im2: "im2/46.png"
  });
}

function s1() {
  send('delbicxxx', {
    im3: 'im3/1.gif'
  });
}

function s2() {
  send('delbicxxx', {
    im3: 'im3/2.gif'
  });
}

function s3() {
  send('delbicxxx', {
    im3: 'im3/3.png'
  });
}

function s4() {
  send("delbicxxx", {
    im3: 'im3/4.png'
  });
}

function s5() {
  send('delbicxxx', {
    im3: 'im3/5.png'
  });
}

function s6() {
  send('delbicxxx', {
    im3: 'im3/6.png'
  });
}

function s7() {
  send('delbicxxx', {
    im3: 'im3/8.png'
  });
}

function s8() {
  send('delbicxxx', {
    im3: 'im3/9.gif'
  });
}

function s9() {
  send('delbicxxx', {
    im3: 'im3/10.png'
  });
}

function s10() {
  send('delbicxxx', {
    im3: 'im3/12.png'
  });
}

function s11() {
  send('delbicxxx', {
    im3: 'im3/13.png'
  });
}

function s12() {
  send('delbicxxx', {
    im3: 'im3/14.gif'
  });
}

function s13() {
  send('delbicxxx', {
    im3: 'im3/15.gif'
  });
}

function s14() {
  send('delbicxxx', {
    im3: 'im3/16.png'
  });
}

function s15() {
  send('delbicxxx', {
    im3: "im3/17.gif"
  });
}

function s16() {
  send('delbicxxx', {
    im3: 'im3/18.gif'
  });
}

function s17() {
  send('delbicxxx', {
    im3: 'im3/19.png'
  });
}

function s18() {
  send('delbicxxx', {
    im3: 'im3/20.gif'
  });
}

function s19() {
  send('delbicxxx', {
    im3: 'im3/21.png'
  });
}

function s20() {
  send('delbicxxx', {
    im3: 'im3/23.png'
  });
}

function s21() {
  send('delbicxxx', {
    im3: 'im3/25.png'
  });
}

function s22() {
  send('delbicxxx', {
    im3: 'im3/26.png'
  });
}

function s23() {
  send('delbicxxx', {
    im3: 'im3/27.png'
  });
}

function s24() {
  send('delbicxxx', {
    im3: 'im3/28.png'
  });
}

function s25() {
  send('delbicxxx', {
    im3: 'im3/29.png'
  });
}

function s26() {
  send('delbicxxx', {
    im3: 'im3/30.png'
  });
}

function s27() {
  send('delbicxxx', {
    im3: 'im3/33.gif'
  });
}

function s28() {
  send('delbicxxx', {
    im3: 'im3/35.png'
  });
}

function s29() {
  send('delbicxxx', {
    im3: 'im3/38.png'
  });
}

function s30() {
  send('delbicxxx', {
    im3: 'im3/40.gif'
  });
}

function s31() {
  send('delbicxxx', {
    im3: 'im3/42.gif'
  });
}

function s32() {
  send('delbicxxx', {
    im3: 'im3/44.gif'
  });
}

function s33() {
  send('delbicxxx', {
    im3: 'im3/45.png'
  });
}

function s34() {
  send('delbicxxx', {
    im3: 'im3/46.gif'
  });
}

function s35() {
  send('delbicxxx', {
    im3: "im3/50.gif"
  });
}

function s36() {
  send("delbicxxx", {
    im3: 'im3/51.gif'
  });
}

function s37() {
  send("delbicxxx", {
    im3: 'im3/53.gif'
  });
}

function s38() {
  send('delbicxxx', {
    im3: 'im3/55.gif'
  });
}

function s39() {
  send('delbicxxx', {
    im3: 'im3/56.gif'
  });
}

function s40() {
  send('delbicxxx', {
    im3: 'im3/57.gif'
  });
}

function s41() {
  send('delbicxxx', {
    im3: 'im3/58.gif'
  });
}

function s42() {
  send('delbicxxx', {
    im3: 'im3/61.gif'
  });
}

function tiger() {
  $('<a class="border label mini label-success hand fa fa-edit fr prof" style="width: 100%; text-align: center; background-color: crimson!important; margin: 4px 0px 5px 0px; height: 37px; border: 1px solid #fff!important; padding: 11px;" onclick="$(\'.listHome\').slideToggle();" > ØµÙ…Ù… Ø¹Ø¶ÙˆÙŠØªÙƒ Ø¨Ù†ÙØ³Ùƒ </a> <div style="display: none;" class="listHome"> <div class="listitem"> </label> <div onclick="$(\'.listHome\').slideToggle();"class="getborder4 desginliste mb-4"> <img src="file1.png" onclick="aftarpicx();"> <img src="no.png" onclick="send(\'delbicxx\',{im2: \' \'});"> <img src="im2/1.png" onclick="t1()"> <img src="im2/2.png" onclick="t2()"> <img src="im2/3.png" onclick="t3()"> <img src="im2/4.png" onclick="t4()"> <img src="im2/5.png" onclick="t5()"> <img src="im2/6.png" onclick="t6()"> <img src="im2/7.png" onclick="t7()"> <img src="im2/8.png" onclick="t8()"> <img src="im2/9.png" onclick="t9()"> <img src="im2/11.png" onclick="t10()"> <img src="im2/12.png" onclick="t11()"> <img src="im2/15.png" onclick="t12()"> <img src="im2/16.png" onclick="t13()"> <img src="im2/17.png" onclick="t14()"> <img src="im2/18.png" onclick="t15()"> <img src="im2/19.png" onclick="t16()"> <img src="im2/20.png" onclick="t17()"> <img src="im2/23.png" onclick="t18()"> <img src="im2/27.png" onclick="t19()"> <img src="im2/28.png" onclick="t20()"> <img src="im2/29.png" onclick="t21()"> <img src="im2/30.png" onclick="t22()"> <img src="im2/31.png" onclick="t23()"> <img src="im2/32.png" onclick="t24()"> <img src="im2/33.png" onclick="t25()"> <img src="im2/34.png" onclick="t26()"> <img src="im2/35.png" onclick="t27()"> <img src="im2/36.gif" onclick="t28()"> <img src="im2/37.png" onclick="t29()"> <img src="im2/38.png" onclick="t30()"> <img src="im2/39.png" onclick="t31()"> <img src="im2/40.gif" onclick="t32()"> <img src="im2/41.png" onclick="t33()"> <img src="im2/44.png" onclick="t34()"> <img src="im2/45.png" onclick="t35()"> <img src="im2/46.png" onclick="t36()"> </div> </label> <div onclick="$(\'.listHome\').slideToggle();"class="getborder4 desginlist mb-4"> <img src="file.png" onclick="aftarpicxx();"> <img src="no.png" onclick="send(\'delbicxxx\',{im3: \' \'});"> <img src="im3/1.gif" onclick="s1()"> <img src="im3/2.gif" onclick="s2()"> <img src="im3/3.png" onclick="s3()"> <img src="im3/4.png" onclick="s4()"> <img src="im3/5.png" onclick="s5()"> <img src="im3/6.png" onclick="s6()"> <img src="im3/8.png" onclick="s7()"> <img src="im3/9.gif" onclick="s8()"> <img src="im3/10.png" onclick="s9()"> <img src="im3/12.png" onclick="s10()"> <img src="im3/13.png" onclick="s11()"> <img src="im3/14.gif" onclick="s12()"> <img src="im3/15.gif" onclick="s13()"> <img src="im3/16.png" onclick="s14()"> <img src="im3/17.gif" onclick="s15()"> <img src="im3/18.gif" onclick="s16()"> <img src="im3/19.png" onclick="s17()"> <img src="im3/20.gif" onclick="s18()"> <img src="im3/21.png" onclick="s19()"> <img src="im3/23.png" onclick="s20()"> <img src="im3/25.png" onclick="s21()"> <img src="im3/26.png" onclick="s22()"> <img src="im3/27.png" onclick="s23()"> <img src="im3/28.png" onclick="s24()"> <img src="im3/29.png" onclick="s25()"> <img src="im3/30.png" onclick="s26()"> <img src="im3/33.gif" onclick="s27()"> <img src="im3/35.png" onclick="s28()"> <img src="im3/38.png" onclick="s29()"> <img src="im3/40.gif" onclick="s30()"> <img src="im3/41.gif" onclick="s31()"> <img src="im3/43.gif" onclick="s32()"> <img src="im3/44.png" onclick="s33()"> <img src="im3/46.gif" onclick="s34()"> <img src="im3/50.gif" onclick="s35()"> <img src="im3/51.gif" onclick="s36()"> <img src="im3/53.gif" onclick="s37()"> <img src="im3/55.gif" onclick="s38()"> <img src="im3/56.gif" onclick="s39()"> <img src="im3/57.gif" onclick="s40()"> <img src="im3/58.gif" onclick="s41()"> <img src="im3/61.gif" onclick="s42()"> </div> </div> </div>').insertBefore('#settings .setsave');
}